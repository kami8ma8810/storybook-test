import{u as $}from"./ModalUpgradeRequired-a455cfd7.js";import{o as y,c4 as h,G as v,eF as a}from"./ModalPvLimitAlertView-cb9178ae.js";import{b as m,e as f,ai as L}from"./vue.esm-bundler-33967e91.js";const x="Any Website",p="all";class B{map;list;constructor(t){this.map=t,this.list=Object.entries(this.map).map(([s,e])=>({count:e.count,id:s,info:{...e.info,index:isNaN(e.info.index)?0:e.info.index,isBasic:e.info.tags?.includes(x)}}))}filter(t,s){return this.list.filter(e=>{if(e.info.isBasic)return!1;const n=e.info.langs||[e.info.lang],o=t===p||n.some(l=>new RegExp(`^${t.join("|")}$`).test(l)),u=!s||e.info.tags?.includes(s);return o&&u}).sort((e,n)=>n.info.index-e.info.index)}filterBasic(t){return this.list.filter(s=>{if(!s.info.isBasic)return!1;const e=s.info.langs||[s.info.lang];return t===p||e.some(o=>new RegExp(`^${t.join("|")}$`).test(o))}).sort((s,e)=>e.info.index-s.info.index)}}const A={async getTemplateMap(i){const t=await y.get(`${i}/meta.json`);return new B(t.data)}},E={getTemplate(){return A.getTemplateMap(h().state.database.templatesUrl)}},d=m(!1),g=m(),w=()=>{const i=v(),t=$(),s=f(()=>i.getters["v2/langCode"]),e=f(()=>s.value==="ja"?"https://studio.design/ja/store":"https://studio.design/store"),n=r=>t.query[a]?{name:"PageProjectTemplates",params:{templateId:r},query:{[a]:t.query[a],modal:"create"}}:{name:"PageProjectTemplates",params:{templateId:r},query:{modal:"create"}},o=()=>t.query[a]?{name:"PageProjectTemplates",query:{[a]:t.query[a]}}:{name:"PageProjectTemplates"},u=r=>r?`https://preview.studio.site/templates/${r}`:"",l=r=>`${e.value}/templates/${r}`,T=(r,c=!1)=>r==="ALL"?c?`${e.value}/paid`:`${e.value}/free`:c?`${e.value}/categories/${r}?paid=true`:`${e.value}/categories/${r}`;L(async()=>{d.value===!1&&(d.value=!0,g.value=await E.getTemplate())});const j=["tier:tier_0",s.value==="ja"?"country:ja":"country:en"].join(" "),P=["-tier:tier_0",s.value==="ja"?"country:ja":"country:en"].join(" ");return{closeCreateProjectModalPathBuilder:o,freeQuery:j,openCreateProjectModalPathBuilder:n,paidQuery:P,previewUrlBuilder:u,storeCategoryUrlBuilder:T,storeUrl:e,storeUrlBuilder:l,templateMap:g}};export{w as u};
