import{f as k,x as B,e as i,G as t,H as a,N as d,A as p,F as x,Z as F,Q as I,S as v,U as A}from"./vue.esm-bundler-33967e91.js";import{b as E,N as H,F as U}from"./Editor-e2ebb077.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import"./ModalPvLimitAlertView-cb9178ae.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./iframe-4066d2cc.js";import"../sb-preview/runtime.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";const q=["onMouseup"],G={key:1,class:"add-child"},_=k({__name:"NodeCardDef",props:{node:{type:Object,required:!0}},setup(h){const N=h,{node:e}=B(N),{selectedNodeId:M,draggingNode:o,replaceNode:V,findNode:y,updateNode:s}=E(),c=i(()=>(e.value.children||[]).map(r=>y(r)).filter(Boolean)),C=r=>{if(!o.value||o.value.id===e.value.id)return;s(o.value.id,{position:null});const n=[...e.value.children||[]];n.splice(r,0,o.value.id),s(e.value.id,{children:n})},D=r=>{const n=[...e.value.children||[],r];s(e.value.id,{children:n})},m=i(()=>{if(o.value)return o.value.id!==e.value.id}),l=i(()=>c.value.length!==0),f=i(()=>e.value.type==="actionDef"),b=i(()=>{switch(e.value.type){case"formulaDef":return["formula"];case"actionDef":return["action"];case"functionDef":return["function"];default:return[]}});return(r,n)=>(t(),a("div",{ref:"el",class:d(["NodeCardDef",[p(e).type,{hasChild:l.value}]])},[l.value?(t(),a("div",{key:0,class:d(["children-container",[{isDroppable:m.value,hasChild:l.value},p(e).type]])},[(t(!0),a(x,null,F(c.value,(u,g)=>(t(),a("div",{key:u.id,class:d(["child-frame",{isAction:f.value}])},[u?(t(),I(H,{key:0,node:u},null,8,["node"])):v("",!0),f.value?(t(),a("div",{key:1,class:d(["child-gap",{isDroppable:m.value}]),onMouseup:w=>C(g+1)},null,42,q)):v("",!0)],2))),128))],2)):(t(),a("div",G,[A(U,{types:b.value,node:p(e),onUpdate:D},null,8,["types","node"])]))],2))}});const ie=j(_,[["__scopeId","data-v-b4d82b82"]]);_.__docgenInfo={exportName:"default",displayName:"NodeCardDef",description:"",tags:{},props:[{name:"node",type:{name:"BlueprintNode"},required:!0}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/BlueprintEditor/NodeCard/NodeCardDef.vue"]};export{ie as default};
