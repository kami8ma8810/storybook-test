import{f as T,e as c,H as _,U as h,R,A as o,q,N as z,G as v,K as y,J as C,F as O,Z as X,Q as Y,I as ce,S as N,b as L,P as te,W as V,x as je,O as U,a8 as ee,w as ge,a7 as $e,_ as Re}from"./vue.esm-bundler-33967e91.js";import{u as de}from"./vue-i18n.cjs-bd62fc86.js";import{P as ne}from"./PfIcon-bb1c3c10.js";import{fc as K,fg as Be,fh as Te,fi as Ne,fj as Me,fk as He,fd as ye,fl as re,fm as qe,fn as Le,fo as Q,fp as Ue,cr as f,ac as Fe,s as _e,fq as Oe,c4 as ze,a6 as be,da as Ge,av as oe,a8 as he,aY as pe,bu as Ve,fr as De,fs as Ye,aL as Ke,ed as We,dy as Je,ff as ie,a4 as Ze,ft as Qe,i as Xe}from"./ModalPvLimitAlertView-cb9178ae.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import{c as et}from"./ModalUpgradeRequired-a455cfd7.js";import{u as Pe}from"./useDateParser-7d78465d.js";import{P as tt}from"./PdSectionTitle-5e0aef1e.js";import{c as at}from"./_commonjsHelpers-042e6b4d.js";import"./PfButton-db6d6722.js";const ke=T({__name:"DropDownBlockTitle",props:{type:{}},setup(n){const{t:r}=de(),e=n,{selectedPVSessionType:l}=K(),a=c(()=>[{id:"pv",label:r("Analytics: Pageviews")},{id:"session",label:r("Analytics: Sessions")}]),i=c(()=>a.value.find(g=>g.id===l.value)??a.value[0]),t=c({get(){return a.value.find(g=>g.id===i.value?.id)},set(g){g&&d(g.id)}}),s=c(()=>e.type==="chart"&&t.value?.id==="pv"?r("Analytics: Total Pageviews"):e.type==="chart"&&t.value?.id==="session"?r("Analytics: Total Sessions"):e.type==="pagesInTop"&&t.value?.id==="pv"?r("Analytics: Top Pageviews Page"):e.type==="pagesInTop"&&t.value?.id==="session"?r("Analytics: Top Sessions Page"):t.value?.label),u=c(()=>e.type==="pages"),d=async g=>{l.value=g};return(g,j)=>(v(),_("div",{class:z(["DropDownBlockTitle",{"title-layout":!o(u)}])},[h(o(Me),{modelValue:o(t),"onUpdate:modelValue":j[0]||(j[0]=P=>q(t)?t.value=P:null)},{default:R(()=>[h(o(Be),{class:"button"},{default:R(()=>[y("p",{class:z({"pages-font":o(u)})},C(o(s)),3),h(ne,{icon:"chevronDown",size:"sm","icon-color":o(u)?"gray-600":"black"},null,8,["icon-color"])]),_:1}),h(o(Te),{class:"options"},{default:R(()=>[(v(!0),_(O,null,X(o(a),P=>(v(),Y(o(Ne),{key:P.id,value:P},{default:R(()=>[ce(C(P.label)+" ",1),P.id===o(t)?.id?(v(),Y(ne,{key:0,icon:"check"})):N("",!0)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])],2))}});const ia=W(ke,[["__scopeId","data-v-5ccb5c42"]]);ke.__docgenInfo={exportName:"default",displayName:"DropDownBlockTitle",description:"",tags:{},props:[{name:"type",required:!0,type:{name:"union",elements:[{name:'"chart"'},{name:'"pagesInTop"'},{name:'"pages"'}]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/module/DropDownBlockTitle.vue"]};const fe=new Ue,st=n=>`${n.projectId}-${f(n.range.start).format("YYYY-M-D")}-${f(n.range.end).format("YYYY-M-D")}-${n.pageNumber||1}`,nt=async(n,r)=>{const e=st(n),l=fe.get(n.projectId,e);if(l)return l;const a=rt(n),i=await He.getProjectAnalyticsPage(a.projectId,a.timezone,a.startDate,a.endDate,a.compareStart,a.compareEnd,a.limit,a.offset),s={pages:i.data.data.pageviews.map(u=>{const d=u.viewCount??0,g=u.sessionCount??0,j=r?u.compareViewCount??0:0,P=r?u.compareSessionCount??0:0;return{path:u.pagePath??"",pv:{point:d,increaseRate:ye.fromBeforeAfterNumber(d,j)},session:{point:g,increaseRate:ye.fromBeforeAfterNumber(g,P)}}}),totalPage:Math.ceil(i.data.data.recordCount/re)};return fe.set(e,s),s},rt=n=>{const{_start:r,_end:e}=qe(n.range.start,n.range.end);return{projectId:n.projectId,timezone:Le(),startDate:Q(n.range.start),endDate:Q(n.range.end),compareStart:Q(r),compareEnd:Q(e),limit:re,offset:n.pageNumber?(n.pageNumber-1)*re:0}},ot=Fe("analyticsPages",()=>{const n=L([]),r=L(1),e=Oe(),{startDate:l,endDate:a,isComparable:i}=K(),t=async u=>{const d=await nt({projectId:e.projectId,range:{start:l.value,end:a.value},pageNumber:u},i.value);n.value=d.pages,r.value=d.totalPage};return{pagesData:c(()=>{const u=ze().getters["project/project"];return u.currentPlanIsFree?[]:u.currentPlanIsPlanV3Starter?n.value.slice(0,3):n.value}),totalPage:r,loadPagesData:t}}),la=()=>_e(ot()),it=()=>{const{pageIdMap:n,pages:r}=be(),e=Ge();return{pathToPageName:a=>{if(a==="/")return n.value["/"]?.name??r.value.find(s=>oe.isPage(s)&&!s.query)?.name??a;const i=a.endsWith("/")?a.slice(0,-1):a,t=he.createByPath(i,{},n.value);if(t.type==="page"){const s=n.value[t.pageId];if(!s)return a;if(oe.isCmsPage(s)){const u=a.split("/").at(-1);return e.value.list.find(g=>g.slug===u)?.title??a}return s.name??a}return a}}},lt=()=>{const{pageIdMap:n}=be();return{isCmsPage:e=>{const l=e.endsWith("/")?e.slice(0,-1):e,a=he.createByPath(l,{},n.value);if(a.type==="page"){const i=n.value[a.pageId];return i?oe.isCmsPage(i):!1}return!1}}},ut=""+new URL("i-18-trend-sideways-arrow-52e1e5b7.svg",import.meta.url).href,ct=""+new URL("i-18-trend-up-arrow-704f78f0.svg",import.meta.url).href,dt=""+new URL("i-18-trend-down-arrow-4ba5f9c0.svg",import.meta.url).href,pt={class:"TrendIndicator"},vt={key:0,class:"arrow",src:ut,alt:"sideways-arrow"},mt={key:1,class:"arrow",src:ct,alt:"up-arrow"},gt={key:2,class:"arrow",src:dt,alt:"down-arrow"},yt={key:1},ft={key:2,class:"isDisabled"},Se=T({__name:"TrendIndicator",props:{percent:{},isInInsight:{type:Boolean}},setup(n){const r=n,e=c(()=>r.percent>0),l=c(()=>r.percent===1/0||isNaN(r.percent)),a=c(()=>r.percent===0);return(i,t)=>(v(),_("div",pt,[o(l)?i.isInInsight?(v(),_("p",yt)):(v(),_("p",ft,"-")):(v(),_(O,{key:0},[o(a)?(v(),_("img",vt)):o(e)?(v(),_("img",mt)):(v(),_("img",gt)),y("p",{class:z({upTrend:o(e),stay:o(a)})},C(Math.abs(i.percent).toFixed(1))+"%",3)],64))]))}});const _t=W(Se,[["__scopeId","data-v-fa1c8ab7"]]);Se.__docgenInfo={exportName:"default",displayName:"TrendIndicator",description:"",tags:{},props:[{name:"percent",required:!0,type:{name:"number"}},{name:"isInInsight",required:!1,type:{name:"boolean"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/module/TrendIndicator.vue"]};const bt={class:"bar-chart"},Ae=T({__name:"BarChart",props:{value:{}},setup(n){const r=n,e=c(()=>({"--start-width":"0%","--end-width":`${r.value*100}%`}));return(l,a)=>(v(),_("div",bt,[y("div",{class:"bar-chart-active",style:te(e.value)},null,4)]))}});const ht=W(Ae,[["__scopeId","data-v-c0f5a5eb"]]);Ae.__docgenInfo={exportName:"default",displayName:"BarChart",description:"",tags:{},props:[{name:"value",required:!0,type:{name:"number"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/module/BarChart.vue"]};const Dt={class:"path-data-list-item"},Pt={class:"path-info-block"},kt={key:0,class:"cms-label"},St=["href"],At={class:"_line-clamp-2"},wt={class:"page-name"},xt={class:"page-path"},Et={class:"path-data-list-item-right"},It={class:"right-child"},Ct={class:"page-path-value"},jt={key:0,class:"trend"},we=T({__name:"PageListItem",props:{increaseRate:{},percent:{},value:{},pagePath:{},type:{}},setup(n){const r=n,{pathToPageName:e}=it(),{isCmsPage:l}=lt(),{project:a}=pe(),i=c(()=>a.value?`${a.value.publishUrl}${r.pagePath}`:"");return(t,s)=>(v(),_("div",Dt,[y("div",Pt,[o(l)(t.pagePath)?(v(),_("div",kt,"CMS")):N("",!0),y("div",{class:"path-text",style:te(o(l)(t.pagePath)&&t.type==="pages"?"max-width: calc(100% - 260px)":t.type==="pages"?"max-width: calc(100% - 225px)":o(l)(t.pagePath)&&t.type==="top"?"max-width: calc(100% - 135px)":"max-width: calc(100% - 100px)")},[y("a",{class:"page-link _group",href:o(i),target:"_blank",rel:"noopener noreferrer"},[y("div",At,[y("span",wt,C(o(e)(t.pagePath)),1),y("span",xt,C(t.pagePath),1)]),h(o(ne),{icon:"openWindow",size:"sm","icon-color":"gray-500",class:"_ml-3 _-mb-3 _opacity-0 group-hover:_opacity-100"})],8,St)],4),y("div",Et,[y("div",It,[y("p",Ct,C(t.value.toLocaleString()),1)]),typeof t.increaseRate=="number"?(v(),_("div",jt,[h(_t,{percent:t.increaseRate},null,8,["percent"])])):N("",!0)])]),h(ht,{class:"bar-chart",value:t.percent},null,8,["value"])]))}});const ua=W(we,[["__scopeId","data-v-aa420648"]]);we.__docgenInfo={exportName:"default",displayName:"PageListItem",description:"",tags:{},props:[{name:"increaseRate",required:!1,type:{name:"number"}},{name:"percent",required:!0,type:{name:"number"}},{name:"value",required:!0,type:{name:"number"}},{name:"pagePath",required:!0,type:{name:"string"}},{name:"type",required:!0,type:{name:"union",elements:[{name:'"top"'},{name:'"pages"'}]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/module/PageListItem.vue"]};const ca=(n,r,e)=>({pageList:c(()=>{const s=[...n.value];return r.value==="pv"?s.sort((u,d)=>d.pv.point-u.pv.point):s.sort((u,d)=>d.session.point-u.session.point)}),increaseRate:s=>r.value==="pv"?s.pv.increaseRate:s.session.increaseRate,percent:s=>r.value==="pv"?s.pv.point/e.value.view.totalView.pv.point:s.session.point/e.value.view.totalView.session.point,value:s=>r.value==="pv"?s.pv.point:s.session.point}),G=n=>{const{dateFormatter:r}=Pe();return c(()=>n.value?.format(r.value))},$t=()=>{const{startDate:n,endDate:r}=K(),e=c(()=>f(n.value)),l=c(()=>f(r.value)),a=G(e),i=G(l);return{displayStartDate:a,displayEndDate:i}},Rt=["data-status"],xe=T({__name:"DateSelectButton",props:{buttonStatus:{},isActive:{type:Boolean},isDuring:{type:Boolean},isHoveringToday:{type:Boolean},isEndPicking:{type:Boolean},isExistEndDate:{type:Boolean},isHoveringAtEndPicking:{type:Boolean},hoveringPosition:{},isRangeStart:{type:Boolean},isRangeEnd:{type:Boolean},displayDayjs:{},localDayjs:{}},emits:["selectDate","hoverDate"],setup(n,{emit:r}){const e=n,l=r,a=f(),{isDarkMode:i}=Ve(),t=c(()=>i.value?"#012651":"#e1eeff"),s=c(()=>{const I=e.displayDayjs.year()===e.localDayjs.year()&&e.displayDayjs.month()===e.localDayjs.month();return I?e.isActive?"active":a.isSame(e.localDayjs,"day")?"today":e.isDuring?"isDuring":e.isHoveringAtEndPicking?"isHoveringAtEndPicking":"normal":"inactive"}),u=c(()=>{switch(s.value){case"normal":return[e.buttonStatus==="disabled"?"_pointer-events-none":"_cursor-pointer hover:_bg-gray-50"];case"today":return["_border-1 _border-solid _border-blue-600"];case"isDuring":return["_bg-blue-100","_rounded-none","_cursor-pointer"];case"isHoveringAtEndPicking":return["_bg-blue-400","_cursor-pointer"];case"active":return[e.buttonStatus==="disabled"?"_bg-gray-500":"_bg-blue-600","_cursor-pointer"];default:return[]}}),d=c(()=>{switch(s.value){case"normal":return[e.buttonStatus==="disabled"?"_text-gray-500":""];case"today":return["_text-gray-500"];case"active":case"isHoveringAtEndPicking":return["_text-white"];case"inactive":return["_text-gray-500"];default:return[]}}),g=c(()=>s.value==="isDuring"&&!e.isRangeStart&&!e.isRangeEnd?{"background-color":t.value,cursor:"pointer"}:s.value==="isHoveringAtEndPicking"&&e.hoveringPosition==="same"?{"background-color":t.value,cursor:"pointer"}:e.isRangeStart&&e.isRangeEnd?{"background-color":t.value,cursor:"pointer"}:s.value==="isHoveringAtEndPicking"&&e.hoveringPosition==="before"?{"background-image":`linear-gradient(to right, transparent 50%, ${t.value} 50%)`,cursor:"pointer"}:s.value==="isHoveringAtEndPicking"&&e.hoveringPosition==="after"?{"background-image":`linear-gradient(to right, ${t.value} 50%, transparent 50%)`,cursor:"pointer"}:e.isRangeEnd?{"background-image":`linear-gradient(to right, ${t.value} 50%, transparent 50%)`,cursor:"pointer"}:e.isEndPicking&&e.isRangeStart&&e.hoveringPosition==="same"?{"background-color":t.value,cursor:"pointer"}:e.isEndPicking&&e.isRangeStart&&e.hoveringPosition==="before"?{"background-image":`linear-gradient(to right, ${t.value} 50%, transparent 50%)`,cursor:"pointer"}:e.isEndPicking&&e.isRangeStart&&e.hoveringPosition==="after"&&!e.isHoveringToday?{"background-image":`linear-gradient(to right, transparent 50%, ${t.value} 50%)`,cursor:"pointer"}:e.isRangeStart&&e.isExistEndDate?{"background-image":`linear-gradient(to right, transparent 50%, ${t.value} 50%)`,cursor:"pointer"}:{}),j=c(()=>s.value==="inactive"?"hidden":"visible"),P=()=>{e.buttonStatus!=="disabled"&&l("selectDate",e.localDayjs)},S=()=>{e.buttonStatus!=="disabled"&&l("hoverDate",e.localDayjs)},E=()=>{e.buttonStatus!=="disabled"&&l("hoverDate",void 0)};return(I,b)=>(v(),_("div",{style:te({...g.value,visibility:j.value}),class:"_flex _h-32 _w-36 _justify-center","data-status":s.value,onMouseenter:S,onMouseleave:E},[y("div",{class:z([u.value,"_flex _h-32 _w-32 _select-none _items-center _justify-center _rounded-full"]),onClick:V(P,["stop"])},[y("span",{class:z([d.value,"label-sm-bold"])},C(I.localDayjs.date()),3)],2)],44,Rt))}});xe.__docgenInfo={exportName:"default",displayName:"DateSelectButton",description:"",tags:{},props:[{name:"buttonStatus",required:!0,type:{name:"ButtonStatus"}},{name:"isActive",required:!0,type:{name:"boolean"}},{name:"isDuring",required:!0,type:{name:"boolean"}},{name:"isHoveringToday",required:!0,type:{name:"boolean"}},{name:"isEndPicking",required:!0,type:{name:"boolean"}},{name:"isExistEndDate",required:!0,type:{name:"boolean"}},{name:"isHoveringAtEndPicking",required:!0,type:{name:"boolean"}},{name:"hoveringPosition",required:!0,type:{name:"union",elements:[{name:'"before"'},{name:'"after"'},{name:'"same"'},{name:'"none"'}]}},{name:"isRangeStart",required:!0,type:{name:"boolean"}},{name:"isRangeEnd",required:!0,type:{name:"boolean"}},{name:"displayDayjs",required:!0,type:{name:"Dayjs"}},{name:"localDayjs",required:!0,type:{name:"Dayjs"}}],events:[{name:"selectDate",type:{names:["Dayjs"]}},{name:"hoverDate",type:{names:["union"],elements:[{name:"Dayjs"},{name:"undefined"}]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/DateRangePicker/DateSelectButton.vue"]};var le={},Bt={get exports(){return le},set exports(n){le=n}};(function(n,r){(function(e,l){n.exports=l()})(at,function(){return function(e,l,a){var i=function(t,s){if(!s||!s.length||!s[0]||s.length===1&&!s[0].length)return null;var u;s.length===1&&s[0].length>0&&(s=s[0]),u=s[0];for(var d=1;d<s.length;d+=1)s[d].isValid()&&!s[d][t](u)||(u=s[d]);return u};a.max=function(){var t=[].slice.call(arguments,0);return i("isAfter",t)},a.min=function(){var t=[].slice.call(arguments,0);return i("isBefore",t)}}})})(Bt);const Tt=le;f.extend(Tt);const ve=()=>{const{project:n}=pe(),r=De(),{firstPublishTime:e}=K(),l=c(()=>{const S=e.value;if(S)return f.utc(S).local()}),a=f(Ye).local(),i=c(()=>n.value.currentPlanIsFree?30:n.value.currentPlanIsPlanV3Starter?180:-1),t=c(()=>{if(i.value!==-1)return r.subtract(i.value,"day").subtract(1,"day")}),s=c(()=>{const S=[l.value,a,t.value].filter(Ke);return f.max(S)}),u=c(()=>t.value&&t.value.isSame(s.value)?"plan":l.value&&l.value.isSame(s.value)?"firstPublish":"firstCollect"),d=c(()=>r.subtract(1,"day")),g=G(s),j=G(d);function P(S){const E=S.isSame(s.value,"day")||S.isAfter(s.value,"day"),I=S.isSame(d.value,"day")||S.isBefore(d.value,"day");return E&&I}return{availableDateRestrictReason:u,planRestrictDays:i,availableStartDate:s,availableEndDate:d,displayAvailableStartDate:g,displayAvailableEndDate:j,isAvairableDate:P}},Nt={class:"label-md-bold _absolute _inset-x-0 _select-none _text-center"},Mt={class:"label-xs2-bold _text-gray-500"},ue=T({__name:"DatePickCalendar",props:{pickedStartDate:{},pickedEndDate:{},hoveringDate:{},side:{},availableStartDate:{},availableEndDate:{},displayMonth:{}},emits:["update:pickedStartDate","update:pickedEndDate","update:hoveringDate","toPrevMonth","toNextMonth"],setup(n,{emit:r}){const e=n,l=r,{pickedStartDate:a,pickedEndDate:i,hoveringDate:t}=je(e),{isAvairableDate:s}=ve(),u=c(()=>({width:`${We}px`})),d=c(()=>e.displayMonth),g=c(()=>d.value.date(1).hour(0).minute(0)),j=c(()=>Je.toYearAndMonthFormat(g.value)),P=c(()=>!t?.value||!a?.value||t.value.isBefore(e.availableStartDate,"day")?"none":t.value.isBefore(a.value,"day")?"before":t.value.isAfter(a.value,"day")?"after":"same"),S=c(()=>{const b=De(),A=g.value.day(),k=[[],[],[],[],[],[]];let p=A===0?g.value:g.value.subtract(A,"day");const M=t?.value&&t.value.isSame(b,"day")||!1;for(let $=0;$<42;$++){const B=!!t?.value&&(t.value.isAfter(e.availableStartDate,"day")||t.value.isSame(e.availableStartDate,"day")),w=!!a?.value&&!!i?.value&&f(a?.value).isBefore(p,"day")&&f(i?.value).isAfter(p,"day"),F=!!t?.value&&!!a?.value&&!i?.value,J=f(t?.value).isBefore(a?.value,"day")&&f(p).isAfter(t?.value,"day")&&f(p).isBefore(a?.value,"day")&&B,ae=f(t?.value).isAfter(a?.value,"day")&&f(p).isBefore(t?.value,"day")&&f(p).isAfter(a?.value,"day"),Z=F&&!!t.value&&t.value.isSame(p,"day")&&B,m=s(p)?"default":"disabled";k[Math.floor($/7)].push({status:m,isActive:!!a?.value&&f(a?.value).isSame(p,"day")||!!i?.value&&f(i?.value).isSame(p,"day"),isDuring:w||F&&(J||ae)&&!M,isHoveringToday:M,isEndPicking:F,isExistEndDate:!!i?.value,isHoveringAtEndPicking:Z,hoveringPosition:P.value,isRangeStart:!!a?.value&&f(a?.value).isSame(p,"day"),isRangeEnd:!!i?.value&&f(i?.value).isSame(p,"day"),dayjs:p}),p=p.add(1,"day")}return k}),E=b=>{if(!i?.value&&a?.value){b.isAfter(a.value)?l("update:pickedEndDate",b):(l("update:pickedEndDate",a.value),l("update:pickedStartDate",b));return}l("update:pickedStartDate",b),l("update:pickedEndDate",void 0)},I=b=>{l("update:hoveringDate",b)};return(b,A)=>{const k=U("PfIcon"),p=U("PfRow"),M=U("PfColumn");return v(),_("div",{style:te(u.value),class:"_flex _flex-col _bg-white _pt-4",tabindex:"1",onClick:A[2]||(A[2]=V(()=>{},["stop"])),onKeydown:[A[3]||(A[3]=ee(V($=>b.$emit("toNextMonth"),["stop"]),["right"])),A[4]||(A[4]=ee(V($=>b.$emit("toPrevMonth"),["stop"]),["left"]))],onMousedown:A[5]||(A[5]=V(()=>{},["stop"]))},[h(M,{align:"center",class:"_px-16 _pt-10 _pb-4",gap:"16"},{default:R(()=>[h(p,{align:"center",class:"_relative _pl-4",justify:b.side==="left"?"start":"end",w:"full"},{default:R(()=>[b.side==="left"?(v(),_("button",{key:0,style:{width:"24px",height:"24px"},class:"_z-1 _flex _items-center _justify-center",onClick:A[0]||(A[0]=$=>b.$emit("toPrevMonth"))},[h(k,{"icon-color":"black",icon:"chevronLeft",size:"sm"})])):N("",!0),y("span",Nt,C(j.value),1),b.side==="right"?(v(),_("button",{key:1,style:{width:"24px",height:"24px"},class:"_z-1 _flex _items-center _justify-center",onClick:A[1]||(A[1]=$=>b.$emit("toNextMonth"))},[h(k,{"icon-color":"black",icon:"chevronRight",size:"sm"})])):N("",!0)]),_:1},8,["justify"])]),_:1}),h(p,{class:"_px-12",w:"full"},{default:R(()=>[(v(),_(O,null,X(["Su","Mo","Tu","We","Th","Fr","Sa"],$=>y("div",{key:$,class:"_flex _h-32 _flex-1 _select-none _items-center _justify-center"},[y("span",Mt,C($),1)])),64))]),_:1}),h(M,{gap:"2",w:"full"},{default:R(()=>[(v(!0),_(O,null,X(S.value,($,B)=>(v(),Y(p,{key:B,class:"_px-12",w:"full"},{default:R(()=>[(v(!0),_(O,null,X($,w=>(v(),_("div",{key:w.dayjs.date(),class:"_flex _h-32 _flex-1 _items-center _justify-center"},[h(xe,{"button-status":w.status,"is-active":w.isActive,"is-during":w.isDuring,"is-hovering-today":w.isHoveringToday,"is-end-picking":w.isEndPicking,"is-exist-end-date":w.isExistEndDate,"is-hovering-at-end-picking":w.isHoveringAtEndPicking,"hovering-position":w.hoveringPosition,"is-range-start":w.isRangeStart,"is-range-end":w.isRangeEnd,"display-dayjs":g.value,"local-dayjs":w.dayjs,onSelectDate:E,onHoverDate:I},null,8,["button-status","is-active","is-during","is-hovering-today","is-end-picking","is-exist-end-date","is-hovering-at-end-picking","hovering-position","is-range-start","is-range-end","display-dayjs","local-dayjs"])]))),128))]),_:2},1024))),128))]),_:1})],36)}}});ue.__docgenInfo={exportName:"default",displayName:"DatePickCalendar",description:"",tags:{},props:[{name:"pickedStartDate",required:!1,type:{name:"Dayjs"}},{name:"pickedEndDate",required:!1,type:{name:"Dayjs"}},{name:"hoveringDate",required:!1,type:{name:"Dayjs"}},{name:"side",required:!0,type:{name:"union",elements:[{name:'"left"'},{name:'"right"'}]}},{name:"availableStartDate",required:!0,type:{name:"Dayjs"}},{name:"availableEndDate",required:!0,type:{name:"Dayjs"}},{name:"displayMonth",required:!0,type:{name:"Dayjs"}}],events:[{name:"toNextMonth"},{name:"toPrevMonth"},{name:"update:pickedStartDate",type:{names:["union"],elements:[{name:"Dayjs"},{name:"undefined"}]}},{name:"update:pickedEndDate",type:{names:["union"],elements:[{name:"Dayjs"},{name:"undefined"}]}},{name:"update:hoveringDate",type:{names:["union"],elements:[{name:"Dayjs"},{name:"undefined"}]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/DateRangePicker/DatePickCalendar.vue"]};const Ht={class:"_flex _flex-row _items-center _gap-4 _pl-8"},qt={class:"label-sm-bold"},Lt={key:1,class:"label-sm-normal"},Ut={class:"label-sm-bold _text-blue-600"},Ee=T({__name:"PlanLimitMessage",setup(n){const{project:r}=pe(),{availableDateRestrictReason:e,planRestrictDays:l,displayAvailableStartDate:a}=ve();return(i,t)=>{const s=U("i18n-t"),u=U("PfIcon");return v(),_("div",Ht,[o(e)==="plan"?(v(),Y(s,{key:0,keypath:"Analytics: Plan limit for calendar",tag:"p",class:"label-sm-normal"},{default:R(()=>[y("span",null,C(o(r).currentPlanName),1),y("span",qt,C(i.$t("Analytics: Plan limit days",[o(l)])),1)]),_:1})):(v(),_("p",Lt,C(i.$t("Analytics: Available data from",[o(a)])),1)),o(e)==="plan"?(v(),Y(o(et),{key:2,to:{name:"PagePdDashboardPlans"},variant:"tertiary",size:"sm",class:"!_px-14"},{default:R(()=>[h(u,{icon:"questionCircle","icon-color":"blue-600",size:"16"}),y("p",Ut,C(i.$t("Analytics: Compare plans")),1)]),_:1})):N("",!0)])}}});Ee.__docgenInfo={exportName:"default",displayName:"PlanLimitMessage",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/DateRangePicker/PlanLimitMessage.vue"]};const Ft={key:0,class:"_absolute _top-56 _right-0 _flex _flex-col _rounded-6 _bg-white _pt-4 _shadow-12"},Ot={class:"_flex"},zt={class:"_mx-16 _mt-8 _mb-12 _flex _items-center _rounded-6 _bg-gray-50"},Gt=["value"],Vt=y("div",{class:"_flex _h-24 _w-24 _shrink-0 _items-center _justify-center"},[y("span",{class:"_h-2 _w-16 _rounded-full _bg-black"})],-1),Yt=["value"],Kt=y("div",{class:"_flex-1"},null,-1),Ie=T({__name:"DateRangePicker",props:{isOpen:{type:Boolean,default:!1}},emits:["update:isOpen"],setup(n,{emit:r}){const e=r,{setDateRange:l}=ie(),{pageNumber:a,startDate:i,endDate:t,selectedPeriod:s}=_e(ie()),{availableStartDate:u,availableEndDate:d,displayAvailableStartDate:g,displayAvailableEndDate:j,isAvairableDate:P}=ve(),{parseDate:S}=Pe(),{showSnackBar:E}=Ze(),{t:I}=de(),b=L(f(t.value)),A=c(()=>b.value.subtract(1,"month")),k=L(f(i.value)),p=L(f(t.value)),M=G(k),$=G(p),B=L(void 0),w=D=>{if(!D.target)return;D.target.select()},F=D=>{if(!D.target)return;D.target.blur()},J=(D,m)=>{if(!D.target)return;const se=D.target,H=S(se.value);if(!H.isValid()){E("cautionCircle",I("Analytics: Enter a date"));return}if(!P(H)){H.isAfter(d.value)?E("cautionCircle",I("Analytics: Select a date up to",[j.value])):E("cautionCircle",I("Analytics: Select a date after",[g.value]));return}m==="start"?k.value=H:p.value=H},ae=()=>{if(!k.value||!k.value.isValid()||!p.value||!p.value.isValid())return;const D=new Date(k.value.toDate()),m=new Date(p.value.toDate());D.setHours(0,0,0,0),m.setHours(23,59,59,999),l(D,m),s.value.id="custom",a.value=1,e("update:isOpen",!1)},Z=D=>{b.value=b.value.add(D,"month")};return ge(i,D=>{k.value=f(D)}),ge(t,D=>{p.value=f(D)}),(D,m)=>{const se=U("PfButton"),H=U("PfRow"),me=$e("click-outside");return D.isOpen?Re((v(),_("div",Ft,[y("div",Ot,[h(ue,{"picked-start-date":o(k),"onUpdate:pickedStartDate":m[0]||(m[0]=x=>q(k)?k.value=x:null),"picked-end-date":o(p),"onUpdate:pickedEndDate":m[1]||(m[1]=x=>q(p)?p.value=x:null),"hovering-date":o(B),"onUpdate:hoveringDate":m[2]||(m[2]=x=>q(B)?B.value=x:null),"display-month":o(A),side:"left","available-start-date":o(u),"available-end-date":o(d),onToPrevMonth:m[3]||(m[3]=x=>Z(-1))},null,8,["picked-start-date","picked-end-date","hovering-date","display-month","available-start-date","available-end-date"]),h(ue,{"picked-start-date":o(k),"onUpdate:pickedStartDate":m[4]||(m[4]=x=>q(k)?k.value=x:null),"picked-end-date":o(p),"onUpdate:pickedEndDate":m[5]||(m[5]=x=>q(p)?p.value=x:null),"hovering-date":o(B),"onUpdate:hoveringDate":m[6]||(m[6]=x=>q(B)?B.value=x:null),"display-month":o(b),side:"right","available-start-date":o(u),"available-end-date":o(d),onToNextMonth:m[7]||(m[7]=x=>Z(1))},null,8,["picked-start-date","picked-end-date","hovering-date","display-month","available-start-date","available-end-date"])]),y("div",zt,[y("input",{value:o(M),class:"label-sm-bold _flex-grow _cursor-pointer _rounded-6 _px-6 _py-8 _text-center _text-black hover:_bg-gray-100 focus:_bg-blue-50 focus:_outline-none focus:_ring-1 focus:_ring-blue-600",onKeydown:ee(F,["enter"]),onBlur:m[8]||(m[8]=x=>J(x,"start")),onFocus:w},null,40,Gt),Vt,y("input",{value:o($),class:"label-sm-bold _flex-grow _cursor-pointer _rounded-6 _px-6 _py-8 _text-center _text-black hover:_bg-gray-100 focus:_bg-blue-50 focus:_outline-none focus:_ring-1 focus:_ring-blue-600",onKeydown:ee(F,["enter"]),onBlur:m[9]||(m[9]=x=>J(x,"end")),onFocus:w},null,40,Yt)]),h(H,{align:"center",class:"border-t-1 _h-60 _px-16",gap:"8",w:"full"},{default:R(()=>[h(Ee),Kt,h(se,{size:"sm",variant:"primary",disabled:!(o(k)&&o(p)),onClick:ae},{default:R(()=>[ce(C(D.$t("DatePicker:Apply")),1)]),_:1},8,["disabled"])]),_:1})])),[[me,()=>D.$emit("update:isOpen",!1)]]):N("",!0)}}});Ie.__docgenInfo={exportName:"default",displayName:"DateRangePicker",description:"",tags:{},props:[{name:"isOpen",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:isOpen",type:{names:["boolean"]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/DateRangePicker/DateRangePicker.vue"]};const Wt={class:"AnalyticsHeader"},Jt={class:"right-side-of-title"},Ce=T({__name:"AnalyticsHeader",props:{title:{},noBorder:{type:Boolean}},setup(n){const{t:r}=de(),{setDateDiff:e}=ie(),{pageNumber:l,selectedPeriod:a,haveEverPublishedSite:i}=K(),{displayStartDate:t,displayEndDate:s}=$t(),u=c(()=>a.value.id==="custom"),d=c(()=>Xe.global.locale.value==="JP"),g=c(()=>u.value&&d.value?288:u.value&&!d.value?296:!u.value&&!d.value?140:130),j=c(()=>[{id:"7days",label:r("Analytics: Last 7 Days")},{id:"30days",label:r("Analytics: Last 30 Days")},{id:"custom",label:u.value?r("Analytics: Custom Period",[t.value,s.value]):r("Analytics: Custom")}]),P=L(!1),S=async E=>{switch(E.id!=="custom"&&(a.value=E),P.value=!1,E.id){case"7days":e(7),l.value=1;break;case"30days":e(30),l.value=1;break;case"custom":P.value=!0;return;default:return}};return(E,I)=>(v(),_("div",Wt,[h(o(tt),{class:z({noBorder:E.noBorder})},{default:R(()=>[ce(C(E.title),1)]),_:1},8,["class"]),y("div",Jt,[o(i)?(v(),_(O,{key:0},[h(Qe,{size:"md",width:o(g),options:o(j),value:o(a),onChange:S},null,8,["width","options","value"]),h(Ie,{"is-open":P.value,"onUpdate:isOpen":I[0]||(I[0]=b=>P.value=b)},null,8,["is-open"])],64)):N("",!0)])]))}});const da=W(Ce,[["__scopeId","data-v-8a8c287e"]]);Ce.__docgenInfo={exportName:"default",displayName:"AnalyticsHeader",description:"",tags:{},props:[{name:"title",required:!0,type:{name:"string"}},{name:"noBorder",required:!1,type:{name:"boolean"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageAnalytics/module/AnalyticsHeader.vue"]};export{da as A,ia as D,ua as P,_t as T,it as a,ca as b,$t as c,ot as d,la as u};
