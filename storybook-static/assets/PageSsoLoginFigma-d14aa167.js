import{f as H,b as a,O as g,H as w,K as e,U as i,R as x,A as o,I as n,S as L,J as c,W as G,_ as V,$ as z,N as S,a0 as O,a6 as Z,L as R,M as J,G as y}from"./vue.esm-bundler-33967e91.js";import{_ as W}from"./studio-logo-with-text-31020a94.js";import{F as Q,U as K,f as C,G as q,m as X,P as Y,n as ee,j as te,E as oe}from"./ModalPvLimitAlertView-cb9178ae.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./iframe-4066d2cc.js";import"../sb-preview/runtime.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";const f=r=>(R("data-v-b2c8c857"),r=r(),J(),r),ae={class:"scroll-view"},ie={class:"grid-container"},le=Z('<div class="grid-item-title _flex _flex-col _gap-28" data-v-b2c8c857><div class="_flex _flex-row _items-center _gap-20" data-v-b2c8c857><div class="_flex _h-80 _w-80 _flex-row _items-center _justify-center _rounded-8 _bg-white" data-v-b2c8c857><svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b2c8c857><path d="M40 39.4189C40 35.0862 43.5608 31.5739 47.8935 31.5739V31.5739C52.2262 31.5739 55.7869 35.0862 55.7869 39.4189V39.4189C55.7869 43.7516 52.2262 47.2639 47.8935 47.2639V47.2639C43.5608 47.2639 40 43.7516 40 39.4189V39.4189Z" fill="#1ABCFE" data-v-b2c8c857></path><path d="M24.2131 55.109C24.2131 50.7763 27.7254 47.2639 32.0581 47.2639H40V55.0605C40 59.42 36.4417 62.954 32.0823 62.954V62.954C27.7496 62.954 24.2131 59.4417 24.2131 55.109V55.109Z" fill="#0ACF83" data-v-b2c8c857></path><path d="M40 15.8838V31.5739H47.9419C52.2746 31.5739 55.7869 28.0615 55.7869 23.7288V23.7288C55.7869 19.3961 52.2746 15.8838 47.9419 15.8838H40Z" fill="#FF7262" data-v-b2c8c857></path><path d="M24.2131 23.7288C24.2131 28.0615 27.7254 31.5739 32.0581 31.5739L40 31.5739V15.8838H32.0581C27.7254 15.8838 24.2131 19.3961 24.2131 23.7288V23.7288Z" fill="#F24E1E" data-v-b2c8c857></path><path d="M24.2131 39.4189C24.2131 43.7516 27.7254 47.2639 32.0581 47.2639H40V31.5738H32.0581C27.7254 31.5738 24.2131 35.0862 24.2131 39.4189V39.4189Z" fill="#A259FF" data-v-b2c8c857></path></svg></div><div class="_flex _flex-col _gap-4" data-v-b2c8c857><div class="_heading-md _text-black" data-v-b2c8c857>Figma.com</div><div data-v-b2c8c857><a class="label-md-bold _text-gray-700" href="https://figma.com" target="_blank" data-v-b2c8c857>figma.com/</a></div></div></div><div class="_flex _flex-col _gap-12" data-v-b2c8c857><h1 class="_text-black-600 _heading-sm tablet:_heading-md" data-v-b2c8c857>Figma to STUDIOにログイン</h1></div></div>',1),ne={class:"grid-item-signup _flex _flex-col _gap-12"},ce=f(()=>e("p",{class:"label-md-bold _text-black"},"STUDIOアカウントをお持ちでない方",-1)),re={class:"grid-item-form _flex _basis-1/2 _flex-col _gap-24 _rounded-12 _bg-white _p-20 tablet:_p-40"},_e={class:"_flex _flex-col _justify-center _gap-24"},de=f(()=>e("img",{height:"40",src:W},null,-1)),ue={key:0,class:"label-md-bold _flex _flex-row _items-center _gap-8 _rounded-4 _bg-red-50 _px-16 _py-12 _text-md _text-const-red-600"},pe={class:"_flex _flex-col _items-center _gap-32"},ge={class:"_flex _w-full _flex-col _items-center _justify-center _gap-32"},me={class:"_flex _w-full _flex-col _items-stretch _justify-center _gap-16"},fe=f(()=>e("img",{width:"20",height:"20",src:X,class:"_absolute _left-14"},null,-1)),he=f(()=>e("img",{width:"18",height:"18",src:ee,class:"_absolute _left-14",alt:"google icon"},null,-1)),ve={class:"_flex _flex-col _items-stretch _gap-8"},be=["placeholder"],we={class:"_relative _flex _flex-col _items-stretch _gap-8"},xe=["type","placeholder"],ye={key:0,class:"_text-sm _text-const-red-500"},Ce={class:"label-sm-bold _text-black _outline _outline-blue-200 hover:_text-const-gray-800 focus-visible:_outline-2",href:"/ja/login/recover",target:"_blank"},m="/sso/login/figma/completed",F=H({__name:"PageSsoLoginFigma",setup(r){const{setLocale:E}=Q();E(K.JP);const I=C("error_code"),j=q(),M=C("errCode"),h=C("state"),_=a(!1),l=a({email:"",password:""}),d=a(!1),T=a(null),B=a(!1),k=a(!1),U=a(M.value==="studioAiTokenInvalid"?"Invalid AI signup token.":null),u=a(""),N=async()=>{const t=h.value;if(t){d.value=!0,T.value=null,U.value=null;try{const b=(await(await fetch("https://api.studiodesignapp.com/api/v2/figma/oauth/email/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.value.email,password:l.value.password,state:t})})).json()).token;await te.updateToken(b),await j.dispatch("v2/getMe"),m&&(location.href=m),d.value=!1}catch(s){d.value=!1,u.value=oe(s)}}},$=async()=>{B.value=!0;const t=new URL("https://api.studiodesignapp.com/api/v2/figma/oauth/facebook/login");t.searchParams.set("redirect_uri",window.origin+m),t.searchParams.set("state",h.value??""),location.href=t.href},A=async()=>{k.value=!0;const t=new URL("https://api.studiodesignapp.com/api/v2/figma/oauth/google/login");t.searchParams.set("redirect_uri",window.origin+m),t.searchParams.set("state",h.value??""),location.href=t.href};return(t,s)=>{const v=g("PfIcon"),b=g("PfButtonLink"),P=g("PfButton"),D=g("PfPasswordVisibleToggleButton");return y(),w("div",ae,[e("div",ie,[le,e("div",ne,[ce,i(b,{"is-external":!0,to:"/ja/signup",class:"_w-fit _rounded-[46px] !_px-24 _outline _outline-blue-200 focus-visible:_outline-2",variant:"gradient",size:"lg"},{default:x(()=>[n("アカウントを新規作成"),i(v,{size:"sm",icon:"openWindow"})]),_:1})]),e("div",re,[e("div",_e,[de,o(I)?(y(),w("p",ue,[i(v,{size:"md",icon:"cautionCircle","icon-color":"const-red-600"}),n(" SNS認証でエラーが発生しました ")])):L("",!0)]),e("div",pe,[e("div",ge,[e("div",me,[e("button",{class:"_relative _flex _h-44 _flex-row _items-center _rounded-6 _bg-[#1A77F2] _text-md _font-bold _text-white _outline _outline-blue-200 hover:_bg-[#2A6DDC] focus-visible:_outline-2",onClick:$},[fe,n(" "+c(t.$t("Login with Facebook")),1)]),i(P,{variant:"outline",class:"_relative _outline _outline-blue-200 focus-visible:_outline-2",loading:o(k),onClick:A},{default:x(()=>[he,n(" "+c(t.$t("Login with Google")),1)]),_:1},8,["loading"])]),e("form",{class:"_flex _w-full _flex-col _items-stretch _gap-16",onSubmit:G(N,["prevent"])},[e("label",ve,[e("span",null,c(t.$t("Login: Email address")),1),V(e("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>o(l).email=p),name:"email",type:"email",class:S(["_h-44 _rounded-6 _border-1 _border-solid _border-const-gray-100 _bg-const-white _px-16 _outline _outline-blue-200 hover:_bg-gray-50 focus:_bg-white focus:_outline-2",[o(u)&&"_border-const-red-500 _bg-const-red-50"]]),placeholder:t.$t("Login: Enter your email address")},null,10,be),[[z,o(l).email]])]),e("label",we,[e("span",null,c(t.$t("Login: Password")),1),V(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>o(l).password=p),name:"password",type:o(_)?"text":"password",placeholder:t.$t("Login: Enter your password"),class:S(["_h-44 _w-full _rounded-6 _border-1 _border-solid _border-const-gray-100 _bg-const-white _px-16 _outline _outline-blue-200 hover:_bg-gray-50 focus:_bg-white focus:_outline-2",[o(u)&&"_border-const-red-500 _bg-const-red-50"]])},null,10,xe),[[O,o(l).password]]),i(D,{"is-password-visible":o(_),class:"_absolute _right-12 _top-36",onClick:s[2]||(s[2]=p=>_.value=!o(_))},null,8,["is-password-visible"])]),i(P,{size:"md","button-type":"submit",loading:o(d),class:"_outline _outline-blue-200 focus-visible:_outline-2"},{default:x(()=>[n(" メールアドレスでログイン ")]),_:1},8,["loading"]),o(u)?(y(),w("p",ye,"メールアドレスまたはパスワードが異なります")):L("",!0)],32)]),i(Y,{class:"_w-full"}),e("a",Ce,c(t.$t("Login: Forgot password?")),1)])])])])}}});const De=se(F,[["__scopeId","data-v-b2c8c857"]]);F.__docgenInfo={exportName:"default",displayName:"PageSsoLoginFigma",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/SsoLogin/PageSsoLoginFigma.vue"]};export{De as default};
