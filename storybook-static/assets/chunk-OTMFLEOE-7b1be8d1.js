import{h as T,c as N,i as U,a as b,r as f}from"./vue.esm-bundler-33967e91.js";var _=(e,r)=>{let{id:t,component:a}=r;if(!a)throw new Error(`Unable to render story ${t} as the component annotation is missing from the default export`);return()=>T(a,e,O(e,r))},m=e=>{globalThis.PLUGINS_SETUP_FUNCTIONS??=new Set,globalThis.PLUGINS_SETUP_FUNCTIONS.add(e)},h=async(e,r)=>{globalThis&&globalThis.PLUGINS_SETUP_FUNCTIONS&&await Promise.all([...globalThis.PLUGINS_SETUP_FUNCTIONS].map(t=>t(e,r)))},l=new Map;async function w({storyFn:e,forceRemount:r,showMain:t,showException:a,storyContext:i,id:u},s){let n=l.get(s);if(n&&!r){let o=e(),g=S(o,i);return P(n.reactiveArgs,g),()=>{c(n.vueApp,s)}}n&&r&&c(n.vueApp,s);let p=N({setup(){i.args=f(i.args);let o=e(),g=S(o,i),d={vueApp:p,reactiveArgs:f(g)};return l.set(s,d),()=>T(o)}});return p.config.errorHandler=o=>a(o),await h(p,i),p.mount(s),t(),()=>{c(p,s)}}function O(e,r){let{argTypes:t}=r,a=Object.entries(e).filter(([i])=>t[i]?.table?.category==="slots").map(([i,u])=>[i,typeof u=="function"?u:()=>u]);return Object.fromEntries(a)}function S(e,r){return e.props&&U(e)?e.props:r.args}function P(e,r){if(Object.keys(r).length===0)return;let t=b(e)?e:f(e);Object.keys(t).forEach(a=>{a in r||delete t[a]}),Object.assign(t,r)}function c(e,r){e?.unmount(),l.has(r)&&l.delete(r)}export{w as a,_ as r,m as s};
