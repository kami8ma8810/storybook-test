import{_ as Y}from"./iframe-4066d2cc.js";import{f as q,ah as W,x as z,e as k,b as K,G as a,H as o,A as e,K as u,J as l,U as c,N as v,S as p,F as f,Z as U,W as M,I as D,P as J}from"./vue.esm-bundler-33967e91.js";import{s as Z,cr as Q,dt as X,dv as O}from"./ModalPvLimitAlertView-cb9178ae.js";import{i as ee,u as se,a as te,B as G,s as ae}from"./Editor-e2ebb077.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import"../sb-preview/runtime.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";const ne={key:0,class:"field"},ie={class:"label"},le={class:"value"},re={class:"pin-group"},ue={key:1,class:"field isObject"},de={class:"label"},ve={key:0,class:"item-group"},pe=["onClick"],ce={key:1,class:"pin-group isObject"},me={class:"label"},ye={key:0,class:"value"},_e={key:1,class:"empty-text"},ge={key:2,class:"_text-[11px] _font-medium _text-gray-400"},he={key:1,class:"value-boolean"},ke={key:2,class:"value-color"},fe={key:0,class:"_text-[11px] _font-medium _text-gray-400"},be={key:1,class:"_flex _items-center _gap-8"},Ce={class:"color-square _overflow-hidden _rounded-4"},xe={class:"_whitespace-nowrap"},Ne={key:0,class:"_whitespace-nowrap _text-[11px]"},$e=["src"],we={key:1,class:"_text-[11px] _font-medium _text-gray-400"},Se={key:4,class:"value-number"},Ae={key:1,class:"_text-[11px] _font-medium _text-gray-400"},Pe={key:5,class:"value"},De={key:0,class:"_text-[11px] _font-medium _text-gray-400"},Ge={key:6,class:"pin-group"},m="No Data",T=q({__name:"GuiCmsNodeField",props:{keyChain:{},nodeValue:{}},emits:["hover-pin","select-key"],setup(B){const H=W(()=>Y(()=>import("./Editor-e2ebb077.js").then(n=>n.h),["./Editor-e2ebb077.js","./vue.esm-bundler-33967e91.js","./ModalPvLimitAlertView-cb9178ae.js","./vue-i18n.cjs-bd62fc86.js","./_commonjsHelpers-042e6b4d.js","./ModalUpgradeRequired-a455cfd7.js","./BasicModal-000dc82b.js","./_plugin-vue_export-helper-c27b6911.js","./BasicModal-276b42ea.css","./PfButton-db6d6722.js","./PfIconContext-bd54ca9b.js","./ModalUpgradeRequired-1a015d77.css","./lodash-bf1bac5c.js","./_commonjs-dynamic-modules-302442b1.js","./iframe-4066d2cc.js","./PfIcon-bb1c3c10.js","./mapValues-a1d744f5.js","./ModalPvLimitAlertView-c58a5858.css","./SelectSwitch-b6107958.js","./tiptap-extension-paragraph.esm-72054cce.js","./SelectSwitch-74fee1e2.css","./draggable-203bb716.js","./ApiIcon-4990672b.js","./ApiIcon-f6bf5922.css","./useSearch-b8b0ad67.js","./Editor-f05e9ae1.css"],import.meta.url)),F=B,{setDraggingKey:V,setDraggingKeyOrigin:j,draggingKey:b,setDraggingCmsContent:E}=ee(),{keyChain:C,nodeValue:s}=z(F),{bindKeyMap:x,selectedBindKeyMap:N}=se(),I=te(),{hoveredProperty:$}=Z(I),L=k(()=>s.value?.type==="ref[]"?Number(s.value.value.length):0),y=K(-1),R=n=>{if(n===y.value){y.value=-1;return}const t=L.value;y.value=(n+t)%t},d=K(!1),i=k(()=>{let n="";for(const t of C.value){if(n.length===0){n+=t;continue}const r=`${t}`.match(/^\d+$/);r&&r.length===1?n+=`[${t}]`:n+=`.${t}`}return n.endsWith("_meta")?`${n}.publishedAt`:n}),w=k(()=>N.value.has(i.value)||N.value.has(i.value.replace(".value",""))),_=k(()=>s.value?.type!=="ref"&&s.value?.type!=="ref[]"),S=n=>{if(n.button!==0)return;const{x:t,y:r}=n.currentTarget.getBoundingClientRect();V(i.value),E({fieldType:F.nodeValue,fullKey:i.value}),j({x:t+7.5,y:r+7.5})},A=()=>{i.value&&($.value=i.value)},P=()=>{$.value=""};return(n,t)=>(a(),o("div",{class:"GuiCmsNodeField",onMouseenter:t[6]||(t[6]=r=>n.$emit("hover-pin",i.value)),onMouseleave:t[7]||(t[7]=r=>n.$emit("hover-pin","")),onClick:t[8]||(t[8]=M(()=>{},["stop"]))},[e(s).type==="meta"?(a(),o("div",ne,[u("div",ie,l(n.$t("CMS:publishedAt")),1),u("div",le,l(e(s).value.publishedAt?e(Q).utc(e(s).value.publishedAt).local().format("YYYY/M/D HH:mm"):n.$t("DataPanel:Not published")),1),u("div",re,[c(G,{"is-bind":e(x).has(i.value),"is-selected":w.value,"is-dragging":e(b)===i.value,"key-name":`${i.value}`,onMousedown:S,onHover:A,onLeave:P},null,8,["is-bind","is-selected","is-dragging","key-name"])])])):e(s).type==="ref[]"||e(s).type==="ref"?(a(),o("div",ue,[u("div",de,l(e(s).label),1),u("div",{class:v([{isOpen:d.value},"arrow"]),onClick:t[0]||(t[0]=r=>d.value=!d.value)},null,2),d.value?(a(),o("div",ve,[e(s).type==="ref"?(a(),o("div",{key:0,class:v([{isOpen:d.value},"object-item"])},[c(e(H),{"is-small":!d.value,"key-chain":e(C),"show-pin":_.value,value:e(s).value,onHoverPin:t[1]||(t[1]=r=>n.$emit("hover-pin",r)),onSelectKey:t[2]||(t[2]=r=>n.$emit("select-key",r))},null,8,["is-small","key-chain","show-pin","value"])],2)):p("",!0),e(s).type==="ref[]"?(a(!0),o(f,{key:1},U(e(s).value,(r,g)=>(a(),o("div",{key:e(s).key+String(g),class:v([{isOpen:d.value},"array-item"]),onClick:M(h=>R(g),["stop"])},[c(e(H),{"is-small":y.value!==g,"key-chain":[...e(C),`${g}`],"show-pin":_.value,value:r,onHoverPin:t[3]||(t[3]=h=>n.$emit("hover-pin",h)),onSelectKey:t[4]||(t[4]=h=>n.$emit("select-key",h))},null,8,["is-small","key-chain","show-pin","value"])],10,pe))),128)):p("",!0)])):p("",!0),_.value?(a(),o("div",ce,[c(G,{"is-bind":e(x).has(i.value),"is-selected":w.value,"is-dragging":e(b)===i.value,"key-name":i.value,onMousedown:S,onHover:A,onLeave:P},null,8,["is-bind","is-selected","is-dragging","key-name"])])):p("",!0)])):(a(),o("div",{key:e(s).key,class:v([{isBind:e($)===i.value,isSelected:e(N).has(i.value)},"field"]),onClick:t[5]||(t[5]=r=>d.value=!d.value)},[u("div",me,l(e(s).label),1),e(s).type==="text"?(a(),o("div",ye,[e(s).value?(a(),o(f,{key:0},[D(l(e(s).value),1)],64)):e(s).value===""?(a(),o("div",_e)):(a(),o("span",ge,l(m)))])):e(s).type==="boolean"?(a(),o("div",he,[u("div",{class:v([{on:e(s).value},"toggle"])},null,2),u("span",{class:v({on:e(s).value})},l(e(s).value),3)])):e(s).type==="color"?(a(),o("div",ke,[e(s).value==="transparent"?(a(),o("span",fe,l(m))):(a(),o("div",be,[u("div",Ce,[u("span",{style:J({backgroundColor:e(s).value}),class:"_block _h-full _w-full _rounded-4"},null,4)]),u("span",xe,l(e(X)(e(s).value)),1),e(O)(e(s).value)?(a(),o("span",Ne,l(e(O)(e(s).value)),1)):p("",!0)]))])):e(s).type==="image"?(a(),o("div",{key:3,class:v([{isOpen:d.value},"value-image"])},[e(s).value?(a(),o("img",{key:0,alt:"cms image field display",src:e(s).value},null,8,$e)):(a(),o("span",we,l(m)))],2)):e(s).type==="number"?(a(),o("div",Se,[typeof e(s).value=="number"?(a(),o(f,{key:0},[D(l(e(s).value),1)],64)):(a(),o("span",Ae,l(m)))])):e(s).type==="richText"?(a(),o("div",Pe,[e(s).value==null?(a(),o("span",De,l(m))):(a(),o(f,{key:1},[D(l(e(ae)(e(s).value)),1)],64))])):p("",!0),_.value?(a(),o("div",Ge,[c(G,{"is-bind":e(x).has(i.value),"is-selected":w.value,"key-name":i.value,"is-dragging":e(b)===i.value,onMousedown:S,onHover:A,onLeave:P},null,8,["is-bind","is-selected","key-name","is-dragging"])])):p("",!0)],2))],32))}});const Xe=oe(T,[["__scopeId","data-v-ef553a71"]]);T.__docgenInfo={exportName:"default",displayName:"GuiCmsNodeField",description:"",tags:{},props:[{name:"keyChain",required:!0,type:{name:"Array",elements:[{name:"string"}]}},{name:"nodeValue",required:!0,type:{name:"GuiCmsNodeFieldType"}}],events:[{name:"hover-pin",type:{names:["string"]}},{name:"select-key",type:{names:["string"]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/common/DefsEditor/Gui/GuiCmsNode/GuiCmsNodeField.vue"]};export{Xe as default};
