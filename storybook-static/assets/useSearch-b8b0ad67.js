import{f as L,b as V,e as f,t as b,p as Y,o as G,w as H,h as J,F as Z,d as q,j as z,n as F,g as Q}from"./vue.esm-bundler-33967e91.js";import{a as k,b as $,l as K,o as I,K as ee,H as j,T as W,t as _,N as U,p as te}from"./BasicModal-000dc82b.js";import{cU as oe,cV as ae,cW as h,cX as le,cY as ne,cZ as ue,c_ as ie,c$ as re,d0 as se,d1 as ve,d2 as de,d3 as T}from"./ModalPvLimitAlertView-cb9178ae.js";function pe(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ce(){return/Android/gi.test(window.navigator.userAgent)}function be(){return pe()||ce()}function fe(o,y){return o===y}var me=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(me||{}),xe=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(xe||{}),ge=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(ge||{});let X=Symbol("ComboboxContext");function M(o){let y=Q(X,null);if(y===null){let S=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,M),S}return y}let Re=L({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>fe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:y,attrs:S,emit:D}){let e=V(1),t=V(null),d=V(null),R=V(null),n=V(null),p=V({static:!1,hold:!1}),m=V([]),g=V(null),P=V(1),w=V(!1);function A(l=v=>v){let v=g.value!==null?m.value[g.value]:null,c=de(l(m.value.slice()),x=>I(x.dataRef.domRef)),i=v?c.indexOf(v):null;return i===-1&&(i=null),{options:c,activeOptionIndex:i}}let a=f(()=>o.multiple?1:0),u=f(()=>o.nullable),[s,C]=oe(f(()=>o.modelValue===void 0?k(a.value,{[1]:[],[0]:void 0}):o.modelValue),l=>D("update:modelValue",l),f(()=>o.defaultValue)),r={comboboxState:e,value:s,mode:a,compare(l,v){if(typeof o.by=="string"){let c=o.by;return l?.[c]===v?.[c]}return o.by(l,v)},defaultValue:f(()=>o.defaultValue),nullable:u,inputRef:d,labelRef:t,buttonRef:R,optionsRef:n,disabled:f(()=>o.disabled),options:m,change(l){C(l)},activeOptionIndex:f(()=>{if(w.value&&g.value===null&&m.value.length>0){let l=m.value.findIndex(v=>!v.dataRef.disabled);if(l!==-1)return l}return g.value}),activationTrigger:P,optionsPropsRef:p,closeCombobox(){w.value=!1,!o.disabled&&e.value!==1&&(e.value=1,g.value=null)},openCombobox(){if(w.value=!0,o.disabled||e.value===0)return;let l=m.value.findIndex(v=>{let c=b(v.dataRef.value);return k(a.value,{[0]:()=>r.compare(b(r.value.value),b(c)),[1]:()=>b(r.value.value).some(i=>r.compare(b(i),b(c)))})});l!==-1&&(g.value=l),e.value=0},goToOption(l,v,c){if(w.value=!1,o.disabled||n.value&&!p.value.static&&e.value===1)return;let i=A();if(i.activeOptionIndex===null){let O=i.options.findIndex(N=>!N.dataRef.disabled);O!==-1&&(i.activeOptionIndex=O)}let x=ae(l===h.Specific?{focus:h.Specific,id:v}:{focus:l},{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:O=>O.id,resolveDisabled:O=>O.dataRef.disabled});g.value=x,P.value=c??1,m.value=i.options},selectOption(l){let v=m.value.find(i=>i.id===l);if(!v)return;let{dataRef:c}=v;C(k(a.value,{[0]:()=>c.value,[1]:()=>{let i=b(r.value.value).slice(),x=b(c.value),O=i.findIndex(N=>r.compare(x,b(N)));return O===-1?i.push(x):i.splice(O,1),i}}))},selectActiveOption(){if(r.activeOptionIndex.value===null)return;let{dataRef:l,id:v}=m.value[r.activeOptionIndex.value];C(k(a.value,{[0]:()=>l.value,[1]:()=>{let c=b(r.value.value).slice(),i=b(l.value),x=c.findIndex(O=>r.compare(i,b(O)));return x===-1?c.push(i):c.splice(x,1),c}})),r.goToOption(h.Specific,v)},registerOption(l,v){let c={id:l,dataRef:v},i=A(x=>[...x,c]);if(g.value===null){let x=v.value.value;k(a.value,{[0]:()=>r.compare(b(r.value.value),b(x)),[1]:()=>b(r.value.value).some(O=>r.compare(b(O),b(x)))})&&(i.activeOptionIndex=i.options.indexOf(c))}m.value=i.options,g.value=i.activeOptionIndex,P.value=1},unregisterOption(l){var v;r.activeOptionIndex.value!==null&&((v=r.options.value[r.activeOptionIndex.value])==null?void 0:v.id)===l&&(w.value=!0);let c=A(i=>{let x=i.findIndex(O=>O.id===l);return x!==-1&&i.splice(x,1),i});m.value=c.options,g.value=c.activeOptionIndex,P.value=1}};le([d,R,n],()=>r.closeCombobox(),f(()=>e.value===0)),Y(X,r),$(f(()=>k(e.value,{[0]:K.Open,[1]:K.Closed})));let B=f(()=>r.activeOptionIndex.value===null?null:m.value[r.activeOptionIndex.value].dataRef.value),E=f(()=>{var l;return(l=I(d))==null?void 0:l.closest("form")});return G(()=>{H([E],()=>{if(!E.value||o.defaultValue===void 0)return;function l(){r.change(o.defaultValue)}return E.value.addEventListener("reset",l),()=>{var v;(v=E.value)==null||v.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{name:l,disabled:v,form:c,...i}=o,x={open:e.value===0,disabled:v,activeIndex:r.activeOptionIndex.value,activeOption:B.value,value:s.value};return J(Z,[...l!=null&&s.value!=null?ne({[l]:s.value}).map(([O,N])=>J(ue,ee({features:ie.Hidden,key:O,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:c,name:O,value:N}))):[],j({theirProps:{...S,...W(i,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:x,slots:y,attrs:S,name:"Combobox"})])}}}),he=L({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${_()}`}},setup(o,{attrs:y,slots:S,expose:D}){let e=M("ComboboxButton");D({el:e.buttonRef,$el:e.buttonRef});function t(n){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(n.preventDefault(),e.openCombobox()),F(()=>{var p;return(p=I(e.inputRef))==null?void 0:p.focus({preventScroll:!0})}))}function d(n){switch(n.key){case T.ArrowDown:n.preventDefault(),n.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),F(()=>{var p;return(p=e.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return;case T.ArrowUp:n.preventDefault(),n.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),F(()=>{e.value.value||e.goToOption(h.Last)})),F(()=>{var p;return(p=e.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return;case T.Escape:if(e.comboboxState.value!==0)return;n.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&n.stopPropagation(),e.closeCombobox(),F(()=>{var p;return(p=e.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return}}let R=re(f(()=>({as:o.as,type:y.type})),e.buttonRef);return()=>{var n,p;let m={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:g,...P}=o,w={ref:e.buttonRef,id:g,type:R.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(n=I(e.optionsRef))==null?void 0:n.id,"aria-expanded":e.disabled.value?void 0:e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(p=I(e.labelRef))==null?void 0:p.id,g].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onClick:t};return j({ourProps:w,theirProps:P,slot:m,attrs:y,slots:S,name:"ComboboxButton"})}}}),Ie=L({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${_()}`}},emits:{change:o=>!0},setup(o,{emit:y,attrs:S,slots:D,expose:e}){let t=M("ComboboxInput"),d={value:!1};e({el:t.inputRef,$el:t.inputRef});let R=f(()=>{var a;let u=t.value.value;return I(t.inputRef)?typeof o.displayValue<"u"&&u!==void 0?(a=o.displayValue(u))!=null?a:"":typeof u=="string"?u:"":""});G(()=>{H([R,t.comboboxState],([a,u],[s,C])=>{if(d.value)return;let r=I(t.inputRef);r&&(C===0&&u===1||a!==s)&&(r.value=a)},{immediate:!0}),H([t.comboboxState],([a],[u])=>{if(a===0&&u===1){let s=I(t.inputRef);if(!s)return;let C=s.value,{selectionStart:r,selectionEnd:B,selectionDirection:E}=s;s.value="",s.value=C,E!==null?s.setSelectionRange(r,B,E):s.setSelectionRange(r,B)}})});let n=V(!1);function p(){n.value=!0}function m(){setTimeout(()=>{n.value=!1})}function g(a){switch(d.value=!0,a.key){case T.Backspace:case T.Delete:if(t.mode.value!==0||!t.nullable.value)return;let u=a.currentTarget;requestAnimationFrame(()=>{if(u.value===""){t.change(null);let s=I(t.optionsRef);s&&(s.scrollTop=0),t.goToOption(h.Nothing)}});break;case T.Enter:if(d.value=!1,t.comboboxState.value!==0||n.value)return;if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case T.ArrowDown:return d.value=!1,a.preventDefault(),a.stopPropagation(),k(t.comboboxState.value,{[0]:()=>t.goToOption(h.Next),[1]:()=>t.openCombobox()});case T.ArrowUp:return d.value=!1,a.preventDefault(),a.stopPropagation(),k(t.comboboxState.value,{[0]:()=>t.goToOption(h.Previous),[1]:()=>{t.openCombobox(),F(()=>{t.value.value||t.goToOption(h.Last)})}});case T.Home:if(a.shiftKey)break;return d.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(h.First);case T.PageUp:return d.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(h.First);case T.End:if(a.shiftKey)break;return d.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(h.Last);case T.PageDown:return d.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(h.Last);case T.Escape:if(d.value=!1,t.comboboxState.value!==0)return;a.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&a.stopPropagation(),t.closeCombobox();break;case T.Tab:if(d.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function P(a){t.openCombobox(),y("change",a)}function w(){d.value=!1}let A=f(()=>{var a,u,s,C;return(C=(s=(u=o.defaultValue)!=null?u:t.defaultValue.value!==void 0?(a=o.displayValue)==null?void 0:a.call(o,t.defaultValue.value):null)!=null?s:t.defaultValue.value)!=null?C:""});return()=>{var a,u,s,C,r,B;let E={open:t.comboboxState.value===0},{id:l,displayValue:v,onChange:c,...i}=o,x={"aria-controls":(a=t.optionsRef.value)==null?void 0:a.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(u=t.options.value[t.activeOptionIndex.value])==null?void 0:u.id,"aria-labelledby":(r=(s=I(t.labelRef))==null?void 0:s.id)!=null?r:(C=I(t.buttonRef))==null?void 0:C.id,"aria-autocomplete":"list",id:l,onCompositionstart:p,onCompositionend:m,onKeydown:g,onInput:P,onBlur:w,role:"combobox",type:(B=S.type)!=null?B:"text",tabIndex:0,ref:t.inputRef,defaultValue:A.value,disabled:t.disabled.value===!0?!0:void 0};return j({ourProps:x,theirProps:i,slot:E,attrs:S,slots:D,features:U.RenderStrategy|U.Static,name:"ComboboxInput"})}}}),Ce=L({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:y,slots:S,expose:D}){let e=M("ComboboxOptions"),t=`headlessui-combobox-options-${_()}`;D({el:e.optionsRef,$el:e.optionsRef}),q(()=>{e.optionsPropsRef.value.static=o.static}),q(()=>{e.optionsPropsRef.value.hold=o.hold});let d=te(),R=f(()=>d!==null?(d.value&K.Open)===K.Open:e.comboboxState.value===0);return se({container:f(()=>I(e.optionsRef)),enabled:f(()=>e.comboboxState.value===0),accept(n){return n.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}}),()=>{var n,p,m;let g={open:e.comboboxState.value===0},P={"aria-labelledby":(m=(n=I(e.labelRef))==null?void 0:n.id)!=null?m:(p=I(e.buttonRef))==null?void 0:p.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},w=W(o,["hold"]);return j({ourProps:P,theirProps:w,slot:g,attrs:y,slots:S,features:U.RenderStrategy|U.Static,visible:R.value,name:"ComboboxOptions"})}}}),Pe=L({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(o,{slots:y,attrs:S,expose:D}){let e=M("ComboboxOption"),t=`headlessui-combobox-option-${_()}`,d=V(null);D({el:d,$el:d});let R=f(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),n=f(()=>k(e.mode.value,{[0]:()=>e.compare(b(e.value.value),b(o.value)),[1]:()=>b(e.value.value).some(u=>e.compare(b(u),b(o.value)))})),p=f(()=>({disabled:o.disabled,value:o.value,domRef:d}));G(()=>e.registerOption(t,p)),z(()=>e.unregisterOption(t)),q(()=>{e.comboboxState.value===0&&R.value&&e.activationTrigger.value!==0&&F(()=>{var u,s;return(s=(u=I(d))==null?void 0:u.scrollIntoView)==null?void 0:s.call(u,{block:"nearest"})})});function m(u){if(o.disabled)return u.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),be()||requestAnimationFrame(()=>{var s;return(s=I(e.inputRef))==null?void 0:s.focus()})}function g(){if(o.disabled)return e.goToOption(h.Nothing);e.goToOption(h.Specific,t)}let P=ve();function w(u){P.update(u)}function A(u){P.wasMoved(u)&&(o.disabled||R.value||e.goToOption(h.Specific,t,0))}function a(u){P.wasMoved(u)&&(o.disabled||R.value&&(e.optionsPropsRef.value.hold||e.goToOption(h.Nothing)))}return()=>{let{disabled:u}=o,s={active:R.value,selected:n.value,disabled:u},C={id:t,ref:d,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":n.value,disabled:void 0,onClick:m,onFocus:g,onPointerenter:w,onMouseenter:w,onPointermove:A,onMousemove:A,onPointerleave:a,onMouseleave:a};return j({ourProps:C,theirProps:o,slot:s,attrs:S,slots:y,name:"ComboboxOption"})}}});const we=(o,y)=>{const S=V(""),D=V(0),e=R=>{const n=t.value.length;D.value=(R+n)%n},t=f(()=>{const R=new RegExp(S.value.split("").join(".*"),"i");return o.filter(n=>[n[y]].some(p=>p!=null&&R.test(String(p)))).filter((n,p)=>p<=100)}),d=f(()=>t.value.length?t.value[D.value]:null);return{filteredList:t,searchVal:S,select:e,selectedItem:d,selectedIndex:D}};export{Ie as $,he as K,Re as N,Ce as U,Pe as _,pe as t,we as u};
