import{_ as B}from"./iframe-4066d2cc.js";import{f as I,ah as V,x as O,e as i,b,O as m,G as n,H as l,K as v,J as j,N as C,U as _,Q as K,L as S,M as A}from"./vue.esm-bundler-33967e91.js";import{N as D}from"./NodeCardBackground-e1c3a5e9.js";import{V as H}from"./ValueInput-7a78c064.js";import{b as $}from"./Editor-e2ebb077.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"../sb-preview/runtime.js";import"./ModalPvLimitAlertView-cb9178ae.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";const y=I({name:"NodeCardObjectKey",props:{node:{type:Object,required:!0}},components:{ValueInput:H,NodeCardBackground:D,NodeHandle:V(()=>B(()=>import("./Editor-e2ebb077.js").then(e=>e.k),["./Editor-e2ebb077.js","./vue.esm-bundler-33967e91.js","./ModalPvLimitAlertView-cb9178ae.js","./vue-i18n.cjs-bd62fc86.js","./_commonjsHelpers-042e6b4d.js","./ModalUpgradeRequired-a455cfd7.js","./BasicModal-000dc82b.js","./_plugin-vue_export-helper-c27b6911.js","./BasicModal-276b42ea.css","./PfButton-db6d6722.js","./PfIconContext-bd54ca9b.js","./ModalUpgradeRequired-1a015d77.css","./lodash-bf1bac5c.js","./_commonjs-dynamic-modules-302442b1.js","./iframe-4066d2cc.js","./PfIcon-bb1c3c10.js","./mapValues-a1d744f5.js","./ModalPvLimitAlertView-c58a5858.css","./SelectSwitch-b6107958.js","./tiptap-extension-paragraph.esm-72054cce.js","./SelectSwitch-74fee1e2.css","./draggable-203bb716.js","./ApiIcon-4990672b.js","./ApiIcon-f6bf5922.css","./useSearch-b8b0ad67.js","./Editor-f05e9ae1.css"],import.meta.url))},setup(e){const{node:o}=O(e),{findNode:f,selectedNodeId:p,draggingNode:r,updateNode:s,findAncestorIds:g}=$(),d=i(()=>o.value.args.map(t=>f(t))),u=i(()=>r.value?.id===o.value.id?!1:o.value.id===p.value||o.value.args.includes(p.value)),a=t=>{s(t,{position:null}),s(o.value.id,{args:[t]})},k=i(()=>d.value[0]),h=i(()=>{if(r.value)return r.value.id!==o.value.id}),c=b(null),N=b(!1);return{args:d,canSelectChildren:u,updateArg:a,argNode:k,isDroppable:h,onChangeValue:t=>{const E=t.target.value;s(o.value.id,{value:E}),t.target.blur()},startEdit:()=>{N.value=!0,requestAnimationFrame(()=>{c.value.focus(),c.value.select()})},isEditing:N,inputRef:c}}});const U=e=>(S("data-v-6bb94183"),e=e(),A(),e),q={class:"self"},w=["value"],F=U(()=>v("span",{class:"colon-label"},":",-1)),G={key:0,class:"node-frame"};function L(e,o,f,p,r,s){const g=m("NodeHandle"),d=m("ValueInput"),u=m("NodeCardBackground");return n(),l("div",{class:C(["NodeCardObjectKey",{canSelectChildren:e.canSelectChildren}])},[v("div",q,[e.isEditing?(n(),l("input",{key:0,ref:"inputRef",type:"text",class:"key-input",value:e.node.value,onChange:o[0]||(o[0]=(...a)=>e.onChangeValue&&e.onChangeValue(...a)),onBlur:o[1]||(o[1]=a=>e.isEditing=!1)},null,40,w)):(n(),l("span",{key:1,class:"key-label",onDblclick:o[2]||(o[2]=(...a)=>e.startEdit&&e.startEdit(...a))},j(e.node.value),33)),F,v("div",{class:C(["args-container",{hasChild:e.argNode,isDroppable:e.isDroppable}])},[e.argNode?(n(),l("div",G,[_(g,{node:e.argNode},null,8,["node"])])):(n(),K(d,{key:1,node:e.node,"allow-type":"string",onUpdate:e.updateArg},null,8,["node","onUpdate"]))],2)]),_(u,{node:e.node},null,8,["node"])],2)}const ve=R(y,[["render",L],["__scopeId","data-v-6bb94183"]]);y.__docgenInfo={displayName:"NodeCardObjectKey",exportName:"default",description:"",tags:{},props:[{name:"node",type:{name:"BlueprintNode"},required:!0}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/BlueprintEditor/NodeCard/NodeCardObjectKey.vue"]};export{ve as default};
