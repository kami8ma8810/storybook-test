import{f as y,Q as S,A as i,G as l,b,e as N,O as m,H as u,K as o,_ as z,ae as U,q as G,J as v,U as a,R as d,S as B,F as x,I as F,L as H,M as q,Z as K,N as C,V as Q,o as X}from"./vue.esm-bundler-33967e91.js";import{M as Z}from"./ModalProjectListPvLimitAlertView-5e10dd61.js";import{ev as A,ew as w,y as s,ac as W,ex as Y}from"./ModalPvLimitAlertView-cb9178ae.js";import{u as T}from"./BasicModal-000dc82b.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{u as ee}from"./ModalUpgradeRequired-a455cfd7.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./PfIcon-bb1c3c10.js";import"./PfIconContext-bd54ca9b.js";import"./PfButton-db6d6722.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./iframe-4066d2cc.js";import"../sb-preview/runtime.js";import"./mapValues-a1d744f5.js";const te={data:[{projectId:"exampleProjectId1",projectName:"Free 制限なし",pvCount:100,currentPlan:{plan:A.Free,interval:w.Infinite,currency:s.Jpy,price:0,pvLimit:1e4,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId2",projectName:"Free almost limit",pvCount:9e3,currentPlan:{plan:A.Free,interval:w.Infinite,currency:s.Jpy,price:0,pvLimit:1e4,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId3",projectName:"Free over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit",pvCount:11e3,currentPlan:{plan:A.Free,interval:w.Infinite,currency:s.Jpy,price:0,pvLimit:1e4,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId4",projectName:"Starter 制限なし",pvCount:100,currentPlan:{plan:"v3_starter",interval:"month",currency:s.Jpy,price:0,pvLimit:5e4,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId5",projectName:"Starter almost limit",pvCount:49e3,currentPlan:{plan:"v3_starter",interval:"month",currency:s.Jpy,price:0,pvLimit:5e4,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId6",projectName:"Starter over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit",pvCount:51e3,currentPlan:{plan:"v3_starter",interval:"month",currency:s.Jpy,price:0,pvLimit:5e4,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId7",projectName:"CMS 制限なし",pvCount:100,currentPlan:{plan:"v3_cms",interval:"month",currency:s.Jpy,price:0,pvLimit:1e5,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId8",projectName:"CMS almost limit",pvCount:9e4,currentPlan:{plan:"v3_cms",interval:"month",currency:s.Jpy,price:0,pvLimit:1e5,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId9",projectName:"CMS over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit",pvCount:12e4,currentPlan:{plan:"v3_cms",interval:"month",currency:s.Jpy,price:0,pvLimit:1e5,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId10",projectName:"Business 制限なし",pvCount:100,currentPlan:{plan:"v3_business",interval:"month",currency:s.Jpy,price:0,pvLimit:1e6,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId11",projectName:"Business almost limit Business almost limit Business almost limit Business almost limit Business almost limit",pvCount:9e5,currentPlan:{plan:"v3_business",interval:"month",currency:s.Jpy,price:0,pvLimit:1e6,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}},{projectId:"exampleProjectId12",projectName:"Business over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit フリープラン over limit",pvCount:12e5,currentPlan:{plan:"v3_business",interval:"month",currency:s.Jpy,price:0,pvLimit:1e6,downgradeAt:null,discount:{couponAmount:0,prorationAmount:0}}}]};function oe(e){switch(e){case"free":return"Free";case"v3_starter":return"Starter";case"v3_cms":return"CMS";case"v3_business":return"Business";default:throw new Error(`Unrecognized plan name: ${e}`)}}const O=W("pvLimitAlertList",{state:()=>({almostLimitProjects:[],overLimitProjects:[],lastShownDate:localStorage.getItem("lastPvLimitAlertListShown")}),getters:{hasAlertList:e=>e.almostLimitProjects.length>0||e.overLimitProjects.length>0},actions:{async fetchProjectAlerts(){try{const e=te.data;console.log("projectData",e);const r=e.map(t=>({projectId:t.projectId??"",projectName:t.projectName??"",pvCount:t.pvCount??0,pvLimit:t.currentPlan?.pvLimit??0,plan:oe(t.currentPlan?.plan??"")}));this.almostLimitProjects=r.filter(t=>t.pvCount>t.pvLimit*.8&&t.pvCount<t.pvLimit),this.overLimitProjects=r.filter(t=>t.pvCount>t.pvLimit)}catch(e){console.error(e)}},shouldShowModalToday(){const e=new Date().toLocaleDateString();return this.lastShownDate!==e},updateLastShownDate(){const e=new Date().toLocaleDateString();this.lastShownDate=e,localStorage.setItem("lastPvLimitAlertListShown",e)}}}),M=y({__name:"ModalProjectListPvLimitAlert",setup(e){const r=O();return(t,n)=>(l(),S(Z,{"almost-limit-projects":i(r).almostLimitProjects,"over-limit-projects":i(r).overLimitProjects},null,8,["almost-limit-projects","over-limit-projects"]))}});M.__docgenInfo={exportName:"default",displayName:"ModalProjectListPvLimitAlert",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/ModalProjectListPvLimitAlert.vue"]};const D={almostLimitProjects:[{projectId:"almost1",projectName:"U-NEXT",plan:"Free"},{projectId:"almost2",projectName:"Hulu",plan:"Starter"},{projectId:"almost3",projectName:"Amazon Prime Video",plan:"CMS"},{projectId:"almost4",projectName:"Gyao!",plan:"Business"},{projectId:"almost5",projectName:"Disney+",plan:"Starter"},{projectId:"almost6",projectName:"dTV",plan:"Free"},{projectId:"almost7",projectName:"AbemaTV",plan:"CMS"},{projectId:"almost8",projectName:"FOD Premium",plan:"Business"},{projectId:"almost9",projectName:"TVer",plan:"Free"},{projectId:"almost10",projectName:"Netflix",plan:"Starter"}],overLimitProjects:[{projectId:"over2",projectName:"Microsoft",plan:"CMS"},{projectId:"over1",projectName:"Apple Inc.",plan:"Business"},{projectId:"over3",projectName:"Amazon",plan:"Starter"},{projectId:"over4",projectName:"Google",plan:"Free"},{projectId:"over5",projectName:"IBM",plan:"Business"},{projectId:"over6",projectName:"Tesla",plan:"CMS"},{projectId:"over7",projectName:"Samsung",plan:"Starter"},{projectId:"over8",projectName:"Intel",plan:"Free"},{projectId:"over9",projectName:"Accenture",plan:"Business"},{projectId:"over10",projectName:"NVIDIA",plan:"CMS"}]},f=e=>(H("data-v-4affd0f6"),e=e(),q(),e),re={key:0,class:"PageProjectsDebugger"},ne={class:"_mb-8"},se=f(()=>o("option",{value:"jpy"},"jpy",-1)),ae=f(()=>o("option",{value:"usd"},"usd",-1)),ie=[se,ae],ce={class:"_flex _flex-col _gap-4 _p-8"},le={class:"_flex _flex-col _gap-8 _p-8"},pe=f(()=>o("p",{class:"label-md-bold _text-black"},"PVスケールアップオプション モーダル",-1)),me={class:"_flex _flex-col _gap-8"},ue={class:"_flex _items-center _justify-between _gap-16"},de=f(()=>o("label",null,"80%超過データ数:",-1)),_e={class:"_flex _items-center _gap-4"},ve=["disabled"],je={class:"_d-inline-block _min-w-[2em] _text-center"},Pe=["disabled"],fe={class:"_flex _items-center _justify-between _gap-16"},he=f(()=>o("label",null,"100%超過データ数:",-1)),ge={class:"_flex _items-center _gap-4"},ye=["disabled"],Ie={class:"_d-inline-block _min-w-[2em] _text-center"},Le=["disabled"],J=y({__name:"PageProjectsDebugger",setup(e){const r=T(),t=b(s.Jpy),n=b(0),c=b(0),h=N(()=>D.almostLimitProjects.slice(0,n.value)),_=N(()=>D.overLimitProjects.slice(0,c.value)),j=()=>{n.value<10&&n.value++},P=()=>{n.value>0&&n.value--},p=()=>{c.value<10&&c.value++},I=()=>{c.value>0&&c.value--},g=()=>{r.push("ModalProjectListPvLimitAlert")};return(L,k)=>{const V=m("PfButton");return l(),u(x,null,[L.$store.state.studioEditor.isDebugMode?(l(),u("div",re,[o("div",ne,[z(o("select",{"onUpdate:modelValue":k[0]||(k[0]=R=>G(t)?t.value=R:null)},ie,512),[[U,i(t)]]),o("span",null,"Selected: "+v(i(t)),1)]),o("div",ce,[o("div",le,[pe,o("div",me,[o("div",ue,[de,o("div",_e,[o("button",{class:"_bg-gray-100 _py-8 _px-12 disabled:_pointer-events-none disabled:_opacity-20",disabled:i(n)<=0,onClick:P}," - ",8,ve),o("span",je,v(i(n)),1),o("button",{class:"_bg-gray-100 _py-8 _px-12 disabled:_pointer-events-none disabled:_opacity-20",disabled:i(n)>=10,onClick:j}," + ",8,Pe)])]),o("div",fe,[he,o("div",ge,[o("button",{class:"_bg-gray-100 _py-8 _px-12 disabled:_pointer-events-none disabled:_opacity-20",disabled:i(c)<=0,onClick:I}," - ",8,ye),o("span",Ie,v(i(c)),1),o("button",{class:"_bg-gray-100 _py-8 _px-12 disabled:_pointer-events-none disabled:_opacity-20",disabled:i(c)>=10,onClick:p}," + ",8,Le)])]),a(V,{variant:"primary",size:"sm",onClick:g},{default:d(()=>[F("ModalProjectListPvLimitAlert")]),_:1})])])])])):B("",!0),a(M,{"almost-limit-projects":i(h),"over-limit-projects":i(_)},null,8,["almost-limit-projects","over-limit-projects"])],64)}}});const be=$(J,[["__scopeId","data-v-4affd0f6"]]);J.__docgenInfo={exportName:"default",displayName:"PageProjectsDebugger",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageProjects/PageProjectsDebugger.vue"]};const E=y({name:"ProjectsMenuSelector",setup(e,r){const t=ee();return{heading:N(()=>t.name==="ProjectsActive"?"PROJECTLIST: projects":"PROJECTLIST: archive"),options:[{label:"PROJECTLIST: projects",pathname:"ProjectsActive"},{label:"PROJECTLIST: archive",pathname:"ProjectsArchive"}]}},data(){return{isOpen:!1}},watch:{$route:{handler(){this.isOpen=!1}}}});const Ae={class:"_heading-md"},we={key:0,class:"_absolute _z-dropdown _w-240 _select-none _rounded-6 _bg-white _py-8 _shadow-12"},Se=["href","onClick"],Ne={class:"label-md-normal"},Ce={key:1,style:{width:"16px"}};function xe(e,r,t,n,c,h){const _=m("PfIcon"),j=m("PfRow"),P=m("router-link");return l(),u("div",{class:C(["o-projects-menu-selector _relative _select-none _rounded-4",{isOpen:e.isOpen}]),onMouseover:r[0]||(r[0]=p=>e.isOpen=!0),onMouseleave:r[1]||(r[1]=p=>e.isOpen=!1)},[a(j,{align:"center",gap:"8",class:"_px-4 _py-2"},{default:d(()=>[o("p",Ae,v(e.$t(e.heading)),1),a(_,{icon:"chevronDown",size:"24","icon-color":"black"})]),_:1}),a(Q,{name:"vue-fade-dropdown"},{default:d(()=>[e.isOpen?(l(),u("ul",we,[(l(!0),u(x,null,K(e.options,p=>(l(),S(P,{key:p.label,to:{name:p.pathname}},{default:d(({href:I,isExactActive:g,navigate:L})=>[o("li",{class:C(["_w-full",[g&&"active"]])},[o("a",{href:I,class:"_flex _flex-row _items-center _justify-between _whitespace-nowrap _px-16 _py-12",onClick:L},[o("p",Ne,v(e.$t(p.label)),1),g?(l(),S(_,{key:0,icon:"check",size:"16","icon-color":"black"})):(l(),u("div",Ce))],8,Se)],2)]),_:2},1032,["to"]))),128))])):B("",!0)]),_:1})],34)}const Me=$(E,[["render",xe],["__scopeId","data-v-069797c7"]]);E.__docgenInfo={displayName:"ProjectsMenuSelector",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageProjects/ProjectsMenuSelector.vue"]};const ke=()=>{const e=O(),r=T();return{showPvAlertList:async()=>{if(e.shouldShowModalToday())try{if(await e.fetchProjectAlerts(),!e.hasAlertList)return;r.push("ModalProjectListPvLimitAlert"),e.updateLastShownDate()}catch(n){console.error(n)}}}},De=y({__name:"PageProjects",setup(e){const{pvOptionFeatureEnabled:r}=Y(),{showPvAlertList:t}=ke();return X(async()=>{r.value&&await t()}),(n,c)=>{const h=m("PfIcon"),_=m("PfButtonLink"),j=m("PfRow"),P=m("router-view"),p=m("PfColumn");return l(),u(x,null,[a(p,{gap:"24",flex:"1",class:"p-projects _px-40 _pt-28 _pb-40"},{default:d(()=>[a(j,{w:"full",justify:"between",align:"center"},{default:d(()=>[a(Me),a(_,{variant:"primary",size:"md",class:C([n.$route.name==="ProjectsActive"?"visible":"invisible"]),to:{name:"PageProjectTemplates"}},{default:d(()=>[a(h,{icon:"plus"}),F(" "+v(n.$t("PROJECTLIST: new project")),1)]),_:1},8,["class"])]),_:1}),a(P),a(M)]),_:1}),a(be)],64)}}});De.__docgenInfo={exportName:"default",displayName:"PageProjects",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageProjects/PageProjects.vue"]};export{De as default};
