import{_ as $}from"./iframe-4066d2cc.js";import{f as I,ah as O,x as D,b as U,O as g,a7 as H,G as t,H as d,K as i,U as _,Q as y,N as h,J as E,_ as R,F as S,Z as w,W as A,S as F}from"./vue.esm-bundler-33967e91.js";import{N as j}from"./NodeCardBackground-e1c3a5e9.js";import{V as q}from"./ValueInput-7a78c064.js";import{b as G}from"./Editor-e2ebb077.js";import{ar as u}from"./ModalPvLimitAlertView-cb9178ae.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"../sb-preview/runtime.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjsHelpers-042e6b4d.js";import"./vue-i18n.cjs-bd62fc86.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./PfIcon-bb1c3c10.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./mapValues-a1d744f5.js";const L=I({name:"NodeCardLogicalExpression",props:{node:{type:Object,required:!0}},components:{ValueInput:q,NodeCardBackground:j,NodeHandle:O(()=>$(()=>import("./Editor-e2ebb077.js").then(e=>e.k),["./Editor-e2ebb077.js","./vue.esm-bundler-33967e91.js","./ModalPvLimitAlertView-cb9178ae.js","./vue-i18n.cjs-bd62fc86.js","./_commonjsHelpers-042e6b4d.js","./ModalUpgradeRequired-a455cfd7.js","./BasicModal-000dc82b.js","./_plugin-vue_export-helper-c27b6911.js","./BasicModal-276b42ea.css","./PfButton-db6d6722.js","./PfIconContext-bd54ca9b.js","./ModalUpgradeRequired-1a015d77.css","./lodash-bf1bac5c.js","./_commonjs-dynamic-modules-302442b1.js","./iframe-4066d2cc.js","./PfIcon-bb1c3c10.js","./mapValues-a1d744f5.js","./ModalPvLimitAlertView-c58a5858.css","./SelectSwitch-b6107958.js","./tiptap-extension-paragraph.esm-72054cce.js","./SelectSwitch-74fee1e2.css","./draggable-203bb716.js","./ApiIcon-4990672b.js","./ApiIcon-f6bf5922.css","./useSearch-b8b0ad67.js","./Editor-f05e9ae1.css"],import.meta.url))},setup(e){const{node:o}=D(e),{findNode:C,selectedNodeId:v,draggingNode:r,updateNode:a}=G(),l=u(()=>o.value.args.map(n=>C(n))),m=u(()=>r.value?.id===o.value.id?!1:o.value.id===v.value||o.value.args.includes(v.value)),p=u(()=>l.value[0]),c=u(()=>l.value[1]),s=n=>{a(n,{position:null}),a(o.value.id,{args:[n,c.value?.id||null]})},k=n=>{a(n,{position:null}),a(o.value.id,{args:[p.value?.id||null,n]})},B=n=>{if(!r.value||r.value.id===o.value.id)return;a(r.value.id,{position:null});const N=n===0?[r.value.id,c.value?.id||null]:[p.value?.id||null,r.value.id];a(o.value.id,{args:N})},b=u(()=>[{value:"&&",label:"AND"},{value:"||",label:"OR"}]),V=u(()=>b.value.find(N=>N.value===o.value.value).label),M=n=>{f.value=!1,a(o.value.id,{value:n})},f=U(!1);return{args:l,canSelectChildren:m,onMouseup:B,leftNode:p,rightNode:c,isOpen:f,closeMenu:()=>{f.value=!1},operators:b,onChangeValue:M,updateLeft:s,updateRight:k,operatorLabel:V}}});const z={key:0,class:"node-frame"},J={class:"operator-label"},K={key:0,class:"menu"},Q={class:"operators"},T=["onClick"],W={class:"operator-label"},Z={key:0,class:"node-frame"};function X(e,o,C,v,r,a){const l=g("NodeHandle"),m=g("ValueInput"),p=g("NodeCardBackground"),c=H("click-outside");return t(),d("div",{class:h(["NodeCardLogicalExpression",{canSelectChildren:e.canSelectChildren}])},[i("div",{class:h(["children-container",{hasChild:e.leftNode}]),onMouseup:o[0]||(o[0]=s=>e.onMouseup(0))},[e.leftNode?(t(),d("div",z,[_(l,{node:e.leftNode},null,8,["node"])])):(t(),y(m,{key:1,node:e.node,"allow-type":"boolean",onUpdate:e.updateLeft},null,8,["node","onUpdate"]))],34),i("div",{class:"center",onDblclick:o[1]||(o[1]=s=>e.isOpen=!0)},[i("span",J,E(e.operatorLabel),1),e.isOpen?R((t(),d("div",K,[i("div",Q,[(t(!0),d(S,null,w(e.operators,s=>(t(),d("div",{key:s.value,class:"operator",onClick:A(k=>e.onChangeValue(s.value),["stop"])},[i("span",W,E(s.label),1)],8,T))),128))])])),[[c,e.closeMenu]]):F("",!0)],32),i("div",{class:h(["children-container",{hasChild:e.rightNode}]),onMouseup:o[2]||(o[2]=s=>e.onMouseup(1))},[e.rightNode?(t(),d("div",Z,[_(l,{node:e.rightNode},null,8,["node"])])):(t(),y(m,{key:1,node:e.node,"allow-type":"boolean",onUpdate:e.updateRight},null,8,["node","onUpdate"]))],34),_(p,{node:e.node},null,8,["node"])],2)}const be=P(L,[["render",X],["__scopeId","data-v-adb2c2d5"]]);L.__docgenInfo={displayName:"NodeCardLogicalExpression",exportName:"default",description:"",tags:{},props:[{name:"node",type:{name:"BlueprintNode"},required:!0}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/BlueprintEditor/NodeCard/NodeCardLogicalExpression.vue"]};export{be as default};
