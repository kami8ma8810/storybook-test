import{f as D,x as G,e as U,b as m,G as s,H as n,A as a,N as p,W as f,K as c,S as y,U as j,L as F,M as H}from"./vue.esm-bundler-33967e91.js";import{G as K,ar as _,a1 as P}from"./ModalPvLimitAlertView-cb9178ae.js";import{N as $}from"./NodeCardBackground-e1c3a5e9.js";import{b as q,e as z,f as A}from"./Editor-e2ebb077.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./iframe-4066d2cc.js";import"../sb-preview/runtime.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";const W=l=>(F("data-v-a2b71fb0"),l=l(),H(),l),J=["value"],O=["value"],Q={key:2,class:"image-input"},X=["src"],Y=W(()=>c("span",null,null,-1)),Z=[Y],g=D({__name:"NodeCardValue",props:{node:{}},setup(l){const b=l,N=K(),{node:e}=G(b),{updateNode:d,removeNode:C,draggingNode:i,replaceNode:k,findChildIds:B,hasParent:V,isUsed:h}=q(),{nodeResult:I}=z(U(()=>e.value.id)),{scopeData:x}=A(),E=_(()=>{const o=String(e.value.value).replace(".value","");return P.getTypeFromKey(o,x.value)||typeof I.value}),u=m(!1),r=m(null),M=()=>{u.value=!0,r.value&&(r.value.focus(),r.value.select()),e.value.type==="image"&&N.dispatch("leftPanel/inputImage",{update:o=>{d(e.value.id,{value:o})},confirm:()=>{}})},v=o=>{const t=o.target.value;t===""?C(e.value.id):d(e.value.id,{value:t}),o.target.blur()},S=()=>{d(e.value.id,{value:!e.value.value})},w=_(()=>h(e.value.id)&&i.value?i.value.id===e.value.id||B(i.value.id).includes(e.value.id)||!V(e.value.id)?!1:/number|variable/.test(e.value.type):!1),R=()=>{k(e.value,i.value)};return(o,t)=>(s(),n("div",{class:p(["NodeCardValue",[a(e).type]]),onDblclick:M},[a(e).type==="number"?(s(),n("input",{key:0,ref_key:"numberInput",ref:r,class:p([{isEditing:u.value},"number-input"]),type:"number",value:a(e).value,onMousedown:t[0]||(t[0]=f(()=>{},["stop"])),onBlur:t[1]||(t[1]=T=>u.value=!1),onChange:v},null,42,J)):a(e).type==="string"?(s(),n("input",{key:1,ref_key:"numberInput",ref:r,class:p([{isEditing:u.value},"text-input"]),type:"text",value:a(e).value,onMousedown:t[2]||(t[2]=f(()=>{},["stop"])),onBlur:t[3]||(t[3]=T=>u.value=!1),onChange:v},null,42,O)):a(e).type==="image"?(s(),n("div",Q,[c("img",{src:a(e).value},null,8,X)])):a(e).type==="boolean"?(s(),n("div",{key:3,class:"boolean-input",onDblclick:S},[c("div",{class:p(["boolean-switch",{on:a(e).value}])},Z,2)],32)):y("",!0),a(w)?(s(),n("div",{key:4,class:"replace-droppable",onMouseup:R},null,32)):y("",!0),j($,{node:a(e),"value-type":a(E)},null,8,["node","value-type"])],34))}});const ke=L(g,[["__scopeId","data-v-a2b71fb0"]]);g.__docgenInfo={exportName:"default",displayName:"NodeCardValue",description:"",tags:{},props:[{name:"node",required:!0,type:{name:"BlueprintNode"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/BlueprintEditor/NodeCard/NodeCardValue.vue"]};export{ke as default};
