import{f as L,b as C,e as p,H as r,K as t,P as R,U as _,R as T,V as ce,S as k,J as i,A as e,G as s,W as le,a6 as Se,w as X,O as G,Q as I,F as A,Z as z,I as pe,a7 as xe,_ as Ee,$ as Ce,q as Le,N as B,L as Re,M as Oe,ai as Ue,Y as fe}from"./vue.esm-bundler-33967e91.js";import{u as ee}from"./vue-i18n.cjs-bd62fc86.js";import{a as Q}from"./ModalUpgradeRequired-a455cfd7.js";import{t as De,s as Ae,dy as Be,eG as j,x as Z,w as F,eH as ge,eI as oe,G as ve,eJ as Me,bu as Ne,ak as qe,eK as Fe,eL as Ve,h as ue,E as We,A as Ge,eM as H,u as ze,U as He,eN as W,eF as re,f as me,a2 as Je,eO as Ye}from"./ModalPvLimitAlertView-cb9178ae.js";import{u as te}from"./PageProjectTemplates.composable-86a2825b.js";import{P as J}from"./PfIcon-bb1c3c10.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as se}from"./iframe-4066d2cc.js";import{I as Qe,y as Ke,S as Xe,g as ae,x as Ze}from"./tabs-2ccc0974.js";import{u as et}from"./BasicModal-000dc82b.js";import"./_commonjsHelpers-042e6b4d.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./mapValues-a1d744f5.js";import"../sb-preview/runtime.js";import"./micro-task-89dcd6af.js";const tt=""+new URL("i-32-studio-icon-piano-a12b90dc.svg",import.meta.url).href,st=""+new URL("like-filled-6ddcae86.svg",import.meta.url).href,at=""+new URL("like-outline-d8c9183d.svg",import.meta.url).href,lt={class:"_flex _flex-col _gap-16"},ot={class:"_group _aspect-[240/340] _overflow-hidden _rounded-4 _bg-gray-500"},rt={key:0,class:"_h-full _w-full _bg-gray-200"},nt={class:"_relative _h-full _w-full _overflow-hidden _rounded-4 _border _border-solid _border-gray-50 _bg-white"},it={key:0,src:st,class:"_w-20"},ct={key:1,src:at,class:"_w-20"},_t={class:"_absolute _bottom-0 _left-0 _flex _w-full _flex-col _gap-12 _p-12"},dt={class:"_flex _w-full _flex-col _gap-8"},ut=["href"],mt={class:"label-sm-bold _text-const-white"},pt=["href"],ft={class:"label-sm-bold _text-const-white"},gt={key:0,class:"_flex _w-full _flex-col _gap-8"},vt={key:0,class:"_flex _w-full _flex-col _gap-2"},yt={class:"label-md-bold"},ht={key:0,class:"label-xs2-normal _text-gray-600"},bt={key:1,class:"label-xs2-normal _text-gray-600"},Tt={key:1,class:"label-md-bold"},wt={key:2,class:"_flex _w-full _items-center _justify-between"},kt={class:"label-sm-bold"},Y=L({__name:"ProjectTemplatesItem",props:{mode:{default:"default"},template:{},wireframeDescription:{default:""}},setup(g){const c=g,o=Q(),{openCreateProjectModalPathBuilder:a,previewUrlBuilder:f,storeUrlBuilder:u}=te(),S=De(),{decoratedPrices:v}=Ae(S),y=C(c.template.liked),n=p(()=>c.template.templateId??""),d=p(()=>c.template.category===j.Wireframe),$=p(()=>c.template.tier===Z.Tier_0),P=p(()=>{const l=v.value.find(h=>h.tier===c.template.tier);if(!l)throw new Error("Invalid PriceEnum");return l.displayPrice}),O=()=>{n.value&&(y.value?F.deleteStoreTemplatesLike(n.value):F.postStoreTemplatesLike(n.value),y.value=!y.value)},M=()=>{n.value&&o.push({name:"PageTemplateCheckout",params:{templateId:n.value}})},w=()=>{n.value&&o.push(a(n.value))};return(l,h)=>(s(),r("div",lt,[t("div",ot,[l.template?(s(),r("div",rt,[t("div",nt,[t("div",{style:R({backgroundImage:`url( ${l.template.coverUrl} )`}),class:"_absolute _inset-0 _bg-cover _bg-center _transition group-hover:_scale-[1.02]"},null,4),_(ce,{"enter-active-class":"_transition","enter-from-class":"_opacity-0","enter-to-class":"_opacity-100","leave-active-class":"_transition","leave-from-class":"_opacity-100","leave-to-class":"_opacity-0"},{default:T(()=>[t("div",{class:"_relative _flex _h-full _w-full _items-center _justify-center _opacity-0 _backdrop-blur-sm _transition _duration-300 group-hover:_opacity-100",style:R({background:"rgba(0,0,0,0.3)"})},[e(d)?k("",!0):(s(),r("button",{key:0,class:"_absolute _top-8 _right-8 _flex _h-40 _w-40 _items-center _justify-center _rounded-full _bg-const-white hover:_bg-gray-100",onClick:le(O,["stop","prevent"])},[e(y)?(s(),r("img",it)):(s(),r("img",ct))])),t("div",_t,[t("div",dt,[e(d)?k("",!0):(s(),r("a",{key:0,href:e(u)(e(n)),class:"_flex _h-40 _items-center _justify-center _gap-4 _rounded-4 _border _border-solid _border-const-white hover:_bg-[#ffffff4d]",target:"_blank",rel:"noopener noreferrer"},[t("span",mt,i(l.$t("STUDIO_STORE:show detail")),1),_(e(J),{icon:"openWindow",size:12,"icon-color":"const-white"})],8,ut)),t("a",{href:e(f)(e(n)),class:"_flex _h-40 _items-center _justify-center _gap-4 _rounded-4 _border _border-solid _border-const-white hover:_bg-[#ffffff4d]",target:"_blank",rel:"noopener noreferrer"},[t("span",ft,i(l.$t("STUDIO_STORE:preview")),1),_(e(J),{icon:"openWindow",size:12,"icon-color":"const-white"})],8,pt),t("div",{class:"label-sm-bold _flex _h-40 _cursor-pointer _select-none _items-center _justify-center _rounded-4 _bg-const-white _text-const-black hover:_opacity-80",onClick:h[0]||(h[0]=le(b=>e($)?w():M(),["prevent","stop"]))},i(e($)?e(d)?l.$t("STUDIO_STORE:Use Wireframe"):l.$t("STUDIO_STORE:Use Template"):l.$t("STUDIO_STORE:buy template")),1)])])],4)]),_:1})])])):k("",!0)]),l.template?(s(),r("div",gt,[l.template?(s(),r("div",vt,[t("p",yt,i(l.template.templateTitle),1),e(d)?(s(),r("p",ht,i(l.wireframeDescription),1)):(s(),r("p",bt,i(l.template.category),1))])):k("",!0),l.mode==="showPrice"?(s(),r("p",Tt,i(e(P)),1)):l.mode==="purchased"?(s(),r("div",wt,[t("span",kt,i(e(Be).toYearAndMonthAndDayFormat(l.template.publishedAt))+"購入",1)])):k("",!0)])):k("",!0)]))}});Y.__docgenInfo={exportName:"default",displayName:"ProjectTemplatesItem",description:"",tags:{},props:[{name:"mode",required:!1,type:{name:"ProjectTemplatesItemDisplayMode"},defaultValue:{func:!1,value:"'default'"}},{name:"template",required:!0,type:{name:"StoreTemplateBase"}},{name:"wireframeDescription",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplatesItem.vue"]};const he={},$t={class:"_flex _animate-pulse _flex-col _gap-16"},Pt=Se('<div class="_aspect-[240/340] _overflow-hidden _rounded-4"><div class="_h-full _w-full _bg-gray-200 _bg-cover _bg-center"></div></div><div class="_flex _w-full _flex-col _gap-8"><span class="label-md-bold _h-12 _w-80 _rounded-full _bg-gray-200"></span><span class="label-md-bold _h-10 _w-full _rounded-full _bg-gray-200"></span></div>',2),It=[Pt];function jt(g,c){return s(),r("div",$t,It)}const be=ye(he,[["render",jt]]);he.__docgenInfo={displayName:"ProjectTemplatesItemLoading",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplatesItemLoading.vue"]};const St={class:"_flex _aspect-[240/340] _items-center _justify-center _overflow-hidden _rounded-4 _border-2 _border-dashed _border-gray-200 _px-24"},xt={class:"label-sm-bold _text-center _text-gray-500"},_e=L({__name:"ProjectTemplatesItemNotExist",props:{label:{}},setup(g){return(c,o)=>(s(),r("div",St,[t("p",xt,i(c.label),1)]))}});_e.__docgenInfo={exportName:"default",displayName:"ProjectTemplatesItemNotExist",description:"",tags:{},props:[{name:"label",required:!0,type:{name:"string"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplatesItemNotExist.vue"]};const Et={class:"_flex _w-full _flex-col _gap-40"},Ct={class:"_flex _w-full _flex-col _gap-20"},Lt={class:"_flex _w-full _items-center _justify-between"},Rt={class:"_heading-sm"},Ot={class:"label-sm-bold _text-gray-600"},Ut={class:"_grid _grid-cols-5 _gap-24"},Dt={class:"_flex _w-full _items-center _justify-center"},ne=L({__name:"AsyncTemplateList",props:{label:{},limit:{},query:{},showPrice:{type:Boolean,default:!1},moreUrl:{}},setup(g){const c=g,{state:o,isReady:a,execute:f}=ge(async()=>F.postStoreTemplatesSearch({query:c.query,limit:c.limit,orderBy:oe.PurchasedCount}).then(v=>{const y=v.data.data;return{templates:y?.templates??[],totalCount:y?.meta?.totalCount??0}}),{templates:[],totalCount:0}),u=p(()=>o.value.templates),S=p(()=>o.value.totalCount);return X(()=>c.query,()=>{f()}),(v,y)=>{const n=G("PfIcon"),d=G("PfButtonLink");return s(),r("div",Et,[t("div",Ct,[t("div",Lt,[t("p",Rt,i(v.label),1),t("span",Ot,i(v.$t("STUDIO_STORE:{count} templates",e(S))),1)]),t("div",Ut,[e(a)?e(u).length===0?(s(),I(_e,{key:1,label:v.$t("STUDIO_STORE:No applicable template")},null,8,["label"])):(s(!0),r(A,{key:2},z(e(u),$=>(s(),I(Y,{key:$.templateId,mode:v.showPrice?"showPrice":"default",template:$},null,8,["mode","template"]))),128)):(s(),I(be,{key:0}))])]),t("div",Dt,[_(d,{to:v.moreUrl,size:"lg",variant:"outline",disabled:!e(a),target:"_blank","is-external":""},{default:T(()=>[pe(i(v.$t("show more"))+" ",1),_(n,{icon:"chevronRight","icon-color":"black"})]),_:1},8,["to","disabled"])])])}}});ne.__docgenInfo={exportName:"default",displayName:"AsyncTemplateList",description:"",tags:{},props:[{name:"label",required:!0,type:{name:"string"}},{name:"limit",required:!0,type:{name:"number"}},{name:"query",required:!0,type:{name:"string"}},{name:"showPrice",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"moreUrl",required:!0,type:{name:"string"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/AsyncTemplateList.vue"]};const At=g=>(Re("data-v-627e45dc"),g=g(),Oe(),g),Bt={class:"ProjectCreate"},Mt=At(()=>t("div",{class:"modal-cover"},null,-1)),Nt=["placeholder","disabled"],qt=["disabled"],Ft={key:0,class:"spinner"},Vt={key:1},Wt={key:0,class:"wait-msg"},Te=L({__name:"ProjectCreate",props:{templateCover:{default:""},templateId:{}},emits:["close"],setup(g,{emit:c}){const o=g,a=c,f=ve(),u=Q(),{t:S}=ee(),{segmentProjectCmsActivated:v}=Me(),{isDarkMode:y}=Ne();qe("Escape",l=>{l.isComposing||a("close")});const n=C(""),d=C(!1),$=C(!1),P=p(()=>n.value.trim()),O=p(()=>P.value.length>0),M=async()=>{if(!d.value)try{d.value=!0;const l={name:P.value};o.templateId!=="blank"&&(l.templateId=o.templateId);const h=await f.dispatch("v2/createProjectsNew",l),b=h.id,m=h.cmsProjectId;if(m){$.value=!0;const N=(await Fe.createToken(b)).data.token;await f.dispatch("database/connectFirebase",{token:N,projectId:b});const U=await Ve({path:{cmsId:m},subscribe:D=>{D.initializing===!1&&(U(),w(b),ue.projectCreated({projectId:b,templateId:o.templateId||null}),v())},isTemplate:!1})}else w(b),ue.projectCreated({projectId:b,templateId:o.templateId||null})}catch(l){const h=We(l),b=S(h);await f.dispatch("studioError/alert",{error:l,text:b},{root:!0}),d.value=!1}},w=l=>{u.push({path:`/projects/${l}/editor`})};return(l,h)=>{const b=xe("focus");return s(),I(ce,null,{default:T(()=>[t("div",Bt,[Mt,t("main",null,[t("div",{class:"cover",style:R({backgroundImage:`url( ${l.templateCover} )`})},null,4),t("form",{onSubmit:le(M,["prevent"])},[Ee(t("input",{"onUpdate:modelValue":h[0]||(h[0]=m=>Le(n)?n.value=m:null),class:"name",placeholder:l.$t("Enter Project Name"),disabled:e(d)},null,8,Nt),[[Ce,e(n)],[b]]),t("button",{class:B(["submit",{isLoading:e(d)}]),type:"submit",disabled:!e(O)},[e(d)?(s(),r("div",Ft)):(s(),r("p",Vt,i(l.$t("Create")),1))],10,qt)],32),e(d)&&e($)?(s(),r("div",Wt,i(l.$t("Initializing CMS")),1)):k("",!0)]),t("button",{class:B(["close-button",{isDarkMode:e(y)}]),onClick:h[1]||(h[1]=m=>a("close"))},null,2)])]),_:1})}}});const Gt=ye(Te,[["__scopeId","data-v-627e45dc"]]);Te.__docgenInfo={exportName:"default",displayName:"ProjectCreate",description:"",tags:{},props:[{name:"templateCover",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"templateId",required:!0,type:{name:"string"}}],events:[{name:"close"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectCreate.vue"]};const we=L({__name:"ModalProjectTemplateCreate",props:{templateId:{}},emits:["closed"],setup(g,{emit:c}){const o=g,a=c,f=Q(),{t:u}=ee(),S=C(""),v=async()=>{if(o.templateId==="tutorial"){y();return}let n;if(o.templateId!=="blank")if(n=await F.getStoreTemplate(o.templateId).then(d=>d.data.data),n)n.tier!==Z.Tier_0&&a("closed");else{alert(u("STUDIO_STORE:template not found")+o.templateId),f.push({name:"PageProjectTemplates"});return}S.value=n?.coverUrl||""},y=async()=>{const n="1";try{(await Ge(Object.assign({"../../../assets/tutorial/1/product.json":()=>se(()=>import("./product-fd265cb3.js"),[],import.meta.url),"../../../assets/tutorial/2/product.json":()=>se(()=>import("./product-8d2eceb8.js"),[],import.meta.url),"../../../assets/tutorial/global_1/product.json":()=>se(()=>import("./product-c6f5457e.js"),[],import.meta.url)}),`../../../assets/tutorial/${n}/product.json`)).default}catch(d){console.error(d)}};return Ue(()=>{v()}),(n,d)=>(s(),I(Gt,{"template-cover":e(S),"template-id":n.templateId,onClose:d[0]||(d[0]=$=>n.$emit("closed"))},null,8,["template-cover","template-id"]))}});we.__docgenInfo={exportName:"default",displayName:"ModalProjectTemplateCreate",description:"",tags:{},props:[{name:"templateId",required:!0,type:{name:"string"}}],events:[{name:"closed"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ModalProjectTemplateCreate.vue"]};const ke=L({__name:"ProjectTemplateCategoryTag",props:{isActivated:{type:Boolean},value:{}},emits:["select"],setup(g){const c=C(!1);return(o,a)=>(s(),r("div",{class:B(["_flex _cursor-pointer _items-center _justify-start _rounded-4 _px-6 _py-8",[e(c)&&"_bg-gray-50"]]),onClick:a[0]||(a[0]=f=>o.$emit("select",o.value)),onMouseover:a[1]||(a[1]=f=>c.value=!0),onMouseleave:a[2]||(a[2]=f=>c.value=!1)},[_(e(J),{icon:"arrowDropRight",class:B([o.isActivated||e(c)?"_visible":"_invisible"]),size:16,"icon-color":o.isActivated?"black":"gray-600"},null,8,["class","icon-color"]),t("span",{class:B(["label-sm2-bold",[!o.isActivated&&"_text-gray-600"]])},i(o.$t(`TEMPLATE_CATEGORY:${o.value}`)),3)],34))}});ke.__docgenInfo={exportName:"default",displayName:"ProjectTemplateCategoryTag",description:"",tags:{},props:[{name:"isActivated",required:!0,type:{name:"boolean"}},{name:"value",required:!0,type:{name:"union",elements:[{name:"StoreCategoryEnum"},{name:'"ALL"'}]}}],events:[{name:"select",type:{names:["union"],elements:[{name:"StoreCategoryEnum"},{name:'"ALL"'}]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplateCategoryTag.vue"]};const zt={class:"_flex _flex-col _gap-16"},Ht={class:"_relative _h-full _w-full _overflow-hidden _rounded-4 _border _border-solid _border-gray-50 _bg-white"},Jt={class:"_absolute _inset-0 _flex _h-full _w-full _items-center _justify-center"},Yt={class:"label-md-bold _text-white"},Qt={class:"_flex _w-full _flex-col _gap-8"},Kt={class:"_flex _w-full _flex-col _gap-2"},Xt={class:"label-md-bold"},Zt={class:"label-xs2-normal _text-gray-600"},de=L({__name:"ProjectTemplatesItemBlank",setup(g){const{openCreateProjectModalPathBuilder:c}=te();return(o,a)=>(s(),r("div",zt,[t("div",{class:"_group _aspect-[240/340] _cursor-pointer _overflow-hidden _rounded-4",onClick:a[0]||(a[0]=f=>o.$router.push(e(c)("blank")))},[t("div",Ht,[t("div",Jt,[_(e(J),{icon:"plus",size:24,"icon-color":"gray-300"})]),_(ce,{"enter-active-class":"_transition","enter-from-class":"_opacity-0","enter-to-class":"_opacity-100","leave-active-class":"_transition","leave-from-class":"_opacity-100","leave-to-class":"_opacity-0"},{default:T(()=>[t("div",{class:"_relative _flex _h-full _w-full _items-center _justify-center _opacity-0 _backdrop-blur-sm _transition group-hover:_opacity-100",style:R({background:"rgba(0,0,0,0.3)"})},[t("p",Yt,i(o.$t("templates: Start with brank")),1)],4)]),_:1})])]),t("div",Qt,[t("div",Kt,[t("p",Xt,i(o.$t("templates: Blank Site")),1),t("p",Zt,i(o.$t("templates: Design from a blank slate")),1)])])]))}});de.__docgenInfo={exportName:"default",displayName:"ProjectTemplatesItemBlank",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplatesItemBlank.vue"]};const es={class:"_grid _w-full _grid-cols-5 _gap-24"},ts={key:0,class:"_col-span-1 _flex _flex-col _gap-16"},ss={class:"_heading-sm"},as={class:"_flex _w-full _items-center _justify-between"},ls={class:"_heading-sm"},os={key:0,class:"_grid _w-full _grid-cols-5 _gap-24"},ie=L({__name:"ProjectTemplatesTabItem",props:{isLoading:{type:Boolean},itemDisplayMode:{default:"default"},label:{},showBlank:{type:Boolean,default:!1},templates:{}},setup(g){const c=g,o=p(()=>c.showBlank?4:5);return(a,f)=>(s(),r("div",{class:"_flex _w-full _flex-col _gap-40",style:R({maxWidth:`${e(H)}px`})},[t("div",es,[a.showBlank?(s(),r("div",ts,[t("p",ss,i(a.$t("CMS:StartWithBlank")),1),_(de)])):k("",!0),t("div",{class:B(["_flex _flex-col _gap-16",[a.showBlank?"_col-span-4":"_col-span-5"]])},[t("div",as,[t("span",ls,i(a.label),1),fe(a.$slots,"labelRight")]),t("div",{class:B(["_grid _w-full _gap-24",[a.showBlank?"_grid-cols-4":"_grid-cols-5"]])},[a.isLoading?(s(),I(be,{key:0})):(s(),r(A,{key:1},[a.templates.length===0?(s(),I(_e,{key:0,label:a.$t("TEMPLATE_LIST:No favorite template")},null,8,["label"])):(s(!0),r(A,{key:1},z(a.templates.slice(0,e(o)),u=>(s(),I(Y,{key:u.templateId,mode:a.itemDisplayMode,template:u},null,8,["mode","template"]))),128))],64))],2)],2)]),!a.showBlank&&a.templates.length>e(o)?(s(),r("div",os,[(s(!0),r(A,null,z(a.templates.slice(e(o)),u=>(s(),I(Y,{key:u.templateId,mode:a.itemDisplayMode,template:u},null,8,["mode","template"]))),128))])):k("",!0)],4))}});ie.__docgenInfo={exportName:"default",displayName:"ProjectTemplatesTabItem",description:"",tags:{},props:[{name:"isLoading",required:!0,type:{name:"boolean"}},{name:"itemDisplayMode",required:!1,type:{name:"ProjectTemplatesItemDisplayMode"},defaultValue:{func:!1,value:"'default'"}},{name:"label",required:!0,type:{name:"string"}},{name:"showBlank",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"templates",required:!0,type:{name:"Array",elements:[{name:"StoreTemplateBase"}]}}],slots:[{name:"labelRight"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplatesTabItem.vue"]};const rs={class:"_mt-32 _flex _w-full _flex-col"},ns={class:"_relative _h-52 _w-[172px]"},is={class:"label-md-bold"},cs={key:0,class:"label-md-bold _ml-8 _text-gray-600"},_s={key:1,class:"_absolute _bottom-0 _left-0 _h-2 _w-full _bg-black"},ds={class:"label-sm-bold !_text-gray-600"},us={class:"label-sm-bold !_text-gray-600"},ms={class:"_grid _w-full _grid-cols-5 _gap-24"},ps={class:"_col-span-1 _flex _flex-col _gap-16"},fs={class:"_heading-sm"},gs={class:"_col-span-4 _flex _flex-col _gap-16"},vs={class:"_flex _w-full _items-center _justify-between"},ys={class:"_heading-sm"},hs={class:"_grid _w-full _grid-cols-4 _gap-24"},bs={class:"label-lg-bold _text-gray-600"},$e=L({__name:"ProjectTemplatesTab",props:{tabType:{default:"default"}},setup(g){const c=["Wireframe:portfolio sub","Wireframe:business sub","Wireframe:blog sub"],o=g,a=Q(),{language:f}=ze(),{t:u,locale:S}=ee(),{storeUrl:v}=te(),y=C(!0),n=p(()=>({default:{label:u("STUDIO_STORE:template"),count:null},wireframes:{label:u("TEMPLATE_CATEGORY:WIREFRAME"),count:null},liked:{label:u("STUDIO_STORE:liked"),count:$.value}})),d=p(()=>Object.keys(n.value).indexOf(o.tabType)),$=p(()=>b.value.likedCount),P=p(()=>b.value?.likedTemplates??[]),O=p(()=>b.value?.wireframeTemplates??[]),M=p(()=>d.value!==0),w=p(()=>P.value.length===0?b.value.popularFreeTemplates:P.value.slice(0,4)),l=p(()=>P.value.length===0?u("TEMPLATE_LIST:popular free templates"):u("TEMPLATE_LIST:number of favorites")),h=m=>{a.push({query:{[re]:Object.keys(n.value)[m]}})},{state:b}=ge(Promise.all([F.getStoreWireframeTemplates(f.value===He.JP?W.Ja:W.En),F.postStoreTemplatesSearch({query:"liked:true",orderBy:oe.LikedAt}),F.postStoreTemplatesSearch({query:"tier:tier_0 "+(S.value==="JP"?"language:ja":"language:en"),limit:20,offset:0,orderBy:oe.Ranking})]).then(([m,N,U])=>{const D=m.data.data,x=N.data.data,q=U.data.data;return y.value=!1,{wireframeTemplates:D?.templates??[],likedCount:x?.meta?.totalCount??0,likedTemplates:x?.templates??[],popularFreeTemplates:q?.templates??[]}}),{likedCount:0,likedTemplates:[],wireframeTemplates:[],popularFreeTemplates:[]},{immediate:!0});return(m,N)=>{const U=G("PfIcon"),D=G("PfButtonLink");return s(),r("div",rs,[_(e(Ze),{"selected-index":e(d),as:"div",class:"_flex _w-full _flex-col _items-center",onChange:h},{default:T(()=>[_(e(Qe),{class:"_flex _w-full _justify-center _border-b _border-solid _border-gray-100 _px-72"},{default:T(()=>[t("div",{class:"_w-full",style:R({maxWidth:`${e(H)}px`})},[(s(!0),r(A,null,z(e(n),x=>(s(),I(e(Ke),{key:x.label,as:"template"},{default:T(({selected:q})=>[t("button",ns,[t("span",is,i(x.label),1),x.count?(s(),r("span",cs,i(x.count),1)):k("",!0),q?(s(),r("span",_s)):k("",!0)])]),_:2},1024))),128))],4)]),_:1}),_(e(Xe),{class:B(["_flex _w-full _justify-center _bg-gray-50 _py-48 _px-72",[e(M)&&"_min-h-screen"]])},{default:T(()=>[_(e(ae),{class:"_flex _w-full _justify-center"},{default:T(()=>[_(ie,{label:e(l),templates:e(w),"show-blank":"","is-loading":e(y)},{labelRight:T(()=>[e(P).length===0?(s(),I(D,{key:0,size:"xs",to:e(v),"is-external":"",variant:"tertiary",class:"_flex _flex-row _items-center _gap-4"},{default:T(()=>[t("span",ds,i(m.$t("STUDIO_STORE:Find templates")),1),_(U,{icon:"chevronRight","icon-color":"gray-600",size:"16"})]),_:1},8,["to"])):k("",!0),e(P).length>4?(s(),I(D,{key:1,size:"xs",to:{query:{[e(re)]:"liked"}},variant:"tertiary",class:"_flex _flex-row _items-center _gap-4"},{default:T(()=>[t("span",us,i(m.$t("show more")),1),_(U,{icon:"chevronRight","icon-color":"gray-600",size:"16"})]),_:1},8,["to"])):k("",!0)]),_:1},8,["label","templates","is-loading"])]),_:1}),_(e(ae),{class:"_flex _w-full _justify-center"},{default:T(()=>[t("div",{class:"_flex _w-full _flex-col _gap-40",style:R({maxWidth:`${e(H)}px`})},[t("div",ms,[t("div",ps,[t("p",fs,i(m.$t("CMS:StartWithBlank")),1),_(de)]),t("div",gs,[t("div",vs,[t("span",ys,i(m.$t("TEMPLATE_CATEGORY:WIREFRAME")),1),fe(m.$slots,"labelRight")]),t("div",hs,[(s(!0),r(A,null,z(e(O),(x,q)=>(s(),I(Y,{key:x.templateId,template:x,"wireframe-description":m.$t(c[q])},null,8,["template","wireframe-description"]))),128))])])])],4)]),_:3}),_(e(ae),{class:"_flex _w-full _justify-center"},{default:T(()=>[_(ie,{label:m.$t("STUDIO_STORE:favorite templates"),templates:e(P),"is-loading":e(y)},{labelRight:T(()=>[t("span",bs,i(m.$t("STUDIO_STORE:{count} likes",e($))),1)]),_:1},8,["label","templates","is-loading"])]),_:1})]),_:3},8,["class"])]),_:3},8,["selected-index"])])}}});$e.__docgenInfo={exportName:"default",displayName:"ProjectTemplatesTab",description:"",tags:{},props:[{name:"tabType",required:!1,type:{name:"StartProjectTabType"},defaultValue:{func:!1,value:"'default'"}}],slots:[{name:"labelRight"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/ProjectTemplatesTab.vue"]};const Ts={class:"_h-screen _w-full _overflow-auto _bg-white"},ws={class:"_fixed _top-0 _left-0 _z-1 _flex _h-64 _w-full _items-center _justify-between _bg-white _px-24"},ks=t("div",{class:"logo"},null,-1),$s=t("img",{alt:"",src:tt,width:"32"},null,-1),Ps={class:"_z-0 _mt-[84px] _w-full"},Is={class:"_flex _justify-center _px-72"},js={class:"_heading-lg"},Ss={key:0,class:"_flex _justify-center _bg-white _px-72 _py-80"},xs={class:"_flex _h-44 _w-full _items-center _justify-between"},Es={class:"_heading-md"},Cs={class:"_grid _grid-cols-5 _gap-8 _border-l _border-solid _border-gray-100 _px-32"},Ls=L({__name:"PageProjectTemplates",setup(g){const c=["create",void 0],o=/^en|ja$/,a=["ALL",j.Software,j.Creative,j.Business,j.FoodAndDrink,j.Travel,j.Entertainment,j.WellnessAndBeauty,j.Sports,j.Education,j.Medical,j.BlogAndMedia,j.Others],f=me("modal"),u=me(re),S=Je("templateId"),v=Q(),y=et(),{closeCreateProjectModalPathBuilder:n,storeCategoryUrlBuilder:d,storeUrl:$,templateMap:P}=te(),O=ve(),{t:M}=ee(),w=C("ALL"),l=C(!1),h=C([]),b=p(()=>!c.some(E=>E===f.value)),m=p(()=>u.value?u.value:"default"),N=p(()=>O.getters["v2/langCode"]),U=p(()=>[w.value==="ALL"?null:`category:${w.value}`,`tier:${Z.Tier_0}`,N.value==="ja"?`language:${W.Ja}`:`language:${W.En}`].filter(Boolean).join(" ")),D=p(()=>[w.value==="ALL"?null:`category:${w.value}`,`-tier:${Z.Tier_0}`,N.value==="ja"?`language:${W.Ja}`:`language:${W.En}`].filter(Boolean).join(" ")),x=()=>{requestAnimationFrame(()=>{if(b.value===!0){alert(M("STUDIO_STORE:STUDIO Non-existent path."));return}f.value==="create"&&(console.log("create"),y.push("ModalProjectTemplateCreate"))})},q=()=>{if(P.value==null)return[];const E=O.getters["v2/langCode"],V=o.test(E)?[E]:[E,"en"];return P.value.filter(V)};return X(f,()=>{x()},{immediate:!0}),X(m,E=>{},{immediate:!0}),X(w,()=>{l.value=!0,setTimeout(()=>{h.value=q(),l.value=!1},2e3)},{immediate:!0}),(E,V)=>{const Pe=G("router-link"),Ie=G("PfButtonLink");return s(),r(A,null,[t("div",Ts,[t("header",ws,[_(Pe,{to:{name:"ProjectsActive"},class:"_flex _items-center"},{default:T(()=>[ks,$s]),_:1}),_(Ye,{class:"avatar-icon"})]),t("div",Ps,[t("div",Is,[t("div",{class:"_w-full",style:R({maxWidth:`${e(H)}px`})},[t("p",js,i(E.$t("STUDIO_STORE:Create Project")),1)],4)]),_($e,{"tab-type":e(m)},null,8,["tab-type"]),e(m)==="default"?(s(),r("div",Ss,[t("div",{class:"_flex _w-full _flex-col _gap-36",style:R({maxWidth:`${e(H)}px`})},[t("div",xs,[t("span",Es,i(E.$t("STUDIO_STORE:Find templates")),1),_(Ie,{to:e($),"is-external":"",variant:"outline",size:"md"},{default:T(()=>[pe(i(E.$t("STUDIO_STORE:STUDIO Store"))+" ",1),_(e(J),{icon:"arrowRight"})]),_:1},8,["to"])]),t("div",Cs,[(s(),r(A,null,z(a,K=>_(ke,{key:K,value:K,"is-activated":K===e(w),onSelect:V[0]||(V[0]=je=>w.value=je)},null,8,["value","is-activated"])),64))]),_(ne,{label:E.$t("STUDIO_STORE:free templates"),query:e(U),limit:10,"more-url":e(d)(e(w))},null,8,["label","query","more-url"]),_(ne,{label:E.$t("STUDIO_STORE:paid templates"),query:e(D),limit:10,"more-url":e(d)(e(w),!0),"show-price":""},null,8,["label","query","more-url"])],4)])):k("",!0)])]),e(f)==="create"?(s(),I(we,{key:0,"template-id":e(S),onClosed:V[1]||(V[1]=K=>e(v).push(e(n)()))},null,8,["template-id"])):k("",!0)],64)}}});Ls.__docgenInfo={exportName:"default",displayName:"PageProjectTemplates",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/V2/ProjectTemplates/PageProjectTemplates.vue"]};export{Ls as default};
