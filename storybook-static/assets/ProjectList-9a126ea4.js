import{f as C,O as P,Q as _,R as r,G as i,K as n,U as o,J as d,P as Y,H as k,A as t,L as Z,M as ee,N as M,W as w,S,I as R,x as te,b,w as oe,F as B}from"./vue.esm-bundler-33967e91.js";import{u as ae}from"./vue-i18n.cjs-bd62fc86.js";import{u as T,ez as se,dy as re,eA as le,eB as ne,eC as z,eD as ce,eE as ie,G as de,eb as ue,a4 as pe,bp as me}from"./ModalPvLimitAlertView-cb9178ae.js";import{P as _e,a as fe}from"./ProjectListItem-ca4fef69.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import{u as O,B as he}from"./BasicModal-000dc82b.js";import{_ as ve}from"./NoDataExistsDoccii-8a2807e7.js";const q=u=>(Z("data-v-c591be0f"),u=u(),ee(),u),je={class:"_flex _h-full _w-full _flex-row _opacity-30"},Pe={class:"label-md-bold _w-full _overflow-hidden _text-ellipsis"},ye=q(()=>n("div",{class:"a-status-light-draft"},null,-1)),ge={class:"label-sm-normal _overflow-hidden _text-ellipsis _text-gray-600"},be=["src"],we={class:"label-md-normal _text-gray-700"},De=q(()=>n("div",{class:"more-zone _flex _h-full _flex-row _items-center"},[n("div",{class:"spinner black"})],-1)),A=C({__name:"ProjectListItemDummy",props:{project:{},hidden:{type:Boolean,default:!1}},setup(u){const a=T();return(l,p)=>{const s=P("PfRow"),c=P("PfColumn");return i(),_(s,{w:"full",class:"o-project-list-item border-b-1 _pointer-events-none",style:{height:"80px"}},{default:r(()=>[n("div",je,[o(s,{h:"full",align:"center",gap:"16",flex:"1",tag:"td",class:"_overflow-hidden _whitespace-nowrap _px-16 _py-12"},{default:r(()=>[o(se,{size:"sm",project:l.project},null,8,["project"]),o(c,{h:"full",justify:"center",gap:"4",flex:"1",class:"_overflow-hidden"},{default:r(()=>[n("p",Pe,d(l.$t("Project Duplicate: Project Name",{ProjectName:l.project.name})),1),o(s,{w:"full",align:"center",gap:"8"},{default:r(()=>[ye,n("span",ge,d(l.project.publishDomain),1)]),_:1})]),_:1})]),_:1}),o(s,{h:"full",align:"center",flex:"none",tag:"td",class:"_px-16"},{default:r(()=>[n("p",{class:"roman-label-md _text-gray-600",style:Y(l.project.currentPlanNameStyle)},"Free",4)]),_:1}),o(s,{tag:"td",h:"full",align:"center",flex:"none",class:"o-member-list _px-16"},{default:r(()=>[(i(),k("img",{key:t(a).account.value.id,src:t(a).account.value.avatar,class:"a-avatar-circle-xss project-users-icon _object-cover"},null,8,be))]),_:1}),o(s,{h:"full",align:"center",flex:"none",tag:"td",class:"_px-16"},{default:r(()=>[n("p",we,d(t(re).toDefaultFormat(l.project.lastViewedAt)),1)]),_:1}),o(s,{tag:"td",h:"full",flex:"none"})]),De]),_:1})}}});const $e=F(A,[["__scopeId","data-v-c591be0f"]]);A.__docgenInfo={exportName:"default",displayName:"ProjectListItemDummy",description:"",tags:{},props:[{name:"project",required:!0,type:{name:"ProjectModel"}},{name:"hidden",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageProjects/ProjectList/ProjectListItemDummy.vue"]};const H=C({__name:"ProjectListItemMenu",props:{disableMore:{type:Boolean},hidden:{type:Boolean},isOwnerRole:{type:Boolean},project:{}},emits:["archive","duplicate","restore"],setup(u){return(a,l)=>{const p=P("PfIcon");return i(),_(t(ie),{as:"div",class:M(["_absolute _right-16 _top-20",[a.disableMore&&"_pointer-events-none _opacity-30"]]),onClick:l[2]||(l[2]=w(()=>{},["stop"]))},{default:r(()=>[o(t(ce),{placement:"bottom-end",enter:"_transition _duration-100 _ease-out","enter-from":"_opacity-0","enter-to":"_opacity-100",leave:"_transition _duration-100 _ease-in","leave-from":"_opacity-100","leave-to":"_opacity-0",portal:""},{default:r(()=>[o(t(le),{class:"_flex _h-36 _w-36 _items-center _justify-center _rounded-4",onClick:w(()=>!1,["stop","prevent"])},{default:r(()=>[o(p,{icon:"moreHoriz",size:"24"})]),_:1}),o(t(ne),{class:"_w-[164px] _rounded-6 _bg-white _py-8 _shadow-12"},{default:r(()=>[!a.hidden&&a.isOwnerRole&&a.project.canDuplicate?(i(),_(t(z),{key:0},{default:r(({active:s})=>[n("button",{class:M([[s&&"_bg-gray-100"],"label-sm-normal _h-32 _w-full _px-16 _text-left"]),onClick:l[0]||(l[0]=w(c=>a.$emit("duplicate"),["prevent","stop"]))},d(a.$t("Project Duplicate: Duplicate")),3)]),_:1})):S("",!0),o(t(z),null,{default:r(({active:s})=>[n("button",{class:M([[s&&"_bg-gray-100"],"label-sm-normal _h-32 _w-full _px-16 _text-left"]),onClick:l[1]||(l[1]=w(c=>a.hidden?a.$emit("restore"):a.$emit("archive"),["prevent","stop"]))},d(a.hidden?a.$t("PROJECTLIST: restore"):a.$t("PROJECTLIST: archive")),3)]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])}}});H.__docgenInfo={exportName:"default",displayName:"ProjectListItemMenu",description:"",tags:{},props:[{name:"disableMore",required:!0,type:{name:"boolean"}},{name:"hidden",required:!0,type:{name:"boolean"}},{name:"isOwnerRole",required:!0,type:{name:"boolean"}},{name:"project",required:!0,type:{name:"ProjectModel"}}],events:[{name:"duplicate"},{name:"restore"},{name:"archive"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageProjects/ProjectList/ProjectListItemMenu.vue"]};const ke={class:"modal-content"},Ce={class:"modal-title"},Ie={class:"modal-inner"},Le={class:"text"},Me={class:"modal-btns"},E=C({__name:"PdDuplicateModal",props:{project:{}},emits:["duplicate"],setup(u,{emit:a}){const l=a,p=O(),s=async()=>{l("duplicate"),p.pop()};return(c,f)=>{const y=P("PfButton");return i(),k("div",{class:"modal-card",onClick:f[1]||(f[1]=w(()=>{},["stop"]))},[n("div",ke,[n("h3",Ce,d(c.$t("Project Duplicate: Duplicate Title")),1),n("div",Ie,[n("p",Le,d(c.$t("Project Duplicate: Duplicate Text",{ProjectName:c.project.name})),1)]),n("div",Me,[o(y,{class:"_mr-16 _w-[50%]",size:"md",variant:"outline",onClick:f[0]||(f[0]=x=>c.$modal.pop())},{default:r(()=>[R(d(c.$t("Project Duplicate: Cancel")),1)]),_:1}),o(y,{class:"_w-[50%]",size:"md",variant:"primary",onClick:s},{default:r(()=>[R(d(c.$t("Project Duplicate: Duplicate Start")),1)]),_:1})])])])}}});const Se=F(E,[["__scopeId","data-v-5fe4aa30"]]);E.__docgenInfo={exportName:"default",displayName:"PdDuplicateModal",description:"",tags:{},props:[{name:"project",required:!0,type:{name:"ProjectModel"}}],events:[{name:"duplicate"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDuplicateModal.vue"]};const xe=C({__name:"ProjectList",props:{hidden:{type:Boolean},projects:{}},setup(u){const a=u,{projects:l}=te(a),p=de(),{t:s}=ae(),{account:c}=T(),{duplicate:f}=ue(),{showSnackBar:y}=pe(),x=O(),g=b(!1),h=b(l.value),m=b(),D=b(),$=b(!1),{showConfirmDialog:G}=me(),U=e=>e.projectUsers.filter(({id:I,roleDisplayName:L})=>I===c.value.id&&L==="Owner").length>0;oe(l,e=>{h.value=g.value?e.reverse():e});const V=()=>{g.value=!g.value,h.value=h.value.reverse()},J=e=>{p.dispatch("v2/hideProject",{projectId:e,userId:c.value.id}).catch(v=>console.error(v))},K=async e=>{if(!e.isNextPlanFree)return window.alert(s("ProjectList: This project is billing.Please change plan for archive."));await G({text:s("ProjectList: Archive project confirm",[e.name]),label:s("archive"),variant:"primary"})&&J(e.id)},Q=e=>{p.dispatch("v2/unhideProject",{projectId:e,userId:c.value.id}).catch(v=>console.error(v))},W=e=>{x.push("duplicate-from-project-list"),D.value=e,m.value=e},X=async()=>{if(m.value){$.value=!0;try{await f(m.value.id,m.value.currentPlan.plan),await p.dispatch("v2/getProjects",{cache:!0}),y("roundCheck",s("Project Duplicate: Duplicate Complete"))}catch(e){console.error(e),y("cautionCircle",s("Project Duplicate: Duplicate Failed"))}$.value=!1,D.value=void 0,m.value=void 0}};return(e,v)=>{const I=P("RecycleScroller"),L=P("PfColumn");return i(),k(B,null,[o(L,{w:"full",class:"o-project-list _z-0"},{default:r(()=>[t(h).length===0&&e.hidden?(i(),_(ve,{key:0,title:e.$t("PROJECTLIST: oh, I canâ€™t seem to find projects."),"sub-title":e.$t("PROJECTLIST: the projects you've archived in the project list will be displayed here")},null,8,["title","sub-title"])):(i(),k(B,{key:1},[o(_e,{"is-desc":t(g),class:"project-list-header _sticky _z-1 _bg-white",onClickSort:V},null,8,["is-desc"]),t($)&&t(D)?(i(),_($e,{key:0,project:t(D)},null,8,["project"])):S("",!0),(i(),_(I,{key:`${t(h).length}_${t(g)}`,items:t(h),"item-size":80,buffer:1e3,"key-field":"id",class:"project-list-scroller _z-0 _w-full","page-mode":""},{default:r(({item:j})=>[o(fe,{project:j,hidden:e.hidden},{menu:r(()=>[o(H,{hidden:e.hidden??!1,"disable-more":t($),"is-owner-role":U(j),project:j,onArchive:N=>K(j),onRestore:N=>Q(j.id),onDuplicate:N=>W(j)},null,8,["hidden","disable-more","is-owner-role","project","onArchive","onRestore","onDuplicate"])]),_:2},1032,["project","hidden"])]),_:1},8,["items"]))],64))]),_:1}),o(he,{name:"duplicate-from-project-list"},{default:r(()=>[t(m)?(i(),_(Se,{key:0,project:t(m),onDuplicate:X},null,8,["project"])):S("",!0)]),_:1})],64)}}});xe.__docgenInfo={exportName:"default",displayName:"ProjectList",description:"",tags:{},props:[{name:"hidden",required:!1,type:{name:"boolean"}},{name:"projects",required:!0,type:{name:"Array",elements:[{name:"ProjectModel"}]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Pd/PdDashboard/PageProjects/ProjectList/ProjectList.vue"]};export{xe as _};
