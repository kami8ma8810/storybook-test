import{_ as I}from"./iframe-4066d2cc.js";import{f as S,ah as $,x as w,e as i,O as b,G as s,H as a,F as y,S as r,K as t,N as c,U as _,Z as E,Q as H,L as F,M as O}from"./vue.esm-bundler-33967e91.js";import{N as P}from"./NodeCardBackground-e1c3a5e9.js";import{b as V,e as L}from"./Editor-e2ebb077.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"../sb-preview/runtime.js";import"./ModalPvLimitAlertView-cb9178ae.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";const B=S({name:"NodeCardRepeat",props:{node:{type:Object,required:!0}},components:{NodeCardBackground:P,NodeHandle:$(()=>I(()=>import("./Editor-e2ebb077.js").then(e=>e.k),["./Editor-e2ebb077.js","./vue.esm-bundler-33967e91.js","./ModalPvLimitAlertView-cb9178ae.js","./vue-i18n.cjs-bd62fc86.js","./_commonjsHelpers-042e6b4d.js","./ModalUpgradeRequired-a455cfd7.js","./BasicModal-000dc82b.js","./_plugin-vue_export-helper-c27b6911.js","./BasicModal-276b42ea.css","./PfButton-db6d6722.js","./PfIconContext-bd54ca9b.js","./ModalUpgradeRequired-1a015d77.css","./lodash-bf1bac5c.js","./_commonjs-dynamic-modules-302442b1.js","./iframe-4066d2cc.js","./PfIcon-bb1c3c10.js","./mapValues-a1d744f5.js","./ModalPvLimitAlertView-c58a5858.css","./SelectSwitch-b6107958.js","./tiptap-extension-paragraph.esm-72054cce.js","./SelectSwitch-74fee1e2.css","./draggable-203bb716.js","./ApiIcon-4990672b.js","./ApiIcon-f6bf5922.css","./useSearch-b8b0ad67.js","./Editor-f05e9ae1.css"],import.meta.url))},setup(e){const{node:o}=w(e),{findNode:h,selectedNodeId:C,draggingNode:n,updateNode:l,isUsed:m,hasParent:v}=V(),d=i(()=>o.value.args.map(p=>h(p))),u=i(()=>o.value.children.map(p=>h(p))),f=i(()=>n.value?.id===o.value.id?!1:o.value.id===C.value||o.value.children.includes(C.value)),M=()=>{n.value&&n.value.id!==o.value.id&&(l(n.value.id,{position:null}),l(o.value.id,{args:[n.value.id]}))},R=p=>{if(!n.value||n.value.id===o.value.id)return;l(n.value.id,{position:null});const k=[...o.value.children];k.splice(p,0,n.value.id),l(o.value.id,{children:k})},{nodeResult:g}=L(i(()=>o.value.id)),D=i(()=>m(o.value.id)),A=i(()=>{if(n.value)return n.value.id!==o.value.id});return{children:u,args:d,canSelectChildren:f,addChild:R,onMouseup:M,nodeResult:g,showChildren:D,isDroppable:A,onActionClick:()=>{g.value()},hasParent:v}}});const N=e=>(F("data-v-c4ab068a"),e=e(),O(),e),j=N(()=>t("svg",{width:"25",height:"25"},[t("use",{href:"#i-25-action-button"})],-1)),q=[j],G=N(()=>t("div",{class:"loop-line"},null,-1)),z={class:"container"},K=N(()=>t("div",{class:"content"},[t("span",{class:"method-label"},"FOR")],-1)),Q={key:0,class:"node-frame"},T={key:1,class:"children-container"},Z=["onMouseup"],J=["onMouseup"],W={class:"end-node"};function X(e,o,h,C,n,l){const m=b("NodeHandle"),v=b("NodeCardBackground");return s(),a("div",{class:c(["NodeCardRepeat",{canSelectChildren:e.canSelectChildren}])},[e.showChildren?(s(),a(y,{key:0},[e.hasParent(e.node.id)?r("",!0):(s(),a("button",{key:0,class:"action-button",onClick:o[0]||(o[0]=(...d)=>e.onActionClick&&e.onActionClick(...d))},q)),G],64)):r("",!0),t("div",z,[K,t("div",{class:c(["args-container",{hasArgs:e.args.length}]),onMouseup:o[1]||(o[1]=(...d)=>e.onMouseup&&e.onMouseup(...d))},[e.args[0]?(s(),a("div",Q,[_(m,{node:e.args[0]},null,8,["node"])])):r("",!0)],34),_(v,{node:e.node},null,8,["node"])]),e.showChildren?(s(),a("div",T,[(s(!0),a(y,null,E(e.children,(d,u)=>(s(),a("div",{key:d.id,class:"child-frame"},[u===0?(s(),a("div",{key:0,class:c(["child-gap",{isDroppable:e.isDroppable}]),onMouseup:f=>e.addChild(u)},null,42,Z)):r("",!0),d?(s(),H(m,{key:1,node:d},null,8,["node"])):r("",!0),t("div",{class:c(["child-gap",{isDroppable:e.isDroppable}]),onMouseup:f=>e.addChild(u+1)},null,42,J)]))),128)),e.children.length===0?(s(),a("div",{key:0,class:c(["add-child",{isDroppable:e.isDroppable}]),onMouseup:o[2]||(o[2]=d=>e.addChild(0))},null,34)):r("",!0),t("div",W,[_(v,{node:e.node},null,8,["node"])])])):r("",!0)],2)}const ke=U(B,[["render",X],["__scopeId","data-v-c4ab068a"]]);B.__docgenInfo={displayName:"NodeCardRepeat",exportName:"default",description:"",tags:{},props:[{name:"node",type:{name:"BlueprintNode"},required:!0}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/BlueprintEditor/NodeCard/NodeCardRepeat.vue"]};export{ke as default};
