import{f as w,b as f,e as g,o as F,w as x,O as C,A as t,Q as h,R as d,S as v,G as a,H as y,U as s,N as q,K as l,F as E,Z as X,V as Y,W as H,L as k,M as P,I as T,J as B,p as ee,n as te}from"./vue.esm-bundler-33967e91.js";import{u as z,a as oe}from"./ModalUpgradeRequired-a455cfd7.js";import{f as G,H as ae,I as se,J as ne,K as re,N as R,O as ce,Q as le,R as ie,W as de}from"./ModalPvLimitAlertView-cb9178ae.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";import{u as _e,B as A}from"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./vue-i18n.cjs-bd62fc86.js";import"./_commonjsHelpers-042e6b4d.js";import"./lodash-bf1bac5c.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./iframe-4066d2cc.js";import"../sb-preview/runtime.js";import"./PfIcon-bb1c3c10.js";import"./mapValues-a1d744f5.js";const V=e=>(k("data-v-d0751d5a"),e=e(),P(),e),ue=V(()=>l("div",{id:"teleport-collection-editor-overlay"},null,-1)),me=V(()=>l("div",{style:{height:"1px"},class:"border-t-1 _w-full"},null,-1)),pe={class:"_w-full"},O=w({__name:"_r_CmsCollectionEditor",emits:["close"],setup(e){const r=G("s"),i=f(r.value),{collectionSchemaContent:_,collectionSchemaContentList:o,collectionSchema:u,originSchema:c}=ae(r),{next:b,nextItem:n,prev:m,prevItem:S,routingAnimationType:L}=se(i),N=f(o.value);f(null);const J=f([]),K=g(()=>r.value===i.value),D=f(!1);return F(()=>{requestAnimationFrame(()=>{D.value=!0})}),x(r,p=>{requestAnimationFrame(()=>{i.value=p})}),x(o,p=>{N.value=p,Array.isArray(p)&&(J.value=p.map(M=>M.id))},{immediate:!0}),(p,M)=>{const W=C("PfSpacer"),j=C("PfColumn");return t(_)&&t(u)?(a(),h(j,{key:0,align:"center",class:"cms-collection-editor _absolute _bg-white",rounded:"8",shadow:"16",tabindex:"1"},{default:d(()=>[ue,D.value?(a(),y(E,{key:0},[s(Y,{mode:"out-in"},{default:d(()=>[K.value?(a(),h(j,{key:0,class:q([[t(L)&&`${t(L)}`],"collection-editor-item-scroller _relative _overflow-y-auto _px-40 _pb-64"]),h:"full",w:"full"},{default:d(()=>[s(ne,{title:t(u).name},null,8,["title"]),s(W,{direction:"column",size:"32"}),me,l("div",pe,[(a(!0),y(E,null,X(N.value,($,Z)=>(a(),h(re,{key:$.id,content:$,idx:Z},null,8,["content","idx"]))),128))])]),_:1},8,["class"])):v("",!0)]),_:1}),t(S)?(a(),h(R,{key:0,type:"prev",onClick:H(t(m),["stop"])},null,8,["onClick"])):v("",!0),t(n)?(a(),h(R,{key:1,type:"next",onClick:H(t(b),["stop"])},null,8,["onClick"])):v("",!0)],64)):v("",!0)]),_:1})):v("",!0)}}});const fe=I(O,[["__scopeId","data-v-d0751d5a"]]);O.__docgenInfo={exportName:"default",displayName:"_r_CmsCollectionEditor",description:"",tags:{},events:[{name:"close"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/_TemplateReview/_r_CmsCollectionEditor.vue"]};const he=e=>(k("data-v-8df96c4f"),e=e(),P(),e),ve={class:"o-layout-project-dashboard-header border-b-1 _relative _flex _h-64 _w-full _items-center _justify-between _bg-white _px-24"},Ce=he(()=>l("div",{class:"_flex _h-full _items-center _gap-8"},[l("div",{class:"logo"}),l("p",null,"テンプレート審査環境")],-1)),U=w({__name:"_r_LayoutProjectDashboardHeader",setup(e){const r=z(),{hasCms:i}=ce(),{defaultModelId:_}=le(),o=g(()=>r.name==="PagePdDashboardCms--review"),u=g(()=>_.value?{name:"PagePdDashboardCms--review",params:{schemaId:_.value}}:{name:"PagePdDashboardCmsTop--review"});return F(()=>{if(!i.value)throw new Error("CMSがありません")}),(c,b)=>{const n=C("router-link"),m=C("PfButtonLink");return a(),y("header",ve,[Ce,s(n,{to:t(u),class:q(["nav-link label-md-bold _flex _h-full _flex-row _items-center _justify-center _py-8 _px-24 _text-gray-600",{"router-link-active":t(o)}])},{default:d(()=>[T(B(c.$t("CMS")),1)]),_:1},8,["to","class"]),s(m,{to:{name:"editor--review"},variant:"outline",size:"sm"},{default:d(()=>[T(B(c.$t("P_DASHBOARD: design editor")),1)]),_:1})])}}});const ye=I(U,[["__scopeId","data-v-8df96c4f"]]);U.__docgenInfo={exportName:"default",displayName:"_r_LayoutProjectDashboardHeader",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/_TemplateReview/_r_LayoutProjectDashboardHeader.vue"]};const be=e=>(k("data-v-55fb30f5"),e=e(),P(),e),Se={class:"LayoutPdDashboard"},ge={class:"pd-dashboard-main"},xe={key:0,class:"_flex _h-full _items-center _justify-center"},we=be(()=>l("p",{class:"_heading-lg"},"このプロジェクトではCMSが初期化していません",-1)),ke=[we],Q=w({__name:"_r_LayoutProjectDashboard",setup(e){const r=oe(),i=z(),{initialized:_}=ie(),o=_e(),u=G("modal"),c=()=>{o.currentModalName.value!=null&&["cms-content-edit","cms-collection-edit"].includes(o.lastModalName.value)||i.query.modal&&(o.pop(),r.push({query:null}))};x(u,(n,m)=>{m&&o.pop(),n&&te(()=>{n==="content"?o.push("cms-content-edit"):n==="collection"&&o.push("cms-collection-edit")})});const b=f("opening");return ee("cmsSideNavigationStatus",b),(n,m)=>{const S=C("router-view");return a(),y("div",Se,[s(ye,{style:{zIndex:3}}),l("div",ge,[t(_)?(a(),h(S,{key:1})):(a(),y("div",xe,ke)),s(A,{name:"cms-content-edit",onClosed:c},{default:d(()=>[s(de,{onClose:c})]),_:1}),s(A,{name:"cms-collection-edit",onClosed:c},{default:d(()=>[s(fe,{onClose:c})]),_:1})])])}}});const qe=I(Q,[["__scopeId","data-v-55fb30f5"]]);Q.__docgenInfo={exportName:"default",displayName:"_r_LayoutProjectDashboard",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/_TemplateReview/_r_LayoutProjectDashboard.vue"]};export{qe as default};
