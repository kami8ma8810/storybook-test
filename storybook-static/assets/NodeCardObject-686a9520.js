import{_ as D}from"./iframe-4066d2cc.js";import{f as B,ah as j,x as O,e as c,O as b,G as a,H as i,_ as K,ad as $,K as _,F as S,Z as w,N as p,S as h,Q as E,U as H}from"./vue.esm-bundler-33967e91.js";import{N as M}from"./NodeCardBackground-e1c3a5e9.js";import{b as I,e as U}from"./Editor-e2ebb077.js";import{X as V}from"./ModalPvLimitAlertView-cb9178ae.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"../sb-preview/runtime.js";import"./ModalUpgradeRequired-a455cfd7.js";import"./BasicModal-000dc82b.js";import"./PfButton-db6d6722.js";import"./PfIconContext-bd54ca9b.js";import"./lodash-bf1bac5c.js";import"./_commonjsHelpers-042e6b4d.js";import"./vue-i18n.cjs-bd62fc86.js";import"./SelectSwitch-b6107958.js";import"./tiptap-extension-paragraph.esm-72054cce.js";import"./PfIcon-bb1c3c10.js";import"./draggable-203bb716.js";import"./ApiIcon-4990672b.js";import"./useSearch-b8b0ad67.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./mapValues-a1d744f5.js";const f=B({name:"NodeCardObject",props:{node:{type:Object,required:!0}},components:{NodeCardBackground:M,NodeHandle:j(()=>D(()=>import("./Editor-e2ebb077.js").then(e=>e.k),["./Editor-e2ebb077.js","./vue.esm-bundler-33967e91.js","./ModalPvLimitAlertView-cb9178ae.js","./vue-i18n.cjs-bd62fc86.js","./_commonjsHelpers-042e6b4d.js","./ModalUpgradeRequired-a455cfd7.js","./BasicModal-000dc82b.js","./_plugin-vue_export-helper-c27b6911.js","./BasicModal-276b42ea.css","./PfButton-db6d6722.js","./PfIconContext-bd54ca9b.js","./ModalUpgradeRequired-1a015d77.css","./lodash-bf1bac5c.js","./_commonjs-dynamic-modules-302442b1.js","./iframe-4066d2cc.js","./PfIcon-bb1c3c10.js","./mapValues-a1d744f5.js","./ModalPvLimitAlertView-c58a5858.css","./SelectSwitch-b6107958.js","./tiptap-extension-paragraph.esm-72054cce.js","./SelectSwitch-74fee1e2.css","./draggable-203bb716.js","./ApiIcon-4990672b.js","./ApiIcon-f6bf5922.css","./useSearch-b8b0ad67.js","./Editor-f05e9ae1.css"],import.meta.url))},setup(e){const{node:o}=O(e),{findNode:g,selectedNodeId:u,draggingNode:r,updateNode:l,isUsed:N,addNode:m}=I(),n=c(()=>o.value.children.map(d=>g(d))),t=c(()=>r.value?.id===o.value.id?!1:o.value.id===u.value||o.value.children.includes(u.value)),v=d=>{if(!r.value||r.value.id===o.value.id)return;l(r.value.id,{position:null});const s=[...o.value.children];s.splice(d,0,r.value.id),l(o.value.id,{children:s})},C=()=>{const d=m({id:V.generateUid(),type:"objectKey",value:"test"})[0],s=[...o.value.children,d.id];l(o.value.id,{children:s})},{nodeResult:y}=U(c(()=>o.value.id)),k=c(()=>{const d=r.value;return d&&d.type==="objectKey"&&d.id!==o.value.id});return{children:n,canSelectChildren:t,addDraggingChild:v,nodeResult:y,canDroppable:k,addKey:C}}});const G={class:"children-container"},R=["onMouseup"],q=["onMouseup"];function A(e,o,g,u,r,l){const N=b("NodeHandle"),m=b("NodeCardBackground");return a(),i("div",{class:p(["NodeCardObject",{canSelectChildren:e.canSelectChildren}])},[K(_("button",{class:"label-xs-bold _absolute _top-[-22px] _right-8 _rounded-full _bg-white _px-6 _py-1 _shadow-4 hover:_bg-gray-50",onClick:o[0]||(o[0]=(...n)=>e.addKey&&e.addKey(...n))}," + Key ",512),[[$,e.canSelectChildren]]),_("div",G,[(a(!0),i(S,null,w(e.children,(n,t)=>(a(),i("div",{key:n.id,class:"child-frame"},[t===0?(a(),i("div",{key:0,class:p(["child-gap",{canDroppable:e.canDroppable}]),onMouseup:v=>e.addDraggingChild(t)},null,42,R)):h("",!0),n?(a(),E(N,{key:1,node:n},null,8,["node"])):h("",!0),_("div",{class:p(["child-gap",{canDroppable:e.canDroppable}]),onMouseup:v=>e.addDraggingChild(t+1)},null,42,q)]))),128)),e.children.length===0?(a(),i("div",{key:0,class:p(["add-child",{canDroppable:e.canDroppable}]),onMouseup:o[1]||(o[1]=n=>e.addDraggingChild(0))},null,34)):h("",!0)]),H(m,{node:e.node},null,8,["node"])],2)}const pe=F(f,[["render",A],["__scopeId","data-v-1c9acb0c"]]);f.__docgenInfo={displayName:"NodeCardObject",exportName:"default",description:"",tags:{},props:[{name:"node",type:{name:"BlueprintNode"},required:!0}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/BlueprintEditor/NodeCard/NodeCardObject.vue"]};export{pe as default};
