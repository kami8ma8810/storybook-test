import{ag as Ae,h as G,F as Te,g as k,p as $,f as I,e as _,d as M,b as y,o as j,j as K,w as W,N as Be,Q as Le,R as H,A as U,G as Fe,U as le,K as re,Y as xe}from"./vue.esm-bundler-33967e91.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";function A(e,t,...n){if(e in t){let l=t[e];return typeof l=="function"?l(...n):l}let a=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,A),a}var ue=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ue||{}),S=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(S||{});function de({visible:e=!0,features:t=0,ourProps:n,theirProps:a,...l}){var r;let o=ce(a,n),u=Object.assign(l,{props:o});if(e||t&2&&o.static)return V(u);if(t&1){let d=(r=o.unmount)==null||r?0:1;return A(d,{[0](){return null},[1](){return V({...l,props:{...o,hidden:!0,style:{display:"none"}}})}})}return V(u)}function V({props:e,attrs:t,slots:n,slot:a,name:l}){var r,o;let{as:u,...d}=pe(e,["unmount","static"]),i=(r=n.default)==null?void 0:r.call(n,a),m={};if(a){let g=!1,s=[];for(let[c,h]of Object.entries(a))typeof h=="boolean"&&(g=!0),h===!0&&s.push(c);g&&(m["data-headlessui-state"]=s.join(" "))}if(u==="template"){if(i=fe(i??[]),Object.keys(d).length>0||Object.keys(t).length>0){let[g,...s]=i??[];if(!Me(g)||s.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${l} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(d).concat(Object.keys(t)).map(f=>f.trim()).filter((f,v,T)=>T.indexOf(f)===v).sort((f,v)=>f.localeCompare(v)).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`));let c=ce((o=g.props)!=null?o:{},d),h=Ae(g,c);for(let f in c)f.startsWith("on")&&(h.props||(h.props={}),h.props[f]=c[f]);return h}return Array.isArray(i)&&i.length===1?i[0]:i}return G(u,Object.assign({},d,m),{default:()=>i})}function fe(e){return e.flatMap(t=>t.type===Te?fe(t.children):[t])}function ce(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let a of e)for(let l in a)l.startsWith("on")&&typeof a[l]=="function"?(n[l]!=null||(n[l]=[]),n[l].push(a[l])):t[l]=a[l];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(a=>[a,void 0])));for(let a in n)Object.assign(t,{[a](l,...r){let o=n[a];for(let u of o){if(l instanceof Event&&l.defaultPrevented)return;u(l,...r)}}});return t}function st(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function pe(e,t=[]){let n=Object.assign({},e);for(let a of t)a in n&&delete n[a];return n}function Me(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let ke=0;function Ie(){return++ke}function Pe(){return Ie()}function oe(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let ve=Symbol("Context");var b=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(b||{});function Ne(){return me()!==null}function me(){return k(ve,null)}function He(e){$(ve,e)}var Ue=Object.defineProperty,Ve=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,se=(e,t,n)=>(Ve(e,typeof t!="symbol"?t+"":t,n),n);class Re{constructor(){se(this,"current",this.detect()),se(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}let De=new Re;function Q(){let e=[],t={addEventListener(n,a,l,r){return n.addEventListener(a,l,r),t.add(()=>n.removeEventListener(a,l,r))},requestAnimationFrame(...n){let a=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(a))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let a=setTimeout(...n);t.add(()=>clearTimeout(a))},style(n,a,l){let r=n.style.getPropertyValue(a);return Object.assign(n.style,{[a]:l}),this.add(()=>{Object.assign(n.style,{[a]:r})})},group(n){let a=Q();return n(a),this.add(()=>a.dispose())},add(n){return e.push(n),()=>{let a=e.indexOf(n);if(a>=0)for(let l of e.splice(a,1))l()}},dispose(){for(let n of e.splice(0))n()}};return t}function qe(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function R(e,...t){e&&t.length>0&&e.classList.add(...t)}function F(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Y=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Y||{});function We(e,t){let n=Q();if(!e)return n.dispose;let{transitionDuration:a,transitionDelay:l}=getComputedStyle(e),[r,o]=[a,l].map(u=>{let[d=0]=u.split(",").filter(Boolean).map(i=>i.includes("ms")?parseFloat(i):parseFloat(i)*1e3).sort((i,m)=>m-i);return d});return r!==0?n.setTimeout(()=>t("finished"),r+o):t("finished"),n.add(()=>t("cancelled")),n.dispose}function ie(e,t,n,a,l,r){let o=Q(),u=r!==void 0?qe(r):()=>{};return F(e,...l),R(e,...t,...n),o.nextFrame(()=>{F(e,...n),R(e,...a),o.add(We(e,d=>(F(e,...a,...t),R(e,...l),u(d))))}),o.add(()=>F(e,...t,...n,...a,...l)),o.add(()=>u("cancelled")),o.dispose}function E(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let X=Symbol("TransitionContext");var Ye=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ye||{});function ze(){return k(X,null)!==null}function Ge(){let e=k(X,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Ke(){let e=k(Z,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Z=Symbol("NestingContext");function P(e){return"children"in e?P(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function he(e){let t=y([]),n=y(!1);j(()=>n.value=!0),K(()=>n.value=!1);function a(r,o=S.Hidden){let u=t.value.findIndex(({id:d})=>d===r);u!==-1&&(A(o,{[S.Unmount](){t.value.splice(u,1)},[S.Hidden](){t.value[u].state="hidden"}}),!P(t)&&n.value&&e?.())}function l(r){let o=t.value.find(({id:u})=>u===r);return o?o.state!=="visible"&&(o.state="visible"):t.value.push({id:r,state:"visible"}),()=>a(r,S.Unmount)}return{children:t,register:l,unregister:a}}let ge=ue.RenderStrategy,z=I({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:a,expose:l}){let r=y(0);function o(){r.value|=b.Opening,t("beforeEnter")}function u(){r.value&=~b.Opening,t("afterEnter")}function d(){r.value|=b.Closing,t("beforeLeave")}function i(){r.value&=~b.Closing,t("afterLeave")}if(!ze()&&Ne())return()=>G(Xe,{...e,onBeforeEnter:o,onAfterEnter:u,onBeforeLeave:d,onAfterLeave:i},a);let m=y(null),g=_(()=>e.unmount?S.Unmount:S.Hidden);l({el:m,$el:m});let{show:s,appear:c}=Ge(),{register:h,unregister:f}=Ke(),v=y(s.value?"visible":"hidden"),T={value:!0},C=Pe(),B={value:!1},J=he(()=>{!B.value&&v.value!=="hidden"&&(v.value="hidden",f(C),i())});j(()=>{let w=h(C);K(w)}),M(()=>{if(g.value===S.Hidden&&C){if(s.value&&v.value!=="visible"){v.value="visible";return}A(v.value,{hidden:()=>f(C),visible:()=>h(C)})}});let ee=E(e.enter),te=E(e.enterFrom),we=E(e.enterTo),ne=E(e.entered),_e=E(e.leave),Se=E(e.leaveFrom),Oe=E(e.leaveTo);j(()=>{M(()=>{if(v.value==="visible"){let w=oe(m);if(w instanceof Comment&&w.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Ee(w){let N=T.value&&!c.value,O=oe(m);!O||!(O instanceof HTMLElement)||N||(B.value=!0,s.value&&o(),s.value||d(),w(s.value?ie(O,ee,te,we,ne,L=>{B.value=!1,L===Y.Finished&&u()}):ie(O,_e,Se,Oe,ne,L=>{B.value=!1,L===Y.Finished&&(P(J)||(v.value="hidden",f(C),i()))})))}return j(()=>{W([s],(w,N,O)=>{Ee(O),T.value=!1},{immediate:!0})}),$(Z,J),He(_(()=>A(v.value,{visible:b.Open,hidden:b.Closed})|r.value)),()=>{let{appear:w,show:N,enter:O,enterFrom:L,enterTo:et,entered:tt,leave:nt,leaveFrom:at,leaveTo:lt,...ae}=e,Ce={ref:m},je={...ae,...c.value&&s.value&&De.isServer?{class:Be([n.class,ae.class,...ee,...te])}:{}};return de({theirProps:je,ourProps:Ce,slot:{},slots:a,attrs:n,features:ge,visible:v.value==="visible",name:"TransitionChild"})}}}),Qe=z,Xe=I({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:a}){let l=me(),r=_(()=>e.show===null&&l!==null?(l.value&b.Open)===b.Open:e.show);M(()=>{if(![!0,!1].includes(r.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let o=y(r.value?"visible":"hidden"),u=he(()=>{o.value="hidden"}),d=y(!0),i={show:r,appear:_(()=>e.appear||!d.value)};return j(()=>{M(()=>{d.value=!1,r.value?o.value="visible":P(u)||(o.value="hidden")})}),$(Z,u),$(X,i),()=>{let m=pe(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),g={unmount:e.unmount};return de({ourProps:{...g,as:"template"},theirProps:{},slot:{},slots:{...a,default:()=>[G(Qe,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...g,...m},a.default)]},attrs:{},features:ge,visible:o.value==="visible",name:"Transition"})}}});const x=y(new Map),p=y([]),D=y(null),q=y(null),Ze=(e,t)=>{for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1},ye=()=>{const e=(s,c)=>{x.value.set(s,c)},t=s=>{x.value.delete(s)},n=(s,c=!1,h={})=>{if(!x.value.has(s)||p.value.some(v=>v.name===s))return;const f=p.value.slice().reverse().find(v=>v.show!==-1);f&&(f.show=c?1:0),p.value.push({name:s,overlay:c,show:2,options:h}),D.value=s,q.value=null},a=s=>{l(),n(s)},l=()=>{const s=Ze(p.value,f=>f.show!=-1);if(s<0)return;const c=p.value[s],h=p.value[s-1];c&&(c.show=-1),h&&(h.show=2),s!==p.value.length-1&&p.value.splice(s,1),D.value=null},r=()=>{p.value.splice(0,p.value.length-1),l()},o=()=>{p.value=[]},u=s=>{s.show===-1&&(p.value=p.value.filter(({name:c})=>c!==s.name),q.value=s.name)},d=_(()=>p.value.flatMap(s=>{const c=x.value.get(s.name);return c?{...s,ctx:c}:[]})),i=_(()=>p.value[p.value.length-1]?.name),m=_(()=>{const s=p.value.length===1?0:p.value.length-2;return p.value[s]?.name}),g=_(()=>p.value[p.value.length-1]?.options);return{onLeave:u,modalList:d,currentModalName:i,currentModalOptions:g,lastModalName:m,registor:e,unregistor:t,push:n,pop:l,clear:o,lastOpened:D,lastClosed:q,replace:a,popAll:r}},Je=I({props:{name:{type:String}},emits:["closed","opened"],setup(e,t){const{registor:n,unregistor:a,lastOpened:l,lastClosed:r}=ye();j(()=>{e.name!=null&&n(e.name,{attrs:t.attrs,slots:t.slots})}),K(()=>{e.name!=null&&a(e.name)}),W(l,o=>{o===e.name&&requestAnimationFrame(()=>{t.emit("opened")})}),W(r,o=>{o===e.name&&requestAnimationFrame(()=>{t.emit("closed")})})},render(){return null}}),be=I({__name:"BasicModal",props:{initialClass:{type:String,default:""},dismissAll:{type:Boolean,default:!1},disableBackdrop:{type:Boolean,default:!1}},setup(e){const t=e,{pop:n,popAll:a}=ye(),l=y(!1),r=()=>{t.dismissAll?a():n()},o=()=>{},u=i=>{l.value=i.target===i.currentTarget},d=i=>{t.disableBackdrop||l.value&&i.target===i.currentTarget&&r()};return(i,m)=>(Fe(),Le(U(Je),null,{default:H(()=>[le(U(z),{as:"template",enter:"_duration-[300ms] _ease-out","enter-from":"_opacity-0","enter-to":"",leave:"_duration-[300ms] _ease-out","leave-from":"","leave-to":"_opacity-0"},{default:H(()=>[re("div",{class:"modal-backdrop _absolute _inset-0 _m-auto",style:{},onClick:o})]),_:1}),le(U(z),{as:"template",enter:"_duration-[300ms] _ease-out","enter-from":`_opacity-0 _translate-y-[40px] ${e.initialClass}`,"enter-to":"",leave:"_duration-[300ms] _ease-out","leave-from":"","leave-to":`_opacity-0 _translate-y-[40px] ${e.initialClass}`},{default:H(()=>[re("div",{class:"_z-10 _flex _flex-1 _items-center _justify-center",onPointerdown:u,onPointerup:d},[xe(i.$slots,"default",{},void 0,!0)],32)]),_:3},8,["enter-from","leave-to"])]),_:3}))}});const it=$e(be,[["__scopeId","data-v-70754805"]]);be.__docgenInfo={exportName:"default",displayName:"BasicModal",description:"",tags:{},props:[{name:"initialClass",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"dismissAll",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disableBackdrop",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/common/BasicModal.vue"]};export{it as B,de as H,st as K,Je as M,ue as N,Xe as S,pe as T,A as a,He as b,De as c,z as h,b as l,oe as o,me as p,Q as r,Pe as t,ye as u};
