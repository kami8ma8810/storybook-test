import{e as S,E as rd,b as N,x as Oe,w as ie,f as A,h as w,o as Ut,j as od,ai as id,aa as ar,V as sd,g as bs,p as Kt,A as bt,H as se,U as gn,W as ad,a8 as _s,S as lr,G as Z,Q as Gn,O as yn,a2 as ld,n as dd,F as _o,Z as wo,P as Co,J as Jn,K as Ve,N as vn,L as ud,M as cd}from"./vue.esm-bundler-33967e91.js";import{G as ge,$ as So,h as hd,cL as pd,cM as fd,ac as ws,ck as ii,s as md,ad as kr,X as Ge,cN as gd,cO as yd,cf as Kn,a2 as Cs,cP as Vr,cD as dr,cQ as Ss,bt as vd,a0 as ks,b8 as bd,cR as _d,bj as wd,bT as Cd,aG as Sd,bf as kd,cS as xd,bk as xs,b0 as si,b1 as Td,cg as Zn,aa as Ad,ce as Ed,Z as ko,ar as Ts,a1 as $d,cT as Id,ap as Md,af as As,Y as Nd}from"./ModalPvLimitAlertView-cb9178ae.js";import{u as Ld}from"./ModalUpgradeRequired-a455cfd7.js";import{l as ur}from"./lodash-bf1bac5c.js";import{N as z,g as Es,E as lt,P as Se,a as ye,F as $,D as $s,T as B,M as Rd,S as T,n as Y,b as H,c as Fe,V as Q,d as Dd,e as ai,f as Pd,H as Od,h as Fd,B as Ud,m as Ht,i as zt,C as Hd,I as zd,L as Bd,j as Vd,U as qd,k as jd,l as Wd,o as Gd,t as it,p as qr,q as Je,r as Jd,s as Kd,u as Zd,O as Xd,v as Yd,R as Is,w as we,x as Ms,A as Qd,y as eu,z as tu,G as nu,J as ru,K as ou,Q as iu,W as su,X as au,Y as lu,Z as du,_ as uu,$ as cu,a0 as hu}from"./tiptap-extension-paragraph.esm-72054cce.js";import{u as pu}from"./vue-i18n.cjs-bd62fc86.js";import{P as li}from"./PfIcon-bb1c3c10.js";import{_ as ve}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as Ne}from"./iframe-4066d2cc.js";const Ns={stringToGapObj(e){if(!e)return{horizontal:0,vertical:0,length:1};const t=e.split(" ");if(t.length===1){const o=parseInt(t[0],10);return{horizontal:o,vertical:o,length:1}}const[n,r]=t.map(o=>parseInt(o,10));return{horizontal:r,vertical:n,length:2}},toString(e){return e.length===1?`${e.vertical}px`:`${e.vertical}px ${e.horizontal}px`},hasGap(e){return e!==void 0}},fu=()=>{const e=ge(),t=S(()=>e.state.studioProduct.studioProduct.info?.baseWidth??1280),n=S(()=>e.state.studioEditor.screenSize),r=S(()=>n.value.width),o=S(()=>n.value.height),i=(l,d=!1,u)=>{d&&(e.dispatch("studioEditor/updateIsAnimating",{isAnimating:!0}),setTimeout(()=>{e.dispatch("studioEditor/updateIsAnimating",{isAnimating:!1})},540));const c={width:l,height:o.value};e.dispatch("studioEditor/updateScreenSize",{screenSize:c});const h=e.state.database.projectId;a(h,u)},s=l=>(l-420)*220/950,a=So(500,(l,d)=>{hd.DesignEditorScreenSizeChanged({projectId:l,type:d})});return{baseWidth:t,width:r,height:o,updateWidth:i,getHue:s}},Ls=(e,t,n)=>{const r=e.split(".");if(r.length>1){const o=ur.cloneDeep(n[r[0]]);let i=o;return r.slice(1).forEach((s,a,l)=>{l.length-1===a?i[s]=t:i=i[s]}),[r[0],o]}return[e,t]},xo=e=>{const t=ge();return{add:(c,h,p=[])=>{t.dispatch("studioDomDef/addDef",{def:c,stateValue:h,indexChain:p,studioDom:e.value.studioDom})},move:(c,h,p=[])=>{t.dispatch("studioDomDef/moveDef",{fromIndex:c,toIndex:h,indexChain:p,studioDom:e.value.studioDom})},remove:(c,h=[],p)=>{t.dispatch("studioDomDef/removeDef",{key:c,indexChain:h,studioDom:e.value.studioDom,isStaged:p})},renameKey:(c,h,p=[])=>{t.dispatch("studioDomDef/renameKey",{key:c,oldKey:h,indexChain:p,studioDom:e.value.srcStudioDom})},modifyDef:c=>{t.dispatch("studioDomDef/modifyDef",{def:c,studioDom:e.value.studioDom})},modifyState:(c,h)=>{const[p,f]=Ls(c,h,e.value.state);t.dispatch("studioDom/modifyByStudioDom",{key:`state.${p}`,val:f,isStaged:!0,studioDom:e.value.srcStudioDom})},modifyProp:(c,h)=>{const p={...e.value.props,[c]:h};Object.keys(p).forEach(f=>p[f]===void 0&&delete p[f]),t.dispatch("studioDom/modifyProps",{val:p})},confirm:()=>{t.dispatch("studioAction/confirm")},removeProps:(c,h)=>{const p={...e.value.props};delete p[c],Object.keys(p).forEach(f=>p[f]===void 0&&delete p[f]),t.dispatch("studioDom/modifyProps",{val:p,isStaged:h})}}},mu=e=>{const t=ge();return{add:(d,u,c=[])=>{t.dispatch("studioPageDef/addDef",{def:d,stateValue:u,indexChain:c,studioPage:e.value.studioPage})},move:(d,u,c=[])=>{t.dispatch("studioPageDef/moveDef",{fromIndex:d,toIndex:u,indexChain:c,studioPage:e.value.studioPage})},remove:(d,u=[])=>{t.dispatch("studioPageDef/removeDef",{key:d,indexChain:u,studioPage:e.value.studioPage})},renameKey:(d,u,c=[])=>{t.dispatch("studioPageDef/renameKeyDef",{key:d,oldKey:u,studioPage:e.value.studioPage})},modifyDef:d=>{t.dispatch("studioPageDef/modifyDef",{def:d,studioPage:e.value.studioPage})},modifyState:(d,u)=>{const[c,h]=Ls(d,u,e.value.state);t.dispatch("studioPage/modifySelectedPage",{key:`state.${c}`,val:h,isStaged:!0})},confirm:()=>{t.dispatch("studioAction/confirm")}}};function gu(e,t=!0,n){return(r,o,i)=>{r.doc.descendants((s,a)=>{if(!s.isText)return;const{marks:l}=s;l.filter(d=>d.type.name==="comments"&&ur.isEqual(d.attrs,n)).forEach(()=>{const d=a,u=d+s.nodeSize,c=i.removeMark(d,u,e).setMeta("addToHistory",t);o(c)})})}}function xr(e){return e.path.find(t=>t?.isBlock&&t?.attrs.blockUid)}function $e(e,t){let n=-1;return e.descendants((r,o)=>{if(t?.attrs?.blockUid===r?.attrs?.blockUid)return n=o,!1}),n}function Rs(e,t){return e.isBlock?(e?.content?.content).find(o=>o.isBlock?o?.attrs?.blockUid===t?.attrs?.blockUid?!0:Rs(o,t):!1):!1}function Ds(e,t,n){if(!e.isBlock)return!1;const r=e?.content?.content,o=r.findIndex((i,s)=>{if(!i.isBlock)return!1;if(i.eq(t))return!0;if(i.type.name==="table")return!t?.attrs?.blockUid||!Ps(i).includes(t.attrs.blockUid)?!1:!!n.querySelector(`[data-uid="${t.attrs.blockUid}"]`);const a=n.childNodes[s];return a?Ds(i,t,a):!1});return o===-1?!1:{levelOneDom:n.childNodes[o],levelOneNode:r[o]}}function Ps(e){const t=e?.attrs?.blockUid,n=rn(e);return[t].concat(n.map(r=>r?.node?.attrs?.blockUid)).filter(Boolean)}function yu(e){return e.content.content.map(n=>n.isBlock&&n.attrs.blockUid).filter(Boolean)}function di(e,t){const n=yu(e.doc),r=Ps(t.doc);return n.filter(o=>!r.some(i=>i===o))}function vu(e,t){return e?.attrs?.blockUid===t?.attrs?.blockUid&&Number(e?.attrs?.time)===Number(t?.attrs?.time)}function Os(e,t){if(!e.eq(t))return!1;const n=e.content.content,r=t.content.content;return n.length!==r.length?!1:n.every((o,i)=>vu(o,r[i]))}function dy(e,t){const{selection:n}=e,{$from:r}=n,o=Es(r,t);let i,s;return o&&(i=o.from,s=o.to),i||(i=n.from),s||(s=n.to),e.doc.textBetween(i,s)||""}const rn=(e,t=!0)=>{if(!e)throw new Error('Invalid "node" parameter');const n=[];return e.descendants((r,o)=>{if(n.push({node:r,pos:o}),!t)return!1}),n};function bu(e){return e&&typeof e=="object"&&!Array.isArray(e)}function st(e){return bu(e)&&e instanceof z}const uy=""+new URL("i-13-href-blue-050ccba1.svg",import.meta.url).href,cy=""+new URL("i-13-link-blue-5f5fe387.svg",import.meta.url).href,ui={isRow(e){return e==="row"||e=="row-reverse"},isColumn(e){return e?e==="column"||e=="column-reverse":!0},isReverse(e){return e?e.includes("reverse"):!1},toPositionDirection(e){return e==="column"?"top":e==="row"?"left":e==="column-reverse"?"bottom":e==="row-reverse"?"right":"top"}},_u=()=>{const e=ge(),t=S(()=>e.state.studioEditor.isAiMode),n=S(()=>e.state.studioEditor.isAiEditing);return{isAiMode:t,isAiEditing:n,toggleAiMode:()=>{e.commit("studioEditor/updateIsAiMode",!t.value)},updateAiMode:s=>{e.commit("studioEditor/updateIsAiMode",s)},updateAiEditing:s=>{e.commit("studioEditor/updateIsAiEditing",s)}}},ci={isWrap(e){return e==="wrap"}},hy=e=>{const t={angle:180,colorStops:[]},n=/linear-gradient\((.+)\)/,r=e.match(n);if(r){const o=r[1].split(/,(?![-+0-9,. ]+\))/);/^[+-]?[0-9]+(\.[0-9]+)?deg|^0$/i.test(o[0])&&(t.angle=Number(o[0].replace(/deg/,"")),o.shift()),o.forEach(i=>{const s=wu(),a="[+-]?[0-9]+(\\.[0-9]+)?",l=new RegExp(`^ *(${s}) *(${a}%|0)? *$`,"i"),d=i.match(l);if(d)t.colorStops.push({color:d[1],percentage:d[3]?parseFloat(d[3]):void 0});else return null})}return t},py=e=>{const t=[];e.angle!==180&&t.push(`${e.angle}deg`);for(const n of e.colorStops)t.push(n.percentage!==void 0?`${n.color} ${n.percentage}%`:n.color);return`linear-gradient(${t.join(", ")})`},wu=()=>{const e="[+-]?[0-9]+",t="[+-]?[0-9]+(\\.[0-9]+)?";return["#[0-9a-f]{3}","#[0-9a-f]{6}",`rgb\\( *${e} *, *${e} *, *${e} *\\)`,`rgba\\( *${e} *, *${e} *, *${e} *, *${t} *\\)`,"aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent"].join("|")},Cu=e=>e.match(/(linear|radial)-gradient/g)?.length===1,Su=e=>/linear-gradient(.+)/.test(e),ku=e=>/radial-gradient(.+)/.test(e),Fs=e=>Cu(e)&&(Su(e)||ku(e)),xu=e=>{const n=[[0,0,0,0],[0,1,0,1],[0,1,2,1],[0,1,2,3]][e.length-1];return n?n.map(r=>e[r]):[0,0,0,0]},Tu=e=>{const t=(e||"").trim().split(/\s+/).map(s=>{if(!/px$/.test)return 0;const a=parseInt(s,10);return isNaN(a)?0:a}),[n,r,o,i]=xu(t);return{top:n,right:r,bottom:o,left:i}},Us={left:"flex-start",right:"flex-end",center:"center",justify:"space-between"},Xn=(e,t)=>new RegExp(t).test(e||""),Au=(e,t)=>{if(!e)return 0;const n=Tu(e);return t==="horizontal"?n.left+n.right:n.top+n.bottom},Ze=(e,t,n,r)=>{const o=Au(t,n);if(r){const i=100/parseFloat(e),s=r[n]*(i-1)/i;return`calc(${e} - ${o+s}px)`}return o===0?e:`calc(${e} - ${o}px)`},Eu=(e,t)=>{const n={};return Xn(e.width,"%")?n.width=Ze(e.width,e.margin,"horizontal"):n.maxWidth=Ze("100%",e.margin,"horizontal"),Xn(e.height,"%")&&(n.height=Ze(e.height,e.margin,"vertical")),/^(text|file)$/.test(t??"")&&e.textAlign&&(n.justifyContent=Us[e.textAlign]),{...e,...n}};function $u(e,t,n){const r=e.parent?.conditionalStyle(n),o=Ns.stringToGapObj(r?.gap);return Xn(t.width,"%")?ui.isRow(r?.flexDirection)||ci.isWrap(r?.flexWrap)?t.width=Ze(t.width,t.margin,"horizontal",o):t.width=Ze(t.width,t.margin,"horizontal"):t.maxWidth=Ze("100%",t.margin,"horizontal"),Xn(t.height,"%")&&(ui.isColumn(r?.flexDirection)||ci.isWrap(r?.flexWrap)?t.height=Ze(t.height,t.margin,"vertical",o):t.height=Ze(t.height,t.margin,"vertical")),/^(text|file)$/.test(e.contentType??"")&&t.textAlign&&(t.justifyContent=Us[t.textAlign]),t=To(t,e.contentType),t}const To=(e,t)=>{if(!t||!pd.includes(t))return e;t==="richText"&&(e=Object.keys(e).filter(r=>rd(e[r])).reduce((r,o)=>({...r,[o]:{...To(e[o],"richText")}}),e));const{color:n}=e;return n&&typeof n=="string"&&Fs(n)?{...e,background:n,color:"transparent",backgroundClip:"text","-webkit-background-clip":"text"}:e},Iu=(e,t,n,r=void 0)=>{if(!Object.keys(e||{}).length)return{};const o=fd(e,t,!1,r);return To(Eu(o,n),n)},fy=e=>{const t=e.trim();if(t==="transparent")return!0;const n=/^#[0-9a-fA-F]{6}$/g,r=t.match(n);if(r&&r.length>0)return!0;const o=/^rgba\([^()]+?\)$/g,i=t.match(o);if(i&&i.length>0)return!0;const s=/^rgb\([^()]+?\)$/g,a=t.match(s);return a!=null&&a.length>0},Mu=()=>({getColor:(t,n=1)=>t.name==="mini"?`hsla(337deg, 100%, 62%, ${n})`:t.name==="mobile"?`hsla(28deg, 90%, 50%, ${n})`:t.name==="tablet"?`hsla(111deg, 84%, 48%, ${n})`:t.name==="small"?`hsla(171deg, 85%, 47%, ${n})`:"var(--text-color-1)"}),Nu=[{name:"base",maxWidth:1280,recommended:1280,desc:"base design",active:!0,isBase:!0},{name:"small",maxWidth:1140,recommended:1140,desc:"for small desktop",active:!1},{name:"tablet",maxWidth:840,recommended:840,desc:"for tablet devices",active:!1},{name:"mobile",maxWidth:540,recommended:540,desc:"for mobile devices",active:!1},{name:"mini",maxWidth:320,recommended:320,desc:"for minimum devices",active:!1}],$t=50,Lu=()=>{const{baseWidth:e}=fu(),{getColor:t}=Mu(),n=ge(),r=S(()=>n.state.studioEditor.breakPoints),o=S(()=>Nu.map(m=>{const g=r.value.find(v=>v.name===m.name);return m.isBase?{...m,maxWidth:e.value,active:!0}:g?{...m,...g,active:!0}:m})),i=S(()=>{const m=n.getters["studioEditor/responsiveCondition"];return m?m.replace("@",""):"base"}),s=m=>{m.name!=="base"&&(n.dispatch("studioAction/toggleResponsive",{responsive:m}),r[m.name]&&f(m),p(),n.dispatch("studioAction/confirm"))},a=m=>o.value.find(({name:g})=>g===m.name),l={base:{min:320,max:1920},small:{min:991,max:1280},tablet:{min:691,max:990},mobile:{min:361,max:690},mini:{min:320,max:360}},d=m=>m.isBase?Math.min(...r.value.filter(({maxWidth:g})=>g>m.maxWidth).map(({maxWidth:g})=>g-1),l.base.max):l[m.name].max,u=m=>m.isBase?Math.max(...r.value.filter(({maxWidth:g})=>g<m.maxWidth).map(({maxWidth:g})=>g+$t),l.base.min):l[m.name].min,c=m=>{const g=a(m),v=d(g),y=u(g),b={name:m.name,maxWidth:Math.min(Math.max(y,m.maxWidth),v)};if(b.name==="base"){n.dispatch("studioAction/modifyBaseWidth",{width:b.maxWidth});return}n.dispatch("studioAction/modifyBreakPoint",{bp:b}),f(b),p()},h=m=>{const g=a(m),v=d(g);return u(g)<=m.maxWidth&&m.maxWidth<=v},p=()=>{const m=Math.max(...r.value.map(({maxWidth:g})=>g))+$t;m<e.value||n.dispatch("studioAction/modifyBaseWidth",{width:m})},f=m=>{const g=r.value.filter(({name:y})=>y!==m.name).find(({maxWidth:y})=>m.maxWidth+$t>=y&&y>=m.maxWidth),v=r.value.filter(({name:y})=>y!==m.name).find(({maxWidth:y})=>m.maxWidth>=y&&y>=m.maxWidth-$t);g&&n.dispatch("studioAction/modifyBreakPoint",{bp:{...g,maxWidth:Math.min(m.maxWidth+$t,1920)}}),v&&n.dispatch("studioAction/modifyBreakPoint",{bp:{...v,maxWidth:Math.max(m.maxWidth-$t,320)}})};return{breakPoints:r,responsiveItems:o,current:i,toggleActive:s,modifyBreakPoint:c,getColor:t,validate:h,getMax:d,getMin:u}},Ru=ws("pasteViewStore",()=>{const e=N(1440),{responsiveItems:t}=Lu(),n=S(()=>t.value.filter(o=>o.active)),r=S(()=>n.value.filter(o=>!o.isBase&&o.maxWidth>=e.value-100).sort((o,i)=>o.maxWidth-i.maxWidth).map(o=>`@${o.name}`));return{canvasWidth:e,conditions:r}}),Du=()=>{const e=ge(),t=Ld(),n=S(()=>e.getters["studioSelection/currentPage"]),r=S(()=>{const a=t.query.slug||"";return ii.replaceSlug(n.value.id,a)}),o=S(()=>ii.replaceSlug(n.value.id,"")),i=S(()=>e.state.studioPage.studioPages.map(l=>String(l.id)));return{currentPath:r,currentPathWithoutSlug:o,pathList:i,isLinkActive:a=>{if(!a.isLink)return!1;const{action:l,style:d}=a.studioDom;if(!l?.val)return!1;const u=l.val.replace(/#.*$/,"");return d?.["&link-active"]?.__includeChildren?new RegExp(`^${u}`).test(r.value):u===r.value}}},Pu=e=>{const t=l=>l.endsWith("deg")||l.endsWith("grad")||l.endsWith("rad")||l.endsWith("turn"),n=l=>l.startsWith("to "),o=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,(?![^(]*\))(?![^"']*["'](?:[^"']*["'][^"']*["'])*[^"']*$)/).map(l=>l.trim());let i=null,s=null,a=[];return t(o[0])?(i=o[0],a=o.slice(1)):n(o[0])?(s=o[0],a=o.slice(1)):(i="180deg",a=o),{type:"linear",angle:i,toSideOrCorner:s,colorStops:a.map(l=>{const d=l.trim().match(/^(?<color>.+)(\s+(?<percentage>[0-9.]+%))$/);if(d){const u=d.groups?.color,c=d.groups?.percentage??null;return{color:u,position:c}}else return{color:l,position:null}}).filter(l=>l!=null)}},Ou=12,Ln=e=>`--g-color-${e}`,Rn=e=>`--g-position-${e}`,hi=()=>"--g-angle",Hs=e=>{let t=ur.cloneDeep(e);if(t=Object.keys(t).filter(n=>typeof t[n]=="object").reduce((n,r)=>({...n,[r]:{...Hs(t[r])}}),t),typeof t.background=="string"&&Fs(t.background)){const n=Pu(t.background);if(n){let r=0;for(const i of n.colorStops){const{color:s,position:a}=i;t[Ln(r)]=s,t[Rn(r)]=a||(r===0?"0%":"100%"),r++}for(;r<Ou;++r)t[Ln(r)]=t[Ln(n.colorStops.length-1)],t[Rn(r)]=t[Rn(n.colorStops.length-1)];let o=[];n.angle?(t[hi()]=n.angle,o.push(`var(${hi()})`)):n.toSideOrCorner&&o.push(n.toSideOrCorner),o=o.concat(n.colorStops.map((i,s)=>`var(${Ln(s)}) var(${Rn(s)})`)),t.background=`linear-gradient(${o.join(", ")})`}}return t},q={renderDom:{required:!0,type:Object,default:()=>{}},role:{required:!1,type:String},index:{required:!1,type:Number}},j=e=>{const t=ge(),{conditions:n}=md(Ru()),{renderDom:r,role:o,index:i}=Oe(e),{isLinkActive:s}=Du(),{isAiMode:a}=_u(),l=N(!1),d=S(()=>t.state.studioEditor.conditions),u=S(()=>t.state.studioEditor.isHandleHolding),c=S(()=>({"data-r":r.value.renderId,[`data-s-${r.value.studioDom.uuid}`]:"",...r.value.studioDom.attrs})),h=S(()=>{const _=r.value.tag;return _==="label"?"div":_}),p=S(()=>{const _=t.getters["studioEditor/pseudoConditions"][0];return _&&l.value?_.replace(":",""):""}),f=S(()=>t.getters["studioSelection/selecteingRenderIdMap"]),m=S(()=>t.state.studioEditor.isAnimating),g=S(()=>{const _=n.value,C=[],k=r.value.studioDom.style||{};if(o.value!=="template"){l.value&&C.push(...t.getters["studioEditor/selectedConditions"]),/&appear/.test(d.value[0])&&r.value.checkAncestors(M=>!!f.value[M.renderId])&&C.push(d.value[0]);const E=t.state.studioEditor.conditionRootRenderId,R=E===r.value.renderId,I=()=>r.value.checkAncestors(({renderId:M})=>M===E);t.getters["studioEditor/hoverConditions"].length>0?R&&k[":hover"]?C.push(":hover"):k["in:hover"]&&I()&&C.push("in:hover"):t.getters["studioEditor/booleanConditions"].length>0?(R||I())&&C.push(...t.getters["studioEditor/booleanConditions"]):t.getters["studioEditor/linkActiveConditions"].length>0&&(R&&k["&link-active"]?C.push("&link-active"):k["in&link-active"]&&I()&&C.push("in&link-active"))}if(r.value.isFirstNotSlotChild&&C.push(":first-child"),k["in:first-child"]){const E=I=>{const M=I.studioDom.style?.[":first-child"];return!!(M&&Object.keys(M).length)};r.value.findFromAncestors(E)?.indexList[0]===0&&C.push("in:first-child")}return s(r.value)&&C.push("&link-active"),r.value.checkAncestors(E=>s(E))&&C.push("in&link-active"),o.value==="figma"?_.forEach(E=>{C.push(E)}):C.push(...t.getters["studioEditor/responsiveConditions"]),C}),v=S(()=>r.value.rm),y=(_,C=!1)=>C?kr(_,v.value,!1,""):kr(_,v.value),b=_=>{if(_==null)return{};const C=JSON.stringify(_),k=kr(C,v.value);return JSON.parse(k)},x=S(()=>{const _=r.value.studioDom,C=m.value||a.value?{}:{transitionDelay:"0ms",transitionDuration:"0ms"};let k;const E=[...new Set(g.value)],R=r.value.parent;return Ns.hasGap(R?.conditionalStyle(E).gap)?k={...$u(r.value,b(r.value.conditionalStyle(E)),E),...C}:k={...Iu(b(_.style),E,_.content?.type,r.value.rm),...C},k=Hs(k),{borderTop:k.border,borderRight:k.border,borderBottom:k.border,borderLeft:k.border,...k}});return ie(f,_=>{l.value=!!_[r.value.renderId]},{immediate:!0}),{isSelected:l,conditions:d,isHandleHolding:u,attrs:c,tagName:h,pseudoClass:p,selecteingRenderIdMap:f,isAnimating:m,domConditions:g,style:x,rm:v,compileTemplate:y,compileObject:b}},Ao=e=>S(()=>{const{fontFamily:n,...r}=e.value;return r}),Eo=A({name:"BoxRenderer",props:{...q},setup(e){return j(e)},render(){return w(this.tagName,{...this.attrs,class:["box"],style:this.style},this.$slots.default())}});Eo.__docgenInfo={displayName:"BoxRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/BoxRenderer.vue"]};const zs=A({name:"IconFaRenderer",props:{...q},setup(e){const t=j(e),n=Ao(t.style);return{...t,style:n}},computed:{iconName(){return this.renderDom.content.data}},render(){return w(this.tagName,{...this.attrs,class:["fa",this.iconName,this.pseudoClass],style:this.style})}});zs.__docgenInfo={displayName:"IconFaRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/IconFaRenderer.vue"]};const jr=A({name:"IconFV6Renderer",props:{...q},setup(e){const t=j(e),n=Ao(t.style);return{...t,style:n}},computed:{iconType(){const e=this.renderDom.content.type;switch(e){case"icon-brands":return"fa-brands";case"icon-solid":return"fa-solid";default:return console.warn(`Unexpected icon type received: ${e}`),e}},iconName(){return this.renderDom.content.data}},render(){return w(this.tagName,{...this.attrs,class:[this.iconType,this.iconName,this.pseudoClass],style:this.style})}});jr.__docgenInfo={displayName:"IconFV6Renderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/IconFaV6Renderer.vue"]};const Bs=A({name:"IconRenderer",props:{...q},setup(e){const t=j(e),n=Ao(t.style);return{...t,style:n}},computed:{icon(){return this.compileTemplate(this.renderDom.studioDom.content.data)}},render(){return w(this.tagName,{...this.attrs,class:["material-icons",this.pseudoClass],innerHTML:this.icon,style:this.style})}});Bs.__docgenInfo={displayName:"IconRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/IconRenderer.vue"]};const Vs=A({name:"ImageRenderer",props:{...q},setup(e){return j(e)},computed:{src(){if(!this.renderDom.content.src)return"";const e=this.compileTemplate(this.renderDom.content.src,!0);return/{{/.test(e)?"":e}},render(){const e=this.src&&`url('${this.src}')`,t=()=>w("div",{class:["image-background"],style:{...e&&{backgroundImage:e},...this.renderDom.conditionalStyle(this.domConditions)[":before"]}});return w(this.tagName,{...this.attrs,class:["image",this.pseudoClass],style:this.style},[t(),...this.$slots.default()||[]])}});Vs.__docgenInfo={displayName:"ImageRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/ImageRenderer.vue"]};const Fu=lt.create({name:"studioBlockUid",addProseMirrorPlugins(){return[new Se({key:new ye("studioBlockUid"),appendTransaction:(e,t,n)=>{if(Os(t.doc,n.doc)||e.some(l=>l.getMeta("preventUpdate")))return;const i=n.tr;let s=!1;const a={};if(n.doc.descendants((l,d)=>{if(l.type&&l.type.isBlock){const{blockUid:u,...c}=l.attrs,h=u==null||u==="",p=a[u],f=h||p?Ge.generateUid():u;(h||p)&&(i.setNodeMarkup(d,void 0,{...c,blockUid:f}),s=!0),a[f]=!0}}),s)return i}})]}});function pi(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function Wr(e,t,n){if(n={slice:!0,parseOptions:{},...n},typeof e=="object"&&e!==null)try{return Array.isArray(e)?$.fromArray(e.map(r=>t.nodeFromJSON(r))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Wr("",t,n)}if(typeof e=="string"){const r=$s.fromSchema(t);return n.slice?r.parseSlice(pi(e),n.parseOptions).content:r.parse(pi(e),n.parseOptions)}return Wr("",t,n)}function fi(e,t,n={}){return Wr(e,t,{slice:!1,parseOptions:n})}const Uu="preventUpdateForAllRemove",Hu=lt.create({name:"studioCollaboration",addStorage(){return{currentEditBlockUids:[],lastEditBlockUids:[],nodeBlockList:{}}},onCreate(){this.storage.nodeBlockList=new gi},addCommands(){return{studioCollaborationForceReceive:({content:e})=>({editor:t})=>{if(t.getHTML()===e)return;const r=this.editor.state.selection;if(t.chain().setContent(e).setMeta("addToHistory",!1).run(),!r)return;const{state:o,view:i}=this.editor,{tr:s}=o,a=o.doc.nodeSize-1,l=a>r.from?r.from:a,d=a>r.anchor?r.anchor:a,u=a>r.head?r.head:a,c=st(r)?new z(s.doc.resolve(l)):new B(s.doc.resolve(d),s.doc.resolve(u)),h=s.setSelection(c).setMeta("addToHistory",!1).setMeta("preventUpdate",!0);return i.dispatch(h),!0},studioCollaborationReceive:({content:e,deletedBlockUids:t})=>({tr:n,editor:r,view:o,state:i,dispatch:s})=>{this.storage.nodeBlockList.updateWithRemoteData(t),n.doc.content.content.forEach(p=>{const f=p?.attrs?.blockUid,m=t?.[f];if(m){if(this.storage.nodeBlockList.retrivedList[f]?.updateAt.seconds>=m.seconds)return;const v=$e(i.tr.doc,p),y=v+p.nodeSize,b=n.deleteRange(v,y).setMeta("addToHistory",!1).setMeta("preventUpdate",!0);s(b)}});const l=n.doc.content.content,u=fi(e,r.schema).content.content;return u.forEach((c,h)=>{if(!c.isBlock)return;const p=c?.attrs?.blockUid;if(!p||t?.[p]||this.storage.nodeBlockList.deletedList[p])return;const g=rn(c).map(b=>b?.node?.attrs?.blockUid).filter(Boolean),v=this.storage.currentEditBlockUids.some(b=>b===p)||g.some(b=>this.storage.currentEditBlockUids.some(x=>x===b)),y=this.storage.lastEditBlockUids.some(b=>b===p)||g.some(b=>this.storage.lastEditBlockUids.some(x=>x===b));if(!(v||y)){g.forEach(b=>{const x=n.doc,_=l.find(C=>C?.attrs?.blockUid===b);if(_&&Number(c?.attrs?.time)>Number(_?.attrs?.time)){const k=$e(x,_),E=k+_.nodeSize,R=n.delete(k,E).setMeta("addToHistory",!1).setMeta("preventUpdate",!0);s(R)}});{const b=n.doc,x=n.selection,_=l.find(C=>C?.attrs?.blockUid===p);if(_){if(Number(c?.attrs?.time)>Number(_?.attrs?.time)){const E=$e(b,_),R=E+_.nodeSize,I=n.replaceRangeWith(E,R,c).setMeta("addToHistory",!1).setMeta("preventUpdate",!0);if(s(I),x){if(xr(x.$from)?.attrs?.blockUid!==p)return;const{tr:W}=this.editor.state,G=i.doc.nodeSize-1,ee=G>x.from?x.from:G,X=G>x.anchor?x.anchor:G,ht=G>x.head?x.head:G,en=st(x)?new z(W.doc.resolve(ee)):new B(W.doc.resolve(X),W.doc.resolve(ht)),br=W.setSelection(en).setMeta("addToHistory",!1).setMeta("preventUpdate",!0);this.editor.view.dispatch(br)}return}if(Number(c?.attrs?.time)<Number(_?.attrs?.time)){this.options.onRemoteHasDelayValue({getHTML:r.getHTML.bind(r),getJSON:r.getJSON.bind(r),state:i});return}}else if(l.length===1&&l[0].textContent===""&&l.every(C=>C?.attrs?.blockUid==="")){const{doc:C}=n,k=fi(e,r.schema),E=B.create(C,0,C.content.size),R=n.setSelection(E).replaceSelectionWith(k,!1).setMeta("addToHistory",!1).setMeta(Uu,!0);return s(R),!0}else{const C=u[h-1],k=i.tr.doc.resolve(0).end();let E=0;const R=i.tr.doc;C&&(E=$e(R,C)+C.nodeSize);const I=n.insert(Math.min(k,E),c).setMeta("addToHistory",!1).setMeta("preventUpdate",!0);s(I);return}}}}),!0}}},addProseMirrorPlugins(){const e=zu(()=>{this.storage.currentEditBlockUids=[],this.storage.lastEditBlockUids=[]},5e3);return[new Se({key:new ye("studioCollaborations"),appendTransaction:(t,n,r)=>{if(gd(this.storage.nodeBlockList)||!(this.storage.nodeBlockList instanceof gi)||Os(n.doc,r.doc)||t.some(v=>v.getMeta("preventUpdate")))return;if(t.some(v=>v.getMeta("history$"))){const v=di(r,n);this.storage.nodeBlockList.updateRetrievedBlockUids(v)}const a=di(n,r);this.storage.nodeBlockList.updateDeletedBlockUids(a);const{selection:l}=n,d=xr(l.$from);if(d){const y=rn(d).map(b=>b?.node?.attrs?.blockUid).filter(Boolean);this.storage.lastEditBlockUids=[d?.attrs?.blockUid,...y]}const{selection:u}=r,c=xr(u.$from);if(d){const y=rn(d).map(b=>b?.node?.attrs?.blockUid).filter(Boolean);this.storage.currentEditBlockUids=[c?.attrs?.blockUid,...y]}e();const h=r.tr;let p=!1;const f={},g=rn(n.doc).reduce((v,y)=>y?.node?.attrs?.blockUid?{...v,[y.node.attrs.blockUid]:y.node}:{...v},{});if(r.doc.descendants((v,y)=>{if(v.type&&v.type.isBlock){const{blockUid:b,time:x,..._}=v.attrs,C=b==null||b==="",k=f[b],E=g[b],R=E&&!v.eq(E),I=!!this.storage.nodeBlockList.retrivedList[b],M=C||k?Ge.generateUid():b,F=C||R||I?Date.now():x;(C||k||R||I)&&(h.setNodeMarkup(y,void 0,{..._,blockUid:M,time:F}),p=!0),f[M]=!0}}),p)return h}})]}});function zu(e,t){let n;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{e(...r),n=null},t)}}class mi{uid;status;updateAt;get isRetrived(){return this.status==="retrived"}get isDeleted(){return this.status==="deleted"}constructor(t,n){this.uid=t,this.status=n,this.updateAt=qs()}}class gi{list={};get retrivedList(){return Object.keys(this.list).reduce((t,n)=>this.list[n].isRetrived?{...t,[n]:this.list[n]}:{...t},{})}get retrivedListForRequest(){return Object.keys(this.retrivedList).reduce((t,n)=>({...t,[n]:this.retrivedList[n].updateAt}),{})}get deletedList(){return Object.keys(this.list).reduce((t,n)=>this.list[n].isDeleted?{...t,[n]:this.list[n]}:{...t},{})}get deletedListForRequest(){return Object.keys(this.deletedList).reduce((t,n)=>({...t,[n]:this.deletedList[n].updateAt}),{})}updateDeletedBlockUids(t){const n=t.reduce((r,o)=>({...r,[o]:new mi(o,"deleted")}),{});this.list={...this.list,...n}}updateRetrievedBlockUids(t){const n=t.reduce((r,o)=>({...r,[o]:new mi(o,"retrived")}),{});this.list={...this.list,...n}}updateWithRemoteData(t){Object.keys(t).forEach(r=>{const o=!!this.deletedList[r],i=t[r]?.seconds,s=this.deletedList[r]?.updateAt.seconds||0;if(o&&i===s){delete this.list[r];return}o&&i>s&&delete this.list[r];const l=!!this.retrivedList[r],d=this.retrivedList[r]?.updateAt.seconds||0;l&&i>d&&delete this.list[r]});const n=qs().seconds;Object.keys(this.list).forEach(r=>{if(n-this.list[r].updateAt.seconds>3600){delete this.list[r];return}})}}function qs(){return yd.now()}const Bu=lt.create({name:"studioHtmlParser",addGlobalAttributes(){return[{types:["blockquote","bullet_list","code_block","heading1","heading2","heading3","heading4","heading5","heading6","horizontal_rule","list_item","ordered_list","paragraph","table","tableCell","tableHeader","tableRow"],attributes:{blockUid:{default:"",parseHTML:e=>e?.getAttribute("data-uid")??"",renderHTML:e=>({"data-uid":e.blockUid})},time:{default:"",parseHTML:e=>e?.getAttribute("data-time")??"",renderHTML:e=>({"data-time":e.time})}}}]},addProseMirrorPlugins(){return[new Se({key:new ye("studioHtmlParser"),props:{transformPastedHTML(e){return Kn(e).replace(/data-uid=\"[a-zA-Z_0-9-]{8}\"/g,()=>`data-uid="${Ge.generateUid()}"`).replace(/data-time=\"[0-9]{1,13}\"/g,()=>`data-time="${Date.now()}"`)},transformPastedText(e){return Kn(e)}}})]}}),Vu=lt.create({name:"studioNormalRichtext",addOptions(){return{onCommandEnter:()=>{},onTab:()=>{}}},addProseMirrorPlugins(){const{options:e}=this;return[new Se({key:new ye("studioNormalRichtext"),props:{handleDOMEvents:{blur(){return window.getSelection()?.removeAllRanges(),!1}},handleKeyDown(t,n){const{key:r,metaKey:o,ctrlKey:i}=n;return(o||i)&&r==="Enter"?(e.onCommandEnter(),!0):r==="Tab"?(n.preventDefault(),n.stopPropagation(),e.onTab(),!0):!1}}})]}}),qu=lt.create({name:"StudioOnPaste",priority:2e3,addProseMirrorPlugins(){return[new Se({key:new ye("StudioOnPaste"),props:{handleDOMEvents:{paste(e,t){if(!t.clipboardData||!t.clipboardData.types||t.clipboardData.types.length!=1||t.clipboardData.types[0]!="Files")return!1;t.preventDefault()}}}})]}}),ju=lt.create({name:"studioTripleClick",addProseMirrorPlugins(){return[new Se({key:new ye("studioTripleClick"),props:{handleDOMEvents:{click(e,t){if(t.detail===3){const{state:n,dom:r}=e,{selection:o,tr:i}=n;if(st(o))return;const s=o.$anchor,a=s.node(s.depth);if(["tableHeader","tableCell"].includes(a.type.name)){const d=$e(n.doc,a),u=a.nodeSize,c=d+u,h=new B(i.doc.resolve(d),i.doc.resolve(c)),p=i.setSelection(h).setMeta("addToHistory",!1).setMeta("preventUpdate",!1);return e.dispatch(p),!0}const l=Ds(n.doc,a,r);if(l&&l.levelOneNode){let d=1,u=1;["code_block","blockquote"].includes(l.levelOneNode.type.name)?(d=0,u=0):["bullet_list","ordered_list"].includes(l.levelOneNode.type.name)&&(d=3,u=3);const c=$e(n.doc,l.levelOneNode)+d,h=l.levelOneNode.nodeSize,p=n.doc.nodeSize-1,f=Math.min(p,c+h-d-u),m=new B(i.doc.resolve(c),i.doc.resolve(f)),g=i.setSelection(m).setMeta("addToHistory",!1).setMeta("preventUpdate",!1);e.dispatch(g)}}return!0}}}})]}});function yi({types:e,node:t}){return Array.isArray(e)&&e.includes(t.type)||t.type===e}const Wu=lt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins(){const e=this,t=new ye(this.name),n=Object.entries(this.editor.schema.nodes).map(([,r])=>r).filter(r=>this.options.notAfter.includes(r.name));return[new Se({key:t,state:{init:(r,o)=>{const i=o.tr.doc.lastChild;return!yi({node:i,types:n})},apply:(r,o)=>{if(!r.docChanged)return o;const i=r.doc.lastChild;return!yi({node:i,types:n})}},props:{handleDOMEvents:{click(r,o){const{state:i}=r;if(!t.getState(i))return;const{doc:a,schema:l,tr:d}=i,u=a.content.size;if(r.coordsAtPos(u).bottom<o.clientY){const p=l.nodes[e.options.node].create(),f=d.insert(u,p);f.setSelection(new z(f.doc.resolve(u))),r.dispatch(f)}return!0}}}})]}}),Gu=Rd.create({name:"comments",inclusive:!1,spanning:!1,priority:99,addOptions(){return{HTMLAttributes:{threadId:""}}},addAttributes(){return{threadId:{default:null}}},parseHTML(){return[{tag:"span[data-thread]",getAttrs:e=>({threadId:e.getAttribute("data-thread")})}]},renderHTML({HTMLAttributes:e}){return e.threadId?["span",{"data-thread":e.threadId||""},0]:["span",0]},addCommands(){return{createComment:()=>({chain:e})=>e().setMark(this.name,{threadId:""}).run(),addComment:e=>({state:t,dispatch:n,chain:r})=>{const{selection:o}=t;if(st(o)){const{$anchor:i,node:s}=o,{...a}=s.attrs,d=i.pos,u=t.tr.setNodeMarkup(d,null,{...a,...e,time:Date.now()});n(u);return}return r().setMark(this.name,{threadId:e.threadId}).run()},deleteThread:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).run(),resolveThread:e=>({state:t,dispatch:n,tr:r})=>{const{selection:o}=t;if(st(o)){const{$anchor:i,node:s}=o,{...a}=s.attrs,d=i.pos,u=t.tr.setNodeMarkup(d,null,{...a,threadId:"",time:Date.now()});n(u);return}return gu(t.schema.marks.comments,!1,e)(t,n,r)}}},addProseMirrorPlugins(){return[Ju(this.type)]}});function Ju(e){const t=n=>{const r=[];return n.forEach(o=>{if(o.isText){const{marks:i}=o,s=0;if(!!i.filter(l=>l.type.name==="comments")[0]){r.push(o.cut(s).mark(e.create().addToSet(o.marks)));return}r.push(o.cut(s))}else{const{attrs:i}=o;if(i.threadId!=null){o.attrs.threadId=null,r.push(o);return}r.push(o.copy(t(o.content)))}}),$.fromArray(r)};return new Se({key:new ye("comments"),props:{transformPasted:n=>new T(t(n.content),n.openStart,n.openEnd)}})}const js=(e,t)=>{const n=ge(),r=Cs("projectId"),o=self.crypto.randomUUID(),i=S(()=>`https://${r.value}.studioiframesandbox.com`),s=N(void 0),a=N(void 0),l=S(()=>{let f="100%";return e.value.height==="auto"&&s.value!=null&&(f=`${s.value}px`),{height:f,width:"100%"}}),d=f=>{s.value=f.height,a.value=f.width,n.commit("studioEditor/rendering")},u=N(null),c=Vr(10,()=>{u.value&&u.value.contentWindow?.postMessage({uuid:o,content:t.value},"*")});ie(()=>t.value,c,{immediate:!0}),Ut(()=>{const f=()=>{c()};u.value?.addEventListener("load",f),od(()=>{u.value?.removeEventListener("load",f)})});const h=S(()=>`${i.value}`);function p(f){Ku(f.origin,i.value)&&Zu(f.data)&&f.data.uuid===o&&d({height:f.data.height,width:f.data.width})}return Ut(()=>{window.addEventListener("message",p)}),id(()=>{window.removeEventListener("message",p)}),{iframeRef:u,iframeStyle:l,setContent:c,sandboxUrl:h}},Ku=(e,t)=>e.toLowerCase()===t.toLowerCase(),Zu=e=>!e||typeof e!="object"?!1:"uuid"in e&&typeof e.uuid=="string"&&"width"in e&&typeof e.width=="number"&&"height"in e&&typeof e.height=="number",Ws=A({name:"EmbedCodeSandboxComponent",props:Y,setup(e){const t=N(decodeURIComponent(e.node.attrs.src));ie(()=>e.node.attrs.src,d=>{t.value=decodeURIComponent(d)});const n=S(()=>dr(t.value)),r=S(()=>({height:"auto",width:"100%"})),{iframeRef:o,iframeStyle:i,sandboxUrl:s}=js(r,t),a=N(!0),l=()=>{requestAnimationFrame(()=>{a.value=e.selected})};return Ut(async()=>{l()}),ie(()=>e.selected,()=>{l()},{immediate:!0}),()=>w(H,{as:"div",key:`${e.node.attrs.blockUid}`,"data-node-view-wrapper-renderer-custom":!0,"data-type":"embed_code","data-embed-sandbox":!0,"data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,"data-embed-code-type":n.value,class:{selectedNode:a.value},style:{position:"relative"}},()=>[w("iframe",{"data-embed-block":!0,ref:d=>o.value=d,src:s.value,sandbox:"allow-scripts allow-same-origin allow-presentation",scrolling:"no",style:{position:"relative",...i.value}}),w("div",{class:"cover",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",cursor:"default"}})])}});Ws.__docgenInfo={displayName:"EmbedCodeSandboxComponent",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/CustomNodesEmbedCodeSandboxComponent.vue"]};const Xu=Fe.create({name:"embed_code_sandbox",content:"",group:"block",atom:!0,selectable:!0,draggable:!0,priority:53,addOptions(){return{onEditStart:()=>{}}},addAttributes(){return{src:{default:""},blockUid:{default:""},time:{default:""}}},parseHTML(){return[{tag:'[data-type="embed_code"][data-embed-sandbox="true"]',getAttrs:e=>{if(e.dataset.nodeViewWrapperRendererCustom==="true"){const t=e.querySelector("[data-embed-block]");return{src:encodeURIComponent(t?.innerHTML??""),blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time")}}return{src:e.innerHTML,blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time")}}}]},renderHTML({HTMLAttributes:e}){const t=decodeURIComponent(e.src);return["div",{"data-type":"embed_code","data-embed-code-type":dr(t),"data-embed-sandbox":!0,"data-uid":e.blockUid,"data-time":e.time},e.src]},addNodeView(){return Q(Ws)},addCommands(){return{createEmbedCodeSandbox:({src:e})=>({state:t,chain:n})=>{const r={src:encodeURIComponent(e),blockUid:Ge.generateUid(),time:Date.now()},{selection:o}=t,i=o.from;return n().insertContentAt(i,{type:"embed_code_sandbox",attrs:r}).run()},updateEmbedCodeSandbox:({src:e})=>({state:t,chain:n})=>{if(t.selection.node.type.name===this.name){const a={src:encodeURIComponent(e),time:Date.now()};return n().updateAttributes(this.name,a).run()}const{selection:o}=t,{from:i,to:s}=o;return n().deleteRange({from:i,to:s}).setTextSelection(i-1).createEmbedCodeSandbox({src:e}).run()},getEmbedCodeSandboxAttrs:()=>({state:e})=>{const{selection:t}=e;if(st(t)){const{node:n}=t,{src:r}=n.attrs;return{src:decodeURIComponent(r)||""}}return{}}}}}),Gs=A({name:"EmbedCodeComponent",props:Y,setup(e){const t=N(decodeURIComponent(e.node.attrs.src));ie(()=>e.node.attrs.src,h=>{t.value=decodeURIComponent(h)});const n=S(()=>{const h=document.createElement("div");return h.innerHTML=t.value,Array.prototype.slice.call(h.childNodes)}),r=S(()=>n.value.filter(h=>h.tagName==="IFRAME")[0]||null),o=S(()=>dr(t.value)),i=S(()=>r.value?r.value.style?.width==="100%"?700:Number(r.value.width||0)||parseInt(r.value.style?.width||0,10):0),s=S(()=>r.value?Number(r.value.height||0)||parseInt(r.value.style?.height||0,10):0),a=S(()=>({display:"block",maxWidth:i.value?`${i.value}px`:"100%"})),l=S(()=>[null,void 0,""].includes(r?.value?.style?.position)?`${Math.max(100*s.value/i.value,10).toFixed(2)}%`:""),d=N(!0),u=()=>{requestAnimationFrame(()=>{d.value=e.selected})};let c;return Ut(async()=>{u(),c=await Ss(document.body,String(t.value))}),ar(()=>{c&&c()}),ie(()=>e.selected,()=>{u()},{immediate:!0}),()=>t.value?w(H,{as:"div",key:`iframe_${e.node.attrs.blockUid}-${e.node.attrs.time}`,"data-node-view-wrapper-renderer-custom":!0,"data-type":"embed_code","data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,"data-embed-code-type":o.value,class:{selectedNode:d.value},style:{position:"relative"}},()=>[w("div",{class:"height-adjuster",style:a.value},[w("div",{"data-embed-block":!0,class:"wrapper",style:{position:"relative",paddingTop:l.value},innerHTML:t.value})]),w("div",{class:"cover",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",cursor:"default"}})]):w(H,{as:"div",key:`iframe_${e.node.attrs.blockUid}-${e.node.attrs.time}_empty`,"data-node-view-wrapper-renderer-custom":!0,"data-type":"embed_code_empty","data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,class:{selectedNode:d.value},innerHTML:"Embed Block"})}});Gs.__docgenInfo={displayName:"EmbedCodeComponent",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/CustomNodesEmbedCodeComponent.vue"]};const Yu=Fe.create({name:"embed_code",content:"",group:"block",atom:!0,selectable:!0,draggable:!0,priority:52,addOptions(){return{onEditStart:()=>{}}},addAttributes(){return{src:{default:""},blockUid:{default:""},time:{default:""}}},parseHTML(){return[{tag:'[data-type="embed_code_empty"]',getAttrs:e=>({src:"",blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time")})},{tag:'[data-type="embed_code"]',getAttrs:e=>{if(e.dataset.nodeViewWrapperRendererCustom==="true"){const t=e.querySelector("[data-embed-block]");return{src:encodeURIComponent(t?.innerHTML??""),blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time")}}return{src:e.innerHTML,blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time")}}}]},renderHTML({HTMLAttributes:e}){const t=decodeURIComponent(e.src),n=document.createElement("div");n.innerHTML=t;const o=Array.prototype.slice.call(n.childNodes).filter(u=>u.tagName==="IFRAME")[0]||null;let i;const s=Number(o?.width||0)||parseInt(o?.style?.width||0,10),a=Number(o?.height||0)||parseInt(o?.style?.height||0,10);[null,void 0,""].includes(o?.style?.position)&&s&&a&&(i=`${Math.max(100*a/s,10).toFixed(2)}%`);const d=i?`padding-top: ${i};`:"";return["div",{"data-type":this.name,"data-embed-code-type":dr(t),"data-uid":e.blockUid,"data-time":e.time,style:d},e.src]},addNodeView(){return Q(Gs)},addCommands(){return{createEmbedCode:({src:e})=>({state:t,chain:n})=>{const r={src:encodeURIComponent(e),blockUid:Ge.generateUid(),time:Date.now()},{selection:o}=t,i=o.from;return n().insertContentAt(i,{type:"embed_code",attrs:r}).run()},updateEmbedCode:({src:e})=>({state:t,chain:n})=>{if(t.selection.node.type.name===this.name){const a={src:encodeURIComponent(e),time:Date.now()};return n().updateAttributes(this.name,a).run()}const{selection:o}=t,{from:i,to:s}=o;return n().deleteRange({from:i,to:s}).setTextSelection(i-1).createEmbedCode({src:e}).run()},getEmbedCodeAttrs:()=>({state:e})=>{const{selection:t}=e;if(st(t)){const{node:n}=t,{src:r}=n.attrs;return{src:decodeURIComponent(r)||""}}return{}}}}});function Qu(e){return!(/^https:\/\/storage.googleapis.com\/([a-zA-Z0-9-]+)\/(projects|assets)\//.test(e)||/^https:\/\/storage.googleapis.com\/studio-cms-wp-import-assets\//.test(e)||/^https:\/\/storage.studio.design\//.test(e)||/^https:\/\/images.unsplash.com\//.test(e))}const ec=e=>Object.entries(e).reduce((n,[r,o])=>o==null||typeof o=="object"?n:[...n,`${vd(r)}:${o}`],[]).join(";"),Js=A({props:Y,setup(e,t){const{t:n}=pu(),{editor:r,node:o}=Oe(e);Cs("projectId");const i=e.extension.options,s=N(0),a=N(0),l=N(0),d=N(0),u=N(0),c=N(!1),h=N(""),p=N(!1),f=S(()=>e.selected),m=S(()=>e.editor.view.dom.classList.contains("in-cms")&&Qu(e.node.attrs.src)),g=()=>{const{doc:I,tr:M}=r.value.view.state,F=$e(I,o.value),W=new z(M.doc.resolve(F)),G=M.setSelection(W).setMeta("addToHistory",!1);r.value.view.dispatch(G)},v=I=>{I.stopPropagation(),I.preventDefault()},y=N(0),b=I=>{try{const{tr:M,selection:F}=r.value.view.state,{$anchor:W}=F,G=o.value.attrs,X=W.pos,ht=M.setNodeMarkup(X,null,{...G,width:I,height:null,time:Date.now()}).setMeta("addToHistory",!0).setMeta("preventUpdate",!1);r.value.view.dispatch(ht),i.onEditEnd(),setTimeout(()=>{s.value=0,a.value=0,u.value=0,d.value=0,c.value=!1},500)}catch(M){console.log(M)}},x=()=>{b("")},_=I=>{let M=I.clientX-s.value;h.value==="w"&&(M=M*-1),u.value=Math.max(a.value+M,1),c.value=u.value>=d.value,y.value=Math.round(u.value*l.value/a.value)},C=()=>{if(document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",C),!u.value)return;const I=c.value?"":u.value;b(I),p.value=!1},k=I=>{i.onEditStart(),document.addEventListener("mousemove",_),document.addEventListener("mouseup",C),I.preventDefault(),I.stopPropagation();const M=o.value.attrs.blockUid,W=document.querySelector(`[data-uid="${M}"]`).getBoundingClientRect();d.value=W.width;const ee=document.querySelector(`[data-uid="${M}"] img`).getBoundingClientRect();a.value=ee.width,l.value=ee.height,s.value=I.clientX,p.value=!0},E=I=>{h.value="w",k(I)},R=I=>{h.value="e",k(I)};return()=>e.node.attrs.loading?w(H,{as:"figure","data-node-view-wrapper-renderer-custom":!0,"data-href":e.node.attrs.href,"data-target":e.node.attrs.target,"data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,"data-loading":e.node.attrs.loading,class:{selectedNode:f.value},style:{style:`text-align: ${e.node.attrs.textAlign}`,position:"relative",maxWidth:"fit-content"}},[w("div",{class:"img-wrap"},[w("img",{src:e.node.attrs.src,alt:e.node.attrs.alt,style:{opacity:.7},onClick:g}),w("div",{class:"uploading",style:{position:"absolute",left:"0",bottom:"0",width:"100%",height:"100%"}},[w(sd,{appear:!0,onAfterAppear(I){I.style.transform="scale(1, 1)"}},[w("div",{class:"bar",style:{position:"absolute",height:"2px",bottom:"6px",left:"6px",right:"6px",borderRadius:"1px",background:"linear-gradient(90deg, #ff0055, #f94cff)",transitionTimingFunction:"cubic-bezier(0.4, 0.4, 0, 1)",transitionDuration:"0.8s",transformOrigin:"top left",transform:"scale(0.01, 1)"}})])]),w("figcaption")])]):e.node.attrs.src?w(H,{as:"figure","data-node-view-wrapper-renderer-custom":!0,"data-href":e.node.attrs.href,"data-target":e.node.attrs.target,"data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,"data-thread":e.node.attrs.threadId,class:{selectedNode:f.value},style:ec({"text-align":e.node.attrs.textAlign})},[w("div",{class:"img-wrap"},[w("img",{src:e.node.attrs.src,alt:e.node.attrs.alt,width:c.value?"":u.value||e.node.attrs.width,onClick:g,onMousedown:v}),w("div",{class:p.value&&h.value==="e"?"handle e isDragging":"handle e",onMousedown:R,onDblclick:x}),w("div",{class:p.value&&h.value==="w"?"handle w isDragging":"handle w",onMousedown:E,onDblclick:x}),w("div",{class:u.value&&!c.value?["width-height-view","isDragging"]:"width-height-view"},[`${u.value}`,w(li,{icon:"close",size:"12",iconColor:"const-white",class:"_mx-2"}),`${y.value}`])]),m.value&&w("div",{class:"_text-left external-text"},[w("a",{href:e.node.attrs.src,target:"_blank",rel:"noopener",class:"_inline-flex _flex-row _py-4 _gap-4 _justify-end _items-center _flex-1 label-sm-normal"},[w("span",{},n("CMS ImagePanel: External Alert")),w(li,{icon:"openWindow",size:"16",iconColor:"gray-600"})])])]):w(H,{as:"figure","data-node-view-wrapper-renderer-custom":!0,"data-href":e.node.attrs.href,"data-target":e.node.attrs.target,"data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,"data-thread":e.node.attrs.threadId,class:{selectedNode:f.value},style:{position:"relative",width:"100%",height:"80px",background:"var(--base-color-3)",display:"flex",alignItems:"center",justifyContent:"center"}},[w("div",{class:"img-wrap empty"},[w("img",{src:"",alt:"",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},onClick:g}),w("i",{class:"material-icons",style:{color:"white"}},"insert_photo"),w("figcaption")])])}});Js.__docgenInfo={exportName:"default",displayName:"CustomNodesFigureComponent",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/CustomNodesFigureComponent.vue"]};const tc=Fe.create({name:"figure",content:"",marks:"",group:"block",inline:!1,atom:!0,selectable:!0,draggable:!0,addOptions(){return{uploadFunc:async()=>"",onEditStart:()=>{},onEditEnd:()=>{}}},addAttributes(){return{src:{default:""},alt:{default:""},width:{default:""},height:{default:""},textAlign:{default:""},figcaption:{default:""},href:{default:""},target:{default:"_blank"},rel:{default:"noopener"},blockUid:{default:""},time:{default:""},loading:{default:!1},threadId:{default:""}}},parseHTML(){return[{tag:"figure",priority:54,getAttrs:e=>{if(e.dataset.nodeViewWrapperRendererCustom==="true"){const o=e.querySelector("img"),i=e.querySelector("figcaption");return{src:o&&o.getAttribute("src")||"",alt:o&&o.getAttribute("alt")||"",width:o&&o.getAttribute("width")||"",height:o&&o.getAttribute("height")||"",textAlign:e.style.textAlign,figcaption:i&&i.innerHTML||"",href:e.getAttribute("data-href")||"",target:e.getAttribute("data-target"),rel:e.getAttribute("data-rel"),blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time"),threadId:e.getAttribute("data-thread")}}const t=e.querySelector("a");if(t){const o=t.querySelector("img"),i=t.querySelector("figcaption");return{src:o&&o.getAttribute("src")||"",alt:o&&o.getAttribute("alt")||"",width:o&&o.getAttribute("width")||"",height:o&&o.getAttribute("height")||"",textAlign:e.style.textAlign,figcaption:i&&i.innerHTML||"",href:t.getAttribute("href")||"",target:t.getAttribute("target"),rel:t.getAttribute("rel"),blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time"),threadId:e.getAttribute("data-thread")}}const n=e.querySelector("img"),r=e.querySelector("figcaption");return{src:n&&n.getAttribute("src")||"",alt:n&&n.getAttribute("alt")||"",width:n&&n.getAttribute("width")||"",height:n&&n.getAttribute("height")||"",textAlign:e.style.textAlign,figcaption:r&&r.innerHTML||"",blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time"),threadId:e.getAttribute("data-thread")}}}]},renderHTML({HTMLAttributes:e}){return e.href?["figure",{"data-uid":e.blockUid,"data-time":e.time,"data-thread":e.threadId,style:`text-align: ${e.textAlign}`},["a",{href:e.href,target:e.target,rel:e.rel},["img",{src:e.loading?"":e.src,alt:e.alt,width:e.width,height:e.height}]],["figcaption",e.figcaption,e.figcaption]]:["figure",{"data-uid":e.blockUid,"data-time":e.time,"data-thread":e.threadId,style:`text-align: ${e.textAlign}`},["img",{src:e.loading?"":e.src,alt:e.alt,width:e.width,height:e.height}],["figcaption",e.figcaption,e.figcaption]]},addNodeView(){return Q(Js)},addCommands(){return{addImage:e=>async({state:t,tr:n,dispatch:r})=>{const o=e.target;if(!o.files?.length)return;const i=Array.from(o.files).filter(p=>/image/i.test(p.type));if(i.length===0)return;e.preventDefault();const s={blockUid:Ge.generateUid(),time:Date.now(),src:"https://storage.googleapis.com/studio-front/default-img.png",loading:!0},a=this.type.create(s),l=n.replaceSelectionWith(a).setMeta("addToHistory",!0).setMeta("preventUpdate",!1);r(l);const d=i[0],u=await this.options.uploadFunc(d),c=$e(n.doc,a),h=this.editor.state.tr.setNodeMarkup(c,null,{...s,time:Date.now(),src:u,loading:!1}).setMeta("addToHistory",!0).setMeta("preventUpdate",!1);this.editor.view.dispatch(h),this.editor.commands.focus()},setImageAttrs:e=>({chain:t})=>t().updateAttributes(this.name,{...e,time:Date.now()}).setMeta("addToHistory",!0).setMeta("preventUpdate",!1).run(),getImageAttrs:()=>({state:e})=>{const{selection:t}=e;if(st(t)){const{node:n}=t,{...r}=n.attrs;return r}return{}}}},addProseMirrorPlugins(){const e=this.options.uploadFunc;return[new Se({key:new ye("figure"),props:{handleDOMEvents:{async drop(t,n){if(!(n.dataTransfer&&n.dataTransfer.files&&n.dataTransfer.files.length))return;const o=Array.from(n.dataTransfer.files).filter(m=>/image/i.test(m.type));if(o.length===0)return;n.preventDefault();const{schema:i}=t.state,s=t.posAtCoords({left:n.clientX,top:n.clientY}),a=i.nodes.figure.create({src:"",blockUid:Ge.generateUid(),time:Date.now(),loading:!1}),l=t.state.tr.insert(s.pos,a).setMeta("addToHistory",!0).setMeta("preventUpdate",!1);t.dispatch(l);const d=o[0],u=await e(d),c=$e(t.state.doc,a),h={src:u,loading:!1},{...p}=a.attrs,f=t.state.tr.setNodeMarkup(c,null,{...p,time:Date.now(),...h}).setMeta("addToHistory",!0).setMeta("preventUpdate",!1);return t.dispatch(f),!0}}}})]}}),nc=Fe.create({name:"imageInline",group:"inline",draggable:!0,inline:!0,addAttributes(){return{src:{default:""},alt:{default:""}}},parseHTML(){return[{tag:"img[src]",priority:50,getAttrs:e=>({src:e.getAttribute("src"),alt:e.getAttribute("alt")})}]},renderHTML({HTMLAttributes:e}){return["img",{src:e.src,alt:e.alt}]}}),Ks=A({props:Y,setup(e){const t=N([]),{editor:n}=Oe(e),r=S(()=>e.selected),o=()=>{const s=n.value.state.tr;t.value=[],n.value.state.doc.descendants(a=>{if(a.type.name==="heading1"||a.type.name==="heading2"||a.type.name==="heading3"){const l=Number(a.type.name.slice(-1)),d=`index_${a.attrs.blockUid}`;t.value.push({level:l,text:a.textContent,id:d})}}),s.setMeta("addToHistory",!0),s.setMeta("preventUpdate",!1),n.value.view.dispatch(s)},i=ur.debounce(o,1e3);return Ut(()=>{n.value.on("update",i),o()}),()=>w(H,{as:"div",class:["toc",{selectedNode:r.value}],"data-type":"table_of_contents","data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time},()=>[t.value.map(s=>w("div",{class:`toc__item toc__item--${s.level}`},[w("a",{href:"#"+s.id},s.text)]))])}});const rc=ve(Ks,[["__scopeId","data-v-a9d07565"]]);Ks.__docgenInfo={exportName:"default",displayName:"CustomNodesTableOfContentsComponent",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/CustomNodesTableOfContentsComponent.vue"]};const oc=Fe.create({name:"table_of_contents",group:"block",atom:!0,selectable:!0,addAttributes(){return{blockUid:{default:""},time:{default:""}}},parseHTML(){return[{tag:'[data-type="table_of_contents"]',getAttrs:e=>({blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time"),"data-type":"table_of_contents"})}]},renderHTML({HTMLAttributes:e}){return["div",{"data-type":this.name,"data-uid":e.blockUid,"data-time":e.time}]},addNodeView(){return Q(rc)},addCommands(){return{createTableOfContents:()=>({state:e,chain:t})=>{const n={blockUid:Ge.generateUid(),time:Date.now(),"data-type":this.name},{selection:r}=e,o=r.from;return t().insertContentAt(o,{type:"table_of_contents",attrs:n}).run()}}}}),Zs=A({name:"CustomNodesStudioComponentComponent",props:Y,setup(e){const t=ks(),n=S(()=>{if(!e.node.attrs.refUuid)return null;const r={type:"ref",uuid:e.node.attrs.blockUid,refId:e.node.attrs.refUuid,state:e.node.attrs.state,style:{}};return t.targetRenderTree({studioDom:bd(r)})});return()=>n.value?w(H,{as:"div",key:`studio_component_${e.node.attrs.blockUid}-${e.node.attrs.time}`,"data-node-view-wrapper-renderer-custom":!0,"data-type":"studio_component","data-uid":e.node.attrs.blockUid,"data-ref-uuid":e.node.attrs.refUuid,"data-state":JSON.stringify(e.node.attrs.state),"data-time":e.node.attrs.time,class:{selectedNode:e.selected}},()=>w(yr,{renderDom:n.value,role:"template"})):w(H,{as:"div",key:`studio_component_${e.node.attrs.blockUid}-${e.node.attrs.time}-empty`,"data-node-view-wrapper-renderer-custom":!0,"data-type":"studio_component_empty","data-uid":e.node.attrs.blockUid,"data-ref-uuid":"","data-state":JSON.stringify({}),"data-time":e.node.attrs.time,class:{selectedNode:e.selected},innerHTML:"Component"})}});Zs.__docgenInfo={displayName:"CustomNodesStudioComponentComponent",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/CustomNodesStudioComponentComponent.vue"]};const ic=Fe.create({name:"studio_component",content:"",marks:"",group:"block",inline:!1,atom:!0,selectable:!0,draggable:!0,addAttributes(){return{blockUid:{default:""},time:{default:""},refUuid:{default:""},state:{default:{}}}},parseHTML(){return[{tag:'[data-type="studio_component"]',priority:50,getAttrs:e=>{const t=e.getAttribute("data-state");return{blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time"),refUuid:e.getAttribute("data-ref-uuid"),state:t?JSON.parse(t):{}}}}]},renderHTML({HTMLAttributes:e}){return["div",{"data-type":"studio_component","data-uid":e.blockUid,"data-time":e.time,"data-ref-uuid":e.refUuid,"data-state":JSON.stringify(e.state)},e.refUuid]},addNodeView(){return Q(Zs)},addCommands(){return{createStudioComponent:({refUuid:e})=>({state:t,chain:n})=>{const r={refUuid:e,blockUid:Ge.generateUid(),time:Date.now()},{selection:o}=t,i=o.from;return n().insertContentAt(i,{type:"studio_component",attrs:r}).run()},updateStudioComponent:e=>({state:t,chain:n})=>{const r={...t.selection.node.attrs,time:Date.now(),...e};return n().updateAttributes(this.name,r).run()}}}}),sc=Dd.extend({name:"focus",addProseMirrorPlugins(){return[new Se({key:new ye("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=t,i=[];return!n||!r?ai.create(e,[]):(e.descendants((s,a)=>s.isText||!(o>=a&&o<=a+s.nodeSize-1)||s.isText?!1:(i.push(Pd.node(a,a+s.nodeSize,{class:this.options.className})),!0)),ai.create(e,i))}}})]}}),ac=Od.extend({}),lc=Fd.extend({}),dc=/((?:\*\*)((?:[^*]+))(?:\*\*))$/,uc=/((?:\*\*)((?:[^*]+))(?:\*\*))/g,cc=/((?:__)((?:[^__]+))(?:__))$/,hc=/((?:__)((?:[^__]+))(?:__))/g,pc=Ud.extend({addInputRules(){return[Ht({find:dc,type:this.type}),Ht({find:cc,type:this.type})]},addPasteRules(){return[zt({find:uc,type:this.type}),zt({find:hc,type:this.type})]}}),fc=/((?:`)((?:[^`]+))(?:`))$/,mc=/((?:`)((?:[^`]+))(?:`))/g,gc=Hd.extend({excludes:"bold code italic link strike underline",addInputRules(){return[Ht({find:fc,type:this.type})]},addPasteRules(){return[zt({find:mc,type:this.type})]}}),yc=/((?:\*)((?:[^*]+))(?:\*))$/,vc=/((?:\*)((?:[^*]+))(?:\*))/g,bc=zd.extend({addInputRules(){return[Ht({find:yc,type:this.type})]},addPasteRules(){return[zt({find:vc,type:this.type})]}}),_c=Bd.extend({inclusive:!1,addOptions(){return{...this.parent?.(),onEditStart:()=>{}}},addAttributes(){return{rel:{default:""},target:{default:"_blank"},href:{default:""}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])',getAttrs:e=>({href:e.getAttribute("href"),target:e.getAttribute("target"),rel:e.getAttribute("rel")})}]},renderHTML({HTMLAttributes:e}){return["a",{target:e.target,href:e.href,"data-has-link":`${!!e.href}`,rel:e.rel},0]},addKeyboardShortcuts(){return{"Mod-k":({editor:e})=>{const{selection:t,doc:n}=e.state;let{from:r,to:o}=t;const{$from:i,empty:s}=t;if(s){const l=Es(i,this.type);l&&(r=l.from,o=l.to)}if(n.rangeHasMark(r,o,this.type))return e.chain().extendMarkRange("link").unsetLink().focus().run();this.options.onEditStart()}}}}),wc=/((?:~)((?:[^~]+))(?:~))$/,Cc=/((?:~)((?:[^~]+))(?:~))/g,Sc=Vd.extend({addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ht({find:wc,type:this.type})]},addPasteRules(){return[zt({find:Cc,type:this.type})]}}),kc=/((?:_)((?:[^_]+))(?:_))$/,xc=/((?:_)((?:[^_]+))(?:_))/g,Tc=qd.extend({addInputRules(){return[Ht({find:kc,type:this.type})]},addPasteRules(){return[zt({find:xc,type:this.type})]}}),Ac=jd.extend({draggable:!1,content:"paragraph*",addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"blockquote","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))},addKeyboardShortcuts(){return{"Control->":()=>this.editor.commands.toggleBlockquote()}}}),Ec=Wd.extend({name:"bullet_list",draggable:!1,group:"block",content:"list_item+",addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"ul","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))},addKeyboardShortcuts(){return{"Control-Shift-8":()=>this.editor.commands.toggleBulletList()}}}),$c=/^```$/,Ic=/^~~~$/,Mc=Gd.extend({name:"code_block",draggable:!1,addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"pre","data-uid":this.node.attrs.blockUid},[w(qr,{as:"code"},this.$slots.default?.())])}}))},addKeyboardShortcuts(){return{...this.parent?.(),"Control-Shift-\\":()=>this.editor.commands.toggleCodeBlock()}},addInputRules(){return[it({find:$c,type:this.type,getAttributes:e=>({language:e[1]})}),it({find:Ic,type:this.type,getAttributes:e=>({language:e[1]})})]}}),Zt=Fe.create({name:"my_node",addOptions(){return{HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,draggable:!1}),Nc=Zt.extend({name:"heading1",addAttributes(){return{blockUid:{default:""},time:{default:""},id:{default:""}}},parseHTML(){return[{tag:"h1",getAttrs:e=>({id:`index_${e.getAttribute("data-uid")}`,blockUid:e.getAttribute("data-uid"),time:e.getAttribute("data-time")})}]},renderHTML({HTMLAttributes:e}){return["h1",{"data-uid":e.blockUid,"data-time":e.time,id:`index_${e.blockUid}`},0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"h1","data-uid":this.node.attrs.blockUid,id:`index_${this.node.attrs.blockUid}`},this.$slots.default?.())}}))},addCommands(){return{setHeading1:()=>({commands:e})=>e.setNode(this.name),toggleHeading1:()=>({commands:e})=>e.toggleNode(this.name,"paragraph")}},addKeyboardShortcuts(){return{["Shift-Control-1"]:()=>this.editor.commands.toggleHeading1()}},addInputRules(){return[it({find:new RegExp("^(#{1,1})\\s$"),type:this.type})]}}),Lc=Zt.extend({name:"heading2",addAttributes(){return{blockUid:{default:""},time:{default:""},id:{default:""}}},parseHTML(){return[{tag:"h2"}]},renderHTML({HTMLAttributes:e}){return["h2",{"data-uid":e.blockUid,"data-time":e.time,id:`index_${e.blockUid}`},0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"h2","data-uid":this.node.attrs.blockUid,id:this.node.attrs.id},this.$slots.default?.())}}))},addCommands(){return{setHeading2:()=>({commands:e})=>e.setNode(this.name),toggleHeading2:()=>({commands:e})=>e.toggleNode(this.name,"paragraph")}},addKeyboardShortcuts(){return{["Shift-Control-2"]:()=>this.editor.commands.toggleHeading2()}},addInputRules(){return[it({find:new RegExp("^(#{1,2})\\s$"),type:this.type})]}}),Rc=Zt.extend({name:"heading3",addAttributes(){return{blockUid:{default:""},time:{default:""},id:{default:""}}},parseHTML(){return[{tag:"h3"}]},renderHTML({HTMLAttributes:e}){return["h3",{"data-uid":e.blockUid,"data-time":e.time,id:`index_${e.blockUid}`},0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"h3","data-uid":this.node.attrs.blockUid,id:this.node.attrs.id},this.$slots.default?.())}}))},addCommands(){return{setHeading3:()=>({commands:e})=>e.setNode(this.name),toggleHeading3:()=>({commands:e})=>e.toggleNode(this.name,"paragraph")}},addKeyboardShortcuts(){return{["Shift-Control-3"]:()=>this.editor.commands.toggleHeading3()}},addInputRules(){return[it({find:new RegExp("^(#{1,3})\\s$"),type:this.type})]}}),Dc=Zt.extend({name:"heading4",parseHTML(){return[{tag:"h4"}]},renderHTML({HTMLAttributes:e}){return["h4",Je(this.options.HTMLAttributes,e),0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"h4","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))},addCommands(){return{setHeading4:()=>({commands:e})=>e.setNode(this.name),toggleHeading4:()=>({commands:e})=>e.toggleNode(this.name,"paragraph")}},addKeyboardShortcuts(){return{["Shift-Control-4"]:()=>this.editor.commands.toggleHeading4()}},addInputRules(){return[it({find:new RegExp("^(#{1,4})\\s$"),type:this.type})]}}),Pc=Zt.extend({name:"heading5",parseHTML(){return[{tag:"h5"}]},renderHTML({HTMLAttributes:e}){return["h5",Je(this.options.HTMLAttributes,e),0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"h5","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))},addCommands(){return{setHeading5:()=>({commands:e})=>e.setNode(this.name),toggleHeading5:()=>({commands:e})=>e.toggleNode(this.name,"paragraph")}},addKeyboardShortcuts(){return{["Shift-Control-5"]:()=>this.editor.commands.toggleHeading5()}},addInputRules(){return[it({find:new RegExp("^(#{1,5})\\s$"),type:this.type})]}}),Oc=Zt.extend({name:"heading6",parseHTML(){return[{tag:"h6"}]},renderHTML({HTMLAttributes:e}){return["h6",Je(this.options.HTMLAttributes,e),0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"h6","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))},addCommands(){return{setHeading6:()=>({commands:e})=>e.setNode(this.name),toggleHeading6:()=>({commands:e})=>e.toggleNode(this.name,"paragraph")}},addKeyboardShortcuts(){return{["Shift-Control-6"]:()=>this.editor.commands.toggleHeading6()}},addInputRules(){return[it({find:new RegExp("^(#{1,6})\\s$"),type:this.type})]}}),Fc=Jd.extend({}),Uc=Kd.extend({name:"horizontal_rule"}),Hc=Zd.extend({name:"list_item",draggable:!1,content:"paragraph*",addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"li","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))}}),zc=Xd.extend({name:"ordered_list",draggable:!1,group:"block",content:"list_item+",addNodeView(){return Q(A({props:Y,render(){return this.node.attrs.order===1?w(H,{as:"ol","data-uid":this.node.attrs.blockUid},this.$slots.default?.()):w(H,{as:"ol",start:this.node.attrs.order,"data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))},addKeyboardShortcuts(){return{"Control-Shift-9":()=>this.editor.commands.toggleOrderedList()}}}),Bc=Yd.extend({draggable:!1,addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"p","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))}}),Xs=65535,Ys=Math.pow(2,16);function Vc(e,t){return e+t*Ys}function vi(e){return e&Xs}function qc(e){return(e-(e&Xs))/Ys}const Qs=1,ea=2,Hn=4,ta=8;let bi=class{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&ta)>0}get deletedBefore(){return(this.delInfo&(Qs|Hn))>0}get deletedAfter(){return(this.delInfo&(ea|Hn))>0}get deletedAcross(){return(this.delInfo&Hn)>0}},bn=class Mt{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Mt.empty)return Mt.empty}recover(t){let n=0,r=vi(t);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+qc(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;let d=this.ranges[a+i],u=this.ranges[a+s],c=l+d;if(t<=c){let h=d?t==l?-1:t==c?1:n:n,p=l+o+(h<0?0:u);if(r)return p;let f=t==(n<0?l:c)?null:Vc(a/3,t-l),m=t==l?ea:t==c?Qs:Hn;return(n<0?t!=l:t!=c)&&(m|=ta),new bi(p,m,f)}o+=u-d}return r?t+o:new bi(t+o,0,null)}touches(t,n){let r=0,o=vi(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let d=this.ranges[a+i],u=l+d;if(t<=u&&a==o*3)return!0;r+=this.ranges[a+s]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),d=this.ranges[o+n],u=this.ranges[o+r];t(a,a+d,l,l+u),i+=u-d}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Mt.empty:new Mt(t<0?[0,-t,0]:[0,0,t])}};bn.empty=new bn([]);const Tr=Object.create(null);let dt=class{getMap(){return bn.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Tr[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Tr)throw new RangeError("Duplicate use of step JSON ID "+t);return Tr[t]=n,n.prototype.jsonID=t,n}},Qe=class on{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new on(t,null)}static fail(t){return new on(null,t)}static fromReplace(t,n,r,o){try{return on.ok(t.replace(n,r,o))}catch(i){if(i instanceof Is)return on.fail(i.message);throw i}}};function $o(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy($o(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return $.fromArray(r)}let na=class sn extends dt{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new T($o(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return Qe.fromReplace(t,this.from,this.to,i)}invert(){return new ra(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new sn(n.pos,r.pos,this.mark)}merge(t){return t instanceof sn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new sn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new sn(n.from,n.to,t.markFromJSON(n.mark))}};dt.jsonID("addMark",na);let ra=class an extends dt{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new T($o(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),t),n.openStart,n.openEnd);return Qe.fromReplace(t,this.from,this.to,r)}invert(){return new na(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new an(n.pos,r.pos,this.mark)}merge(t){return t instanceof an&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new an(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new an(n.from,n.to,t.markFromJSON(n.mark))}};dt.jsonID("removeMark",ra);let jc=class ft extends dt{constructor(t,n,r,o=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=o}apply(t){return this.structure&&Gr(t,this.from,this.to)?Qe.fail("Structure replace would overwrite content"):Qe.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new bn([this.from,this.to-this.from,this.slice.size])}invert(t){return new ft(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ft(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof ft)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?T.empty:new T(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ft(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?T.empty:new T(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ft(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ft(n.from,n.to,T.fromJSON(t,n.slice),!!n.structure)}};dt.jsonID("replace",jc);let Wc=class zn extends dt{constructor(t,n,r,o,i,s,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(t){if(this.structure&&(Gr(t,this.from,this.gapFrom)||Gr(t,this.gapTo,this.to)))return Qe.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Qe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Qe.fromReplace(t,this.from,this.to,r):Qe.fail("Content does not fit in gap")}getMap(){return new bn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new zn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new zn(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zn(n.from,n.to,n.gapFrom,n.gapTo,T.fromJSON(t,n.slice),n.insert,!!n.structure)}};dt.jsonID("replaceAround",Wc);function Gr(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Gc(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),d=r.node(s),u=!1;if(i==1)u=d.canReplace(l,l,o);else{let c=d.contentMatchAt(l).findWrapping(o.firstChild.type);u=c&&d.canReplaceWith(l,l,c[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}let _n=class extends Error{};_n=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};_n.prototype=Object.create(Error.prototype);_n.prototype.constructor=_n;_n.prototype.name="TransformError";const at=typeof navigator<"u"?navigator:null,_i=typeof document<"u"?document:null,ut=at&&at.userAgent||"",Jr=/Edge\/(\d+)/.exec(ut),oa=/MSIE \d/.exec(ut),Kr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ut),xn=!!(oa||Kr||Jr),ia=oa?document.documentMode:Kr?+Kr[1]:Jr?+Jr[1]:0,cr=!xn&&/gecko\/(\d+)/i.test(ut);cr&&+(/Firefox\/(\d+)/.exec(ut)||[0,0])[1];const Zr=!xn&&/Chrome\/(\d+)/.exec(ut),kt=!!Zr,Jc=Zr?+Zr[1]:0,xt=!xn&&!!at&&/Apple Computer/.test(at.vendor),Io=xt&&(/Mobile\/\w+/.test(ut)||!!at&&at.maxTouchPoints>2),Te=Io||(at?/Mac/.test(at.platform):!1),Tn=/Android \d/.test(ut),Mo=!!_i&&"webkitFontSmoothing"in _i.documentElement.style,Kc=Mo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,An=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Zc=function(e,t,n,r){return n&&(wi(e,t,n,r,-1)||wi(e,t,n,r,1))},Xc=/^(img|br|input|textarea|hr)$/i;function wi(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:Yn(e))){let i=e.parentNode;if(!i||i.nodeType!=1||Qc(e)||Xc.test(e.nodeName)||e.contentEditable=="false")return!1;t=An(e)+(o<0?0:1),e=i}else if(e.nodeType==1){if(e=e.childNodes[t+(o<0?-1:0)],e.contentEditable=="false")return!1;t=o<0?Yn(e):0}else return!1}}function Yn(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Yc(e,t,n){for(let r=t==0,o=t==Yn(e);r||o;){if(e==n)return!0;let i=An(e);if(e=e.parentNode,!e)return!1;r=r&&i==0,o=o&&i==Yn(e)}}function Qc(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const sa=function(e){let t=e.isCollapsed;return t&&kt&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function aa(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function eh(e,t=null){let n=e.domSelection(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,d;if(sa(n)){for(l=a;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&z.isSelectable(u)&&o.parent&&!(u.isInline&&Yc(n.focusNode,n.focusOffset,o.dom))){let c=o.posBefore;d=new z(s==c?a:r.resolve(c))}}else{let u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!d){let u=t=="pointer"||e.state.selection.head<a.pos&&!i?1:-1;d=da(e,l,a,u)}return d}function la(e){return e.editable?e.hasFocus():oh(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function No(e,t=!1){let n=e.state.selection;if(rh(e,n),!!la(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&kt){let r=e.domSelection(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Zc(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)nh(e);else{let{anchor:r,head:o}=n,i,s;Ci&&!(n instanceof B)&&(n.$from.parent.inlineContent||(i=Si(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Si(e,n.to))),e.docView.setSelection(r,o,e.root,t),Ci&&(i&&ki(i),s&&ki(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&th(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Ci=xt||kt&&Jc<63;function Si(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(xt&&o&&o.contentEditable=="false")return Ar(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return Ar(o);if(i)return Ar(i)}}function Ar(e){return e.contentEditable="true",xt&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function ki(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function th(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!la(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function nh(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,An(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&xn&&ia<=11&&(r.disabled=!0,r.disabled=!1)}function rh(e,t){if(t instanceof z){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(xi(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else xi(e)}function xi(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function da(e,t,n,r){return e.someProp("createSelectionBetween",o=>o(e,t,n))||B.between(t,n,r)}function oh(e){let t=e.domSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Xr(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&we.findFrom(i,t)}function mt(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ti(e,t,n){let r=e.state.selection;if(r instanceof B){if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){let o=Xr(e.state,t);return o&&o instanceof z?mt(e,o):!1}else if(!(Te&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=t<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM?z.isSelectable(i)?mt(e,new z(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):Mo?mt(e,new B(e.state.doc.resolve(t<0?a:a+i.nodeSize))):!1:!1}}else{if(r instanceof z&&r.node.isInline)return mt(e,new B(t>0?r.$to:r.$from));{let o=Xr(e.state,t);return o?mt(e,o):!1}}}function Qn(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function un(e){let t=e.pmViewDesc;return t&&t.size==0&&(e.nextSibling||e.nodeName!="BR")}function Er(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(cr&&n.nodeType==1&&r<Qn(n)&&un(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(un(a))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(ua(n))break;{let a=n.previousSibling;for(;a&&un(a);)o=n.parentNode,i=An(a),a=a.previousSibling;if(a)n=a,r=Qn(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?Yr(e,t,n,r):o&&Yr(e,t,o,i)}function $r(e){let t=e.domSelection(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o=Qn(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(un(a))i=n,s=++r;else break}else{if(ua(n))break;{let a=n.nextSibling;for(;a&&un(a);)i=a.parentNode,s=An(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Qn(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}}i&&Yr(e,t,i,s)}function ua(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Yr(e,t,n,r){if(sa(t)){let i=document.createRange();i.setEnd(n,r),i.setStart(n,r),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&No(e)},50)}function Ai(e,t,n){let r=e.state.selection;if(r instanceof B&&!r.empty||n.indexOf("s")>-1||Te&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=Xr(e.state,t);if(s&&s instanceof z)return mt(e,s)}if(!o.parent.inlineContent){let s=t<0?o:i,a=r instanceof Qd?we.near(s,t):we.findFrom(s,t);return a?mt(e,a):!1}return!1}function Ei(e,t){if(!(e.state.selection instanceof B))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=e.state.tr;return t<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),e.dispatch(s),!0}return!1}function $i(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function ih(e){if(!xt||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelection();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;$i(e,r,"true"),setTimeout(()=>$i(e,r,"false"),20)}return!1}function sh(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function ah(e,t){let n=t.keyCode,r=sh(t);return n==8||Te&&n==72&&r=="c"?Ei(e,-1)||Er(e):n==46||Te&&n==68&&r=="c"?Ei(e,1)||$r(e):n==13||n==27?!0:n==37||Te&&n==66&&r=="c"?Ti(e,-1,r)||Er(e):n==39||Te&&n==70&&r=="c"?Ti(e,1,r)||$r(e):n==38||Te&&n==80&&r=="c"?Ai(e,-1,r)||Er(e):n==40||Te&&n==78&&r=="c"?ih(e)||Ai(e,1,r)||$r(e):r==(Te?"m":"c")&&(n==66||n==73||n==89||n==90)}function ca(e,t){let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=e.someProp("clipboardSerializer")||Ms.fromSchema(e.state.schema),a=ya(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let d=l.firstChild,u,c=0;for(;d&&d.nodeType==1&&(u=ga[d.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let f=a.createElement(u[p]);for(;l.firstChild;)f.appendChild(l.firstChild);l.appendChild(f),c++}d=l.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${o} ${i}${c?` -${c}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",p=>p(t))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:h}}function ha(e,t,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!t)return null;let l=t&&(r||i||!n);if(l){if(e.someProp("transformPastedText",h=>{t=h(t,i||r)}),i)return t?new T($.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):T.empty;let c=e.someProp("clipboardTextParser",h=>h(t,o,r));if(c)a=c;else{let h=o.marks(),{schema:p}=e.state,f=Ms.fromSchema(p);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(f.serializeNode(p.text(m,h)))})}}else e.someProp("transformPastedHTML",c=>{n=c(n)}),s=uh(n),Mo&&ch(s);let d=s&&s.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let c=+u[3];c>0&&s.firstChild;c--)s=s.firstChild;if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||$s.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!lh.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=hh(Ii(a,+u[1],+u[2]),u[4]);else if(a=T.maxOpen(dh(a.content,o),!0),a.openStart||a.openEnd){let c=0,h=0;for(let p=a.content.firstChild;c<a.openStart&&!p.type.spec.isolating;c++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=Ii(a,c,h)}return e.someProp("transformPasted",c=>{a=c(a)}),a}const lh=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function dh(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o=t.node(n).contentMatchAt(t.index(n)),i,s=[];if(e.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),d;if(!l)return s=null;if(d=s.length&&i.length&&fa(l,i,a,s[s.length-1],0))s[s.length-1]=d;else{s.length&&(s[s.length-1]=ma(s[s.length-1],i.length));let u=pa(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return $.from(s)}return e}function pa(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,$.from(e));return e}function fa(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=fa(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append($.from(pa(n,e,o+1))))}}function ma(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,ma(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore($.empty,!0);return e.copy(n.append(r))}function Qr(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return o<r-1&&(a=Qr(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore($.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Ii(e,t,n){return t<e.openStart&&(e=new T(Qr(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new T(Qr(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const ga={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Mi=null;function ya(){return Mi||(Mi=document.implementation.createHTMLDocument("title"))}function uh(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=ya().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),o;if((o=r&&ga[r[1].toLowerCase()])&&(e=o.map(i=>"<"+i+">").join("")+e+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=e,o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function ch(e){let t=e.querySelectorAll(kt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function hh(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:o,openStart:i,openEnd:s}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=$.from(l.create(r[a+1],o)),i++,s++}return new T(o,i,s)}const Ue={},Ce={};function et(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}Ce.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!ba(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Tn&&kt&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Io&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",o=>o(e,aa(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||ah(e,n)?n.preventDefault():et(e,"key")};Ce.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ce.keypress=(e,t)=>{let n=t;if(ba(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Te&&n.metaKey)return;if(e.someProp("handleKeyPress",o=>o(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof B)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);e.someProp("handleTextInput",i=>i(e,r.$from.pos,r.$to.pos,o))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function hr(e){return{left:e.clientX,top:e.clientY}}function ph(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Lo(e,t,n,r,o){if(r==-1)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,a=>s>i.depth?a(e,n,i.nodeAfter,i.before(s),o,!0):a(e,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Dt(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function fh(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(Dt(e,new z(n),"pointer"),!0):!1}function mh(e,t){if(t==-1)return!1;let n=e.state.selection,r,o;n instanceof z&&(r=n.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(z.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Dt(e,z.create(e.state.doc,o),"pointer"),!0):!1}function gh(e,t,n,r,o){return Lo(e,"handleClickOn",t,n,r)||e.someProp("handleClick",i=>i(e,t,r))||(o?mh(e,n):fh(e,n))}function yh(e,t,n,r){return Lo(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",o=>o(e,t,r))}function vh(e,t,n,r){return Lo(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",o=>o(e,t,r))||bh(e,n,r)}function bh(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Dt(e,B.create(r,0,r.content.size),"pointer"),!0):!1;let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Dt(e,B.create(r,a+1,a+1+s.content.size),"pointer");else if(z.isSelectable(s))Dt(e,z.create(r,a),"pointer");else continue;return!0}}function Ro(e){return er(e)}const va=Te?"metaKey":"ctrlKey";Ue.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Ro(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&ph(n,e.input.lastClick)&&!n[va]&&(e.input.lastClick.type=="singleClick"?i="doubleClick":e.input.lastClick.type=="doubleClick"&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(hr(n));s&&(i=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new _h(e,s,n,!!r)):(i=="doubleClick"?yh:vh)(e,s.pos,s.inside,n)?n.preventDefault():et(e,"pointer"))};class _h{constructor(t,n,r,o){this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[va],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=t.state.doc.nodeAt(n.inside),s=n.inside;else{let u=t.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:d}=t.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof z&&d.from<=s&&d.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&cr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),et(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>No(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(hr(t))),this.allowDefault||!n?et(this.view,"pointer"):gh(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||xt&&this.mightDrag&&!this.mightDrag.node.isAtom||kt&&!(this.view.state.selection instanceof B)&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Dt(this.view,we.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):et(this.view,"pointer")}move(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),et(this.view,"pointer"),t.buttons==0&&this.done()}}Ue.touchstart=e=>{e.input.lastTouch=Date.now(),Ro(e),et(e,"pointer")};Ue.touchmove=e=>{e.input.lastTouch=Date.now(),et(e,"pointer")};Ue.contextmenu=e=>Ro(e);function ba(e,t){return e.composing?!0:xt&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const wh=Tn?5e3:-1;Ce.compositionstart=Ce.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),er(e,!0),e.markCursor=null;else if(er(e),cr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelection();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){r.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}e.input.composing=!0}_a(e,wh)};Ce.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,_a(e,20))};function _a(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>er(e),t))}function Ch(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Sh());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Sh(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function er(e,t=!1){if(!(Tn&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Ch(e),t||e.docView&&e.docView.dirty){let n=eh(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function kh(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Bt=xn&&ia<15||Io&&Kc<604;Ue.copy=Ce.cut=(e,t)=>{let n=t,r=e.state.selection,o=n.type=="cut";if(r.empty)return;let i=Bt?null:n.clipboardData,s=r.content(),{dom:a,text:l}=ca(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):kh(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function xh(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function Th(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?eo(e,r.value,null,t):eo(e,r.textContent,r.innerHTML,t)},50)}function eo(e,t,n,r){let o=ha(e,t,n,e.input.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",a=>a(e,r,o||T.empty)))return!0;if(!o)return!1;let i=xh(o),s=i?e.state.tr.replaceSelectionWith(i,e.input.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ce.paste=(e,t)=>{let n=t;if(e.composing&&!Tn)return;let r=Bt?null:n.clipboardData;r&&eo(e,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():Th(e,n)};class Ah{constructor(t,n){this.slice=t,this.move=n}}const wa=Te?"altKey":"ctrlKey";Ue.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(hr(n));if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof z?o.to-1:o.to))){if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(z.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&e.dispatch(e.state.tr.setSelection(z.create(e.state.doc,d.posBefore)))}}let s=e.state.selection.content(),{dom:a,text:l}=ca(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(Bt?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Bt||n.dataTransfer.setData("text/plain",l),e.dragging=new Ah(s,!n[wa])};Ue.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ce.dragover=Ce.dragenter=(e,t)=>t.preventDefault();Ce.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(hr(n));if(!o)return;let i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",f=>{s=f(s)}):s=ha(e,n.dataTransfer.getData(Bt?"Text":"text/plain"),Bt?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!n[wa]);if(e.someProp("handleDrop",f=>f(e,n,s||T.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?Gc(e.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let d=e.state.tr;a&&d.deleteSelection();let u=d.mapping.map(l),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=d.doc;if(c?d.replaceRangeWith(u,u,s.content.firstChild):d.replaceRange(u,u,s),d.doc.eq(h))return;let p=d.doc.resolve(u);if(c&&z.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))d.setSelection(new z(p));else{let f=d.mapping.map(l);d.mapping.maps[d.mapping.maps.length-1].forEach((m,g,v,y)=>f=y),d.setSelection(da(e,p,d.doc.resolve(f)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};Ue.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelection())&&No(e)},20))};Ue.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Ue.beforeinput=(e,t)=>{if(kt&&Tn&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",i=>i(e,aa(8,"Backspace")))))return;let{$cursor:o}=e.state.selection;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let e in Ce)Ue[e]=Ce[e];function wn(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Do{constructor(t,n){this.toDOM=t,this.spec=n||_t,this.side=this.spec.side||0}map(t,n,r,o){let{pos:i,deleted:s}=t.mapResult(n.from+o,this.side<0?-1:1);return s?null:new Re(i-r,i-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Do&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&wn(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class rt{constructor(t,n){this.attrs=t,this.spec=n||_t}map(t,n,r,o){let i=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Re(i,s,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof rt&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)}static is(t){return t.type instanceof rt}destroy(){}}class Po{constructor(t,n){this.attrs=t,this.spec=n||_t}map(t,n,r,o){let i=t.mapResult(n.from+o,1);if(i.deleted)return null;let s=t.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Re(i.pos-r,s.pos-r,this)}valid(t,n){let{index:r,offset:o}=t.content.findIndex(n.from),i;return o==n.from&&!(i=t.child(r)).isText&&o+i.nodeSize==n.to}eq(t){return this==t||t instanceof Po&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)}destroy(){}}class Re{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Re(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Re(t,t,new Do(n,r))}static inline(t,n,r,o){return new Re(t,n,new rt(r,o))}static node(t,n,r,o){return new Re(t,n,new Po(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof rt}}const Nt=[],_t={};class ue{constructor(t,n){this.local=t.length?t:Nt,this.children=n.length?n:Nt}static create(t,n){return n.length?tr(n,t,0,_t):he}find(t,n,r){let o=[];return this.findInner(t??0,n??1e9,o,0,r),o}findInner(t,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=t&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,n-a,r,o+a,i)}}map(t,n,r){return this==he||t.maps.length==0?this:this.mapInner(t,n,0,0,r||_t)}mapInner(t,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?Eh(this.children,s||[],t,n,r,o,i):s?new ue(s.sort(wt),Nt):he}add(t,n){return n.length?this==he?ue.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let o,i=0;t.forEach((a,l)=>{let d=l+r,u;if(u=Sa(n,a,d)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,d+1):o.splice(i,0,l,l+a.nodeSize,tr(u,a,d+1,_t)),i+=3}});let s=Ca(i?ka(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new ue(s.length?this.local.concat(s).sort(wt):this.local,o||this.children)}remove(t){return t.length==0||this==he?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,c;u<t.length;u++)(c=t[u])&&c.from>a&&c.to<l&&(t[u]=null,(s||(s=[])).push(c));if(!s)continue;r==this.children&&(r=this.children.slice());let d=r[i+2].removeInner(s,a+1);d!=he?r[i+2]=d:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<t.length;i++)if(s=t[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ue(o,r):he}forChild(t,n){if(this==he)return this;if(n.isLeaf)return ue.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let i=t+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof rt){let d=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;d<u&&(o||(o=[])).push(l.copy(d,u))}}if(o){let a=new ue(o.sort(wt),Nt);return r?new gt([a,r]):a}return r||he}eq(t){if(this==t)return!0;if(!(t instanceof ue)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return Oo(this.localsInner(t))}localsInner(t){if(this==he)return Nt;if(t.inlineContent||!this.local.some(rt.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof rt||n.push(this.local[r]);return n}}ue.empty=new ue([],[]);ue.removeOverlap=Oo;const he=ue.empty;class gt{constructor(t){this.members=t}map(t,n){const r=this.members.map(o=>o.map(t,n,_t));return gt.from(r)}forChild(t,n){if(n.isLeaf)return ue.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(t,n);i!=he&&(i instanceof gt?r=r.concat(i.members):r.push(i))}return gt.from(r)}eq(t){if(!(t instanceof gt)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(t);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?Oo(r?n:n.sort(wt)):Nt}static from(t){switch(t.length){case 0:return he;case 1:return t[0];default:return new gt(t)}}}function Eh(e,t,n,r,o,i,s){let a=e.slice();for(let d=0;d<n.maps.length;d++){let u=0;n.maps[d].forEach((c,h,p,f)=>{let m=f-p-(h-c);for(let g=0;g<a.length;g+=3){let v=a[g+1];if(v<0||c>v+i-u)continue;let y=a[g]+i-u;h>=y?a[g+1]=c<=y?-2:-1:p>=o&&m&&(a[g]+=m,a[g+1]+=m)}u+=m})}let l=!1;for(let d=0;d<a.length;d+=3)if(a[d+1]<0){if(a[d+1]==-2){l=!0,a[d+1]=-1;continue}let u=n.map(e[d]+i),c=u-o;if(c<0||c>=r.content.size){l=!0;continue}let h=n.map(e[d+1]+i,-1),p=h-o,{index:f,offset:m}=r.content.findIndex(c),g=r.maybeChild(f);if(g&&m==c&&m+g.nodeSize==p){let v=a[d+2].mapInner(n,g,u+1,e[d]+i+1,s);v!=he?(a[d]=c,a[d+1]=p,a[d+2]=v):(a[d+1]=-2,l=!0)}else l=!0}if(l){let d=$h(a,e,t,n,o,i,s),u=tr(d,r,0,s);t=u.local;for(let c=0;c<a.length;c+=3)a[c+1]<0&&(a.splice(c,3),c-=3);for(let c=0,h=0;c<u.children.length;c+=3){let p=u.children[c];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[c],u.children[c+1],u.children[c+2])}}return new ue(t.sort(wt),a)}function Ca(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Re(o.from+t,o.to+t,o.type))}return n}function $h(e,t,n,r,o,i,s){function a(l,d){for(let u=0;u<l.local.length;u++){let c=l.local[u].map(r,o,d);c?n.push(c):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+d+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+i+1);return n}function Sa(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i=0,s;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function ka(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function tr(e,t,n,r){let o=[],i=!1;t.forEach((a,l)=>{let d=Sa(e,a,l+n);if(d){i=!0;let u=tr(d,a,n+l+1,r);u!=he&&o.push(l,l+a.nodeSize,u)}});let s=Ca(i?ka(e):e,-n).sort(wt);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ue(s,o):he}function wt(e,t){return e.from-t.from||e.to-t.to}function Oo(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from==r.from){i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Ni(t,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Ni(t,o,r.copy(i.from,r.to)));break}}}return t}function Ni(e,t,n){for(;t<e.length&&wt(n,e[t])>0;)t++;e.splice(t,0,n)}const xa=65535,Ta=Math.pow(2,16);function Ih(e,t){return e+t*Ta}function Li(e){return e&xa}function Mh(e){return(e-(e&xa))/Ta}const Aa=1,Ea=2,Bn=4,$a=8;class to{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&$a)>0}get deletedBefore(){return(this.delInfo&(Aa|Bn))>0}get deletedAfter(){return(this.delInfo&(Ea|Bn))>0}get deletedAcross(){return(this.delInfo&Bn)>0}}class Ae{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Ae.empty)return Ae.empty}recover(t){let n=0,r=Li(t);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+Mh(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;let d=this.ranges[a+i],u=this.ranges[a+s],c=l+d;if(t<=c){let h=d?t==l?-1:t==c?1:n:n,p=l+o+(h<0?0:u);if(r)return p;let f=t==(n<0?l:c)?null:Ih(a/3,t-l),m=t==l?Ea:t==c?Aa:Bn;return(n<0?t!=l:t!=c)&&(m|=$a),new to(p,m,f)}o+=u-d}return r?t+o:new to(t+o,0,null)}touches(t,n){let r=0,o=Li(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let d=this.ranges[a+i],u=l+d;if(t<=u&&a==o*3)return!0;r+=this.ranges[a+s]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),d=this.ranges[o+n],u=this.ranges[o+r];t(a,a+d,l,l+u),i+=u-d}}invert(){return new Ae(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Ae.empty:new Ae(t<0?[0,-t,0]:[0,0,t])}}Ae.empty=new Ae([]);class cn{constructor(t=[],n,r=0,o=t.length){this.maps=t,this.mirror=n,this.from=r,this.to=o}slice(t=0,n=this.maps.length){return new cn(this.maps,this.mirror,t,n)}copy(){return new cn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(t){for(let n=0,r=this.maps.length;n<t.maps.length;n++){let o=t.getMirror(n);this.appendMap(t.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){let o=t.getMirror(n);this.appendMap(t.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let t=new cn;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this.maps[i],a=s.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,t=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,t=a.pos}return r?t:new to(t,o,null)}}const Ir=Object.create(null);class be{getMap(){return Ae.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ir[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Ir)throw new RangeError("Duplicate use of step JSON ID "+t);return Ir[t]=n,n.prototype.jsonID=t,n}}class ne{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new ne(t,null)}static fail(t){return new ne(null,t)}static fromReplace(t,n,r,o){try{return ne.ok(t.replace(n,r,o))}catch(i){if(i instanceof Is)return ne.fail(i.message);throw i}}}function Fo(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(Fo(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return $.fromArray(r)}class tt extends be{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new T(Fo(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return ne.fromReplace(t,this.from,this.to,i)}invert(){return new Be(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tt(n.pos,r.pos,this.mark)}merge(t){return t instanceof tt&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new tt(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new tt(n.from,n.to,t.markFromJSON(n.mark))}}be.jsonID("addMark",tt);class Be extends be{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new T(Fo(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),t),n.openStart,n.openEnd);return ne.fromReplace(t,this.from,this.to,r)}invert(){return new tt(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Be(n.pos,r.pos,this.mark)}merge(t){return t instanceof Be&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Be(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Be(n.from,n.to,t.markFromJSON(n.mark))}}be.jsonID("removeMark",Be);class nt extends be{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return ne.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ne.fromReplace(t,this.pos,this.pos+1,new T($.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new nt(this.pos,n.marks[o]);return new nt(this.pos,this.mark)}}return new Vt(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new nt(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new nt(n.pos,t.markFromJSON(n.mark))}}be.jsonID("addNodeMark",nt);class Vt extends be{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return ne.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ne.fromReplace(t,this.pos,this.pos+1,new T($.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new nt(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Vt(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Vt(n.pos,t.markFromJSON(n.mark))}}be.jsonID("removeNodeMark",Vt);class me extends be{constructor(t,n,r,o=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=o}apply(t){return this.structure&&no(t,this.from,this.to)?ne.fail("Structure replace would overwrite content"):ne.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Ae([this.from,this.to-this.from,this.slice.size])}invert(t){return new me(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new me(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof me)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?T.empty:new T(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new me(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?T.empty:new T(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new me(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new me(n.from,n.to,T.fromJSON(t,n.slice),!!n.structure)}}be.jsonID("replace",me);class qe extends be{constructor(t,n,r,o,i,s,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(t){if(this.structure&&(no(t,this.from,this.gapFrom)||no(t,this.gapTo,this.to)))return ne.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ne.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ne.fromReplace(t,this.from,this.to,r):ne.fail("Content does not fit in gap")}getMap(){return new Ae([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new qe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new qe(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qe(n.from,n.to,n.gapFrom,n.gapTo,T.fromJSON(t,n.slice),n.insert,!!n.structure)}}be.jsonID("replaceAround",qe);function no(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Nh(e,t,n,r){let o=[],i=[],s,a;e.doc.nodesBetween(t,n,(l,d,u)=>{if(!l.isInline)return;let c=l.marks;if(!r.isInSet(c)&&u.type.allowsMarkType(r.type)){let h=Math.max(d,t),p=Math.min(d+l.nodeSize,n),f=r.addToSet(c);for(let m=0;m<c.length;m++)c[m].isInSet(f)||(s&&s.to==h&&s.mark.eq(c[m])?s.to=p:o.push(s=new Be(h,p,c[m])));a&&a.to==h?a.to=p:i.push(a=new tt(h,p,r))}}),o.forEach(l=>e.step(l)),i.forEach(l=>e.step(l))}function Lh(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof tu){let d=s.marks,u;for(;u=r.isInSet(d);)(l||(l=[])).push(u),d=u.removeFromSet(d)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let d=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let c=l[u],h;for(let p=0;p<o.length;p++){let f=o[p];f.step==i-1&&c.eq(o[p].style)&&(h=f)}h?(h.to=d,h.step=i):o.push({style:c,from:Math.max(a,t),to:d,step:i})}}}),o.forEach(s=>e.step(new Be(s.from,s.to,s.style)))}function Rh(e,t,n,r=n.contentMatch){let o=e.doc.nodeAt(t),i=[],s=t+1;for(let a=0;a<o.childCount;a++){let l=o.child(a),d=s+l.nodeSize,u=r.matchType(l.type);if(!u)i.push(new me(s,d,T.empty));else{r=u;for(let c=0;c<l.marks.length;c++)n.allowsMarkType(l.marks[c].type)||e.step(new Be(s,d,l.marks[c]))}s=d}if(!r.validEnd){let a=r.fillBefore($.empty,!0);e.replace(s,s,new T(a,0,0))}for(let a=i.length-1;a>=0;a--)e.step(i[a])}function Dh(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),a=o.after(i+1),l=s,d=a,u=$.empty,c=0;for(let f=i,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=$.from(r.node(f).copy(u)),c++):l--;let h=$.empty,p=0;for(let f=i,m=!1;f>n;f--)m||o.after(f+1)<o.end(f)?(m=!0,h=$.from(o.node(f).copy(h)),p++):d++;e.step(new qe(l,d,s,a,new T(u.append(h),c,p),u.size-c,!0))}function Ph(e,t,n){let r=$.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=$.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new qe(o,i,o,i,new T(r,0,0),n.length,!0))}function Oh(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,o)&&Fh(e.doc,e.mapping.slice(i).map(a),r)){e.clearIncompatible(e.mapping.slice(i).map(a,1),r);let l=e.mapping.slice(i),d=l.map(a,1),u=l.map(a+s.nodeSize,1);return e.step(new qe(d,u,d+1,u-1,new T($.from(r.create(o,null,s.marks)),0,0),1,!0)),!1}})}function Fh(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function Uh(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new qe(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new T($.from(s),0,0),1,!0))}function Hh(e,t,n=1,r){let o=e.doc.resolve(t),i=$.empty,s=$.empty;for(let a=o.depth,l=o.depth-n,d=n-1;a>l;a--,d--){i=$.from(o.node(a).copy(i));let u=r&&r[d];s=$.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}e.step(new me(t,t,new T(i.append(s),n,n),!0))}function zh(e,t,n){let r=new me(t-n,t+n,T.empty,!0);e.step(r)}function Bh(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function Vh(e,t,n=t,r=T.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return Ia(o,i,r)?new me(t,n,r):new qh(o,i,r).fit()}function Ia(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class qh{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=$.empty;for(let o=0;o<=t.depth;o++){let i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(let o=t.depth;o>0;o--)this.placed=$.from(t.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new T(i,s,a);return t>-1?new qe(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new me(r.pos,o.pos,l):null}findFittable(){for(let t=1;t<=2;t++)for(let n=this.unplaced.openStart;n>=0;n--){let r,o=null;n?(o=Mr(this.unplaced.content,n-1).firstChild,r=o.content):r=this.unplaced.content;let i=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:a,match:l}=this.frontier[s],d,u=null;if(t==1&&(i?l.matchType(i.type)||(u=l.fillBefore($.from(i),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:s,parent:o,inject:u};if(t==2&&i&&(d=l.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:s,parent:o,wrap:d};if(o&&l.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=Mr(t,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new T(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=Mr(t,n);if(o.childCount<=1&&n>0){let i=t.size-n<=n+o.size;this.unplaced=new T(ln(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new T(ln(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,d=0,u=[],{match:c,type:h}=this.frontier[n];if(o){for(let m=0;m<o.childCount;m++)u.push(o.child(m));c=c.matchFragment(o)}let p=a.size+t-(s.content.size-s.openEnd);for(;d<a.childCount;){let m=a.child(d),g=c.matchType(m.type);if(!g)break;d++,(d>1||l==0||m.content.size)&&(c=g,u.push(Ma(m.mark(h.allowedMarks(m.marks)),d==1?l:0,d==a.childCount?p:-1)))}let f=d==a.childCount;f||(p=-1),this.placed=dn(this.placed,n,$.from(u)),this.frontier[n].match=c,f&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<p;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=f?t==0?T.empty:new T(ln(s.content,t-1,1),t-1,p<0?s.openEnd:t-1):new T(ln(s.content,t,d),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Nr(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=Nr(t,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:d}=this.frontier[a],u=Nr(t,a,d,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=dn(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let o=t.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,t.index(r));this.openFrontierNode(o.type,o.attrs,i)}return t}openFrontierNode(t,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=dn(this.placed,this.depth,$.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore($.empty,!0);n.childCount&&(this.placed=dn(this.placed,this.frontier.length,n))}}function ln(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(ln(e.firstChild.content,t-1,n)))}function dn(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(dn(e.lastChild.content,t-1,n)))}function Mr(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Ma(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Ma(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore($.empty,!0)))),e.copy(r)}function Nr(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!jh(n,i.content,s)?a:null}function jh(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Wh(e){return e.spec.defining||e.spec.definingForContent}function Gh(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(Ia(o,i,r))return e.step(new me(t,n,r));let s=La(o,e.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let h=o.depth,p=o.pos-1;h>0;h--,p--){let f=o.node(h).type.spec;if(f.defining||f.definingAsContext||f.isolating)break;s.indexOf(h)>-1?a=h:o.before(h)==p&&s.splice(1,0,-h)}let l=s.indexOf(a),d=[],u=r.openStart;for(let h=r.content,p=0;;p++){let f=h.firstChild;if(d.push(f),p==r.openStart)break;h=f.content}for(let h=u-1;h>=0;h--){let p=d[h].type,f=Wh(p);if(f&&o.node(l).type!=p)u=h;else if(f||!p.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),f=d[p];if(f)for(let m=0;m<s.length;m++){let g=s[(m+l)%s.length],v=!0;g<0&&(v=!1,g=-g);let y=o.node(g-1),b=o.index(g-1);if(y.canReplaceWith(b,b,f.type,f.marks))return e.replace(o.before(g),v?i.after(g):n,new T(Na(r.content,0,r.openStart,p),p,r.openEnd))}}let c=e.steps.length;for(let h=s.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>c));h--){let p=s[h];p<0||(t=o.before(p),n=i.after(p))}}function Na(e,t,n,r,o){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(Na(i.content,t+1,n,r,i)))}if(t>r){let i=o.contentMatchAt(0),s=i.fillBefore(e).append(e);e=s.append(i.matchFragment(s).fillBefore($.empty,!0))}return e}function Jh(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=Bh(e.doc,t,r.type);o!=null&&(t=n=o)}e.replaceRange(t,n,new T($.from(r),0,0))}function Kh(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=La(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return e.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}function La(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let o=r;o>=0;o--){let i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}class Pt extends be{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return ne.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return ne.fromReplace(t,this.pos,this.pos+1,new T($.from(o),0,n.isLeaf?0:1))}getMap(){return Ae.empty}invert(t){return new Pt(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Pt(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Pt(n.pos,n.attr,n.value)}}be.jsonID("attr",Pt);let qt=class extends Error{};qt=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};qt.prototype=Object.create(Error.prototype);qt.prototype.constructor=qt;qt.prototype.name="TransformError";class Zh{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new cn}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new qt(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=T.empty){let o=Vh(this.doc,t,n,r);return o&&this.step(o),this}replaceWith(t,n,r){return this.replace(t,n,new T($.from(r),0,0))}delete(t,n){return this.replace(t,n,T.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Gh(this,t,n,r),this}replaceRangeWith(t,n,r){return Jh(this,t,n,r),this}deleteRange(t,n){return Kh(this,t,n),this}lift(t,n){return Dh(this,t,n),this}join(t,n=1){return zh(this,t,n),this}wrap(t,n){return Ph(this,t,n),this}setBlockType(t,n=t,r,o=null){return Oh(this,t,n,r,o),this}setNodeMarkup(t,n,r=null,o=[]){return Uh(this,t,n,r,o),this}setNodeAttribute(t,n,r){return this.step(new Pt(t,n,r)),this}addNodeMark(t,n){return this.step(new nt(t,n)),this}removeNodeMark(t,n){if(!(n instanceof eu)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Vt(t,n)),this}split(t,n=1,r){return Hh(this,t,n,r),this}addMark(t,n,r){return Nh(this,t,n,r),this}removeMark(t,n,r){return Lh(this,t,n,r),this}clearIncompatible(t,n,r){return Rh(this,t,n,r),this}}let ro,oo;if(typeof WeakMap<"u"){let e=new WeakMap;ro=t=>e.get(t),oo=(t,n)=>(e.set(t,n),n)}else{let e=[],t=10,n=0;ro=r=>{for(let o=0;o<e.length;o+=2)if(e[o]==r)return e[o+1]},oo=(r,o)=>(n==t&&(n=0),e[n++]=r,e[n++]=o)}class jt{constructor(t,n,r,o){this.left=t,this.top=n,this.right=r,this.bottom=o}}class K{constructor(t,n,r,o){this.width=t,this.height=n,this.map=r,this.problems=o}findCell(t){for(let n=0;n<this.map.length;n++){let r=this.map[n];if(r!=t)continue;let o=n%this.width,i=n/this.width|0,s=o+1,a=i+1;for(let l=1;s<this.width&&this.map[n+l]==r;l++)s++;for(let l=1;a<this.height&&this.map[n+this.width*l]==r;l++)a++;return new jt(o,i,s,a)}throw new RangeError("No cell with offset "+t+" found")}colCount(t){for(let n=0;n<this.map.length;n++)if(this.map[n]==t)return n%this.width;throw new RangeError("No cell with offset "+t+" found")}nextCell(t,n,r){let{left:o,right:i,top:s,bottom:a}=this.findCell(t);return n=="horiz"?(r<0?o==0:i==this.width)?null:this.map[s*this.width+(r<0?o-1:i)]:(r<0?s==0:a==this.height)?null:this.map[o+this.width*(r<0?s-1:a)]}rectBetween(t,n){let{left:r,right:o,top:i,bottom:s}=this.findCell(t),{left:a,right:l,top:d,bottom:u}=this.findCell(n);return new jt(Math.min(r,a),Math.min(i,d),Math.max(o,l),Math.max(s,u))}cellsInRect(t){let n=[],r={};for(let o=t.top;o<t.bottom;o++)for(let i=t.left;i<t.right;i++){let s=o*this.width+i,a=this.map[s];r[a]||(r[a]=!0,(i!=t.left||!i||this.map[s-1]!=a)&&(o!=t.top||!o||this.map[s-this.width]!=a)&&n.push(a))}return n}positionAt(t,n,r){for(let o=0,i=0;;o++){let s=i+r.child(o).nodeSize;if(o==t){let a=n+t*this.width,l=(t+1)*this.width;for(;a<l&&this.map[a]<i;)a++;return a==l?s-1:this.map[a]}i=s}}static get(t){return ro(t)||oo(t,Xh(t))}}function Xh(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);let t=Yh(e),n=e.childCount,r=[],o=0,i=null,s=[];for(let d=0,u=t*n;d<u;d++)r[d]=0;for(let d=0,u=0;d<n;d++){let c=e.child(d);u++;for(let f=0;;f++){for(;o<r.length&&r[o]!=0;)o++;if(f==c.childCount)break;let m=c.child(f),{colspan:g,rowspan:v,colwidth:y}=m.attrs;for(let b=0;b<v;b++){if(b+d>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:v-b});break}let x=o+b*t;for(let _=0;_<g;_++){r[x+_]==0?r[x+_]=u:(i||(i=[])).push({type:"collision",row:d,pos:u,n:g-_});let C=y&&y[_];if(C){let k=(x+_)%t*2,E=s[k];E==null||E!=C&&s[k+1]==1?(s[k]=C,s[k+1]=1):E==C&&s[k+1]++}}}o+=g,u+=m.nodeSize}let h=(d+1)*t,p=0;for(;o<h;)r[o++]==0&&p++;p&&(i||(i=[])).push({type:"missing",row:d,n:p}),u++}let a=new K(t,n,r,i),l=!1;for(let d=0;!l&&d<s.length;d+=2)s[d]!=null&&s[d+1]<n&&(l=!0);return l&&Qh(a,s,e),a}function Yh(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){let o=e.child(r),i=0;if(n)for(let s=0;s<r;s++){let a=e.child(s);for(let l=0;l<a.childCount;l++){let d=a.child(l);s+d.attrs.rowspan>r&&(i+=d.attrs.colspan)}}for(let s=0;s<o.childCount;s++){let a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function Qh(e,t,n){e.problems||(e.problems=[]);for(let r=0,o={};r<e.map.length;r++){let i=e.map[r];if(o[i])continue;o[i]=!0;let s=n.nodeAt(i),a=null;for(let l=0;l<s.attrs.colspan;l++){let d=(r+l)%e.width,u=t[d*2];u!=null&&(!s.attrs.colwidth||s.attrs.colwidth[l]!=u)&&((a||(a=ep(s.attrs)))[l]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function ep(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ce(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(let n in e.nodes){let r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}const Xe=new ye("selectingCells");function Xt(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function tp(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function Ie(e){let t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function pr(e){let t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&t.node.type.spec.tableRole=="cell"?t.$anchor:Xt(t.$head)||np(t.$head)}function np(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function io(e){return e.parent.type.spec.tableRole=="row"&&e.nodeAfter}function rp(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function Uo(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Ra(e,t,n){let r=e.start(-1),i=K.get(e.node(-1)).nextCell(e.pos-r,t,n);return i==null?null:e.node(0).resolve(r+i)}function ae(e,t,n){let r={};for(let o in e)r[o]=e[o];return r[t]=n,r}function Ct(e,t,n=1){let r=ae(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function Da(e,t,n=1){let r=ae(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function op(e,t,n){let r=ce(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}class L extends we{constructor(t,n=t){let r=t.node(-1),o=K.get(r),i=t.start(-1),s=o.rectBetween(t.pos-i,n.pos-i),a=t.node(0),l=o.cellsInRect(s).filter(u=>u!=n.pos-i);l.unshift(n.pos-i);let d=l.map(u=>{let c=r.nodeAt(u),h=u+i+1;return new ru(a.resolve(h),a.resolve(h+c.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=t,this.$headCell=n}map(t,n){let r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(io(r)&&io(o)&&Uo(r,o)){let i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?L.rowSelection(r,o):i&&this.isColSelection()?L.colSelection(r,o):new L(r,o)}return B.between(r,o)}content(){let t=this.$anchorCell.node(-1),n=K.get(t),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let l=o.top;l<o.bottom;l++){let d=[];for(let u=l*n.width+o.left,c=o.left;c<o.right;c++,u++){let h=n.map[u];if(!i[h]){i[h]=!0;let p=n.findCell(h),f=t.nodeAt(h),m=o.left-p.left,g=p.right-o.right;if(m>0||g>0){let v=f.attrs;m>0&&(v=Ct(v,0,m)),g>0&&(v=Ct(v,v.colspan-g,g)),p.left<o.left?f=f.type.createAndFill(v):f=f.type.create(v,f.content)}if(p.top<o.top||p.bottom>o.bottom){let v=ae(f.attrs,"rowspan",Math.min(p.bottom,o.bottom)-Math.max(p.top,o.top));p.top<o.top?f=f.type.createAndFill(v):f=f.type.create(v,f.content)}d.push(f)}}s.push(t.child(l).copy($.from(d)))}const a=this.isColSelection()&&this.isRowSelection()?t:s;return new T($.from(a),1,1)}replace(t,n=T.empty){let r=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],d=t.mapping.slice(r);t.replace(d.map(a.pos),d.map(l.pos),s?T.empty:n)}let i=we.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);i&&t.setSelection(i)}replaceWith(t,n){this.replace(t,new T($.from(n),0,0))}forEachCell(t){let n=this.$anchorCell.node(-1),r=K.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)t(n.nodeAt(i[s]),o+i[s])}isColSelection(){let t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;let r=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){let r=K.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new L(t,n)}isRowSelection(){let t=K.get(this.$anchorCell.node(-1)),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;let i=r+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==t.width}eq(t){return t instanceof L&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){let r=K.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new L(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new L(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new L(t.resolve(n),t.resolve(r))}getBookmark(){return new Ho(this.$anchorCell.pos,this.$headCell.pos)}}L.prototype.visible=!1;we.jsonID("cell",L);class Ho{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Ho(t.map(this.anchor),t.map(this.head))}resolve(t){let n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Uo(n,r)?new L(n,r):we.near(r,1)}}function ip(e){if(!(e.selection instanceof L))return null;let t=[];return e.selection.forEachCell((n,r)=>{t.push(Re.node(r,r+n.nodeSize,{class:"selectedCell"}))}),ue.create(e.doc,t)}function sp({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0&&!(e.after(o+1)<e.end(o));o--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,r--);return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function ap({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){let i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=t.depth;o>0;o--){let i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&t.parentOffset===0}function lp(e,t,n){let r=(t||e).selection,o=(t||e).doc,i,s;if(r instanceof z&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=L.create(o,r.from);else if(s=="row"){let a=o.resolve(r.from+1);i=L.rowSelection(a,a)}else if(!n){let a=K.get(r.node),l=r.from+1,d=l+a.map[a.width*a.height-1];i=L.create(o,l+1,d)}}else r instanceof B&&sp(r)?i=B.create(o,r.from):r instanceof B&&ap(r)&&(i=B.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}function dp(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.firstChild.type.spec.tableRole=="table");)n--,r--,t=t.firstChild.content;let o=t.firstChild,i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<t.childCount;l++){let d=t.child(l).content,u=l?0:Math.max(0,n-1),c=l<t.childCount-1?0:Math.max(0,r-1);(u||c)&&(d=so(ce(s).row,new T(d,u,c)).content),a.push(d)}else if(i=="cell"||i=="header_cell")a.push(n||r?so(ce(s).row,new T(t,n,r)).content:t);else return null;return up(s,a)}function up(e,t){let n=[];for(let o=0;o<t.length;o++){let i=t[o];for(let s=i.childCount-1;s>=0;s--){let{rowspan:a,colspan:l}=i.child(s).attrs;for(let d=o;d<o+a;d++)n[d]=(n[d]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push($.empty),n[o]<r){let i=ce(e).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);t[o]=t[o].append($.from(s))}return{height:t.length,width:r,rows:t}}function so(e,t){let n=e.createAndFill();return new Zh(n).replace(0,n.content.size,t).doc}function cp({width:e,height:t,rows:n},r,o){if(e!=r){let i=[],s=[];for(let a=0;a<n.length;a++){let l=n[a],d=[];for(let u=i[a]||0,c=0;u<r;c++){let h=l.child(c%l.childCount);u+h.attrs.colspan>r&&(h=h.type.create(Ct(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),d.push(h),u+=h.attrs.colspan;for(let p=1;p<h.attrs.rowspan;p++)i[a+p]=(i[a+p]||0)+h.attrs.colspan}s.push($.from(d))}n=s,e=r}if(t!=o){let i=[];for(let s=0,a=0;s<o;s++,a++){let l=[],d=n[a%t];for(let u=0;u<d.childCount;u++){let c=d.child(u);s+c.attrs.rowspan>o&&(c=c.type.create(ae(c.attrs,"rowspan",Math.max(1,o-c.attrs.rowspan)),c.content)),l.push(c)}i.push($.from(l))}n=i,t=o}return{width:e,height:t,rows:n}}function hp(e,t,n,r,o,i,s){let a=e.doc.type.schema,l=ce(a),d,u;if(o>t.width)for(let c=0,h=0;c<t.height;c++){let p=n.child(c);h+=p.nodeSize;let f=[],m;p.lastChild==null||p.lastChild.type==l.cell?m=d||(d=l.cell.createAndFill()):m=u||(u=l.header_cell.createAndFill());for(let g=t.width;g<o;g++)f.push(m);e.insert(e.mapping.slice(s).map(h-1+r),f)}if(i>t.height){let c=[];for(let f=0,m=(t.height-1)*t.width;f<Math.max(t.width,o);f++){let g=f>=t.width?!1:n.nodeAt(t.map[m+f]).type==l.header_cell;c.push(g?u||(u=l.header_cell.createAndFill()):d||(d=l.cell.createAndFill()))}let h=l.row.create(null,$.from(c)),p=[];for(let f=t.height;f<i;f++)p.push(h);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),p)}return!!(d||u)}function Ri(e,t,n,r,o,i,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let d=o;d<i;d++){let u=s*t.width+d,c=t.map[u];if(t.map[u-t.width]==c){l=!0;let h=n.nodeAt(c),{top:p,left:f}=t.findCell(c);e.setNodeMarkup(e.mapping.slice(a).map(c+r),null,ae(h.attrs,"rowspan",s-p)),e.insert(e.mapping.slice(a).map(t.positionAt(s,f,n)),h.type.createAndFill(ae(h.attrs,"rowspan",p+h.attrs.rowspan-s))),d+=h.attrs.colspan-1}}return l}function Di(e,t,n,r,o,i,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let d=o;d<i;d++){let u=d*t.width+s,c=t.map[u];if(t.map[u-1]==c){l=!0;let h=n.nodeAt(c),p=t.colCount(c),f=e.mapping.slice(a).map(c+r);e.setNodeMarkup(f,null,Ct(h.attrs,s-p,h.attrs.colspan-(s-p))),e.insert(f+h.nodeSize,h.type.createAndFill(Ct(h.attrs,0,s-p))),d+=h.attrs.rowspan-1}}return l}function Pi(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc,s=K.get(i),{top:a,left:l}=r,d=l+o.width,u=a+o.height,c=e.tr,h=0;function p(){i=n?c.doc.nodeAt(n-1):c.doc,s=K.get(i),h=c.mapping.maps.length}hp(c,s,i,n,d,u,h)&&p(),Ri(c,s,i,n,l,d,a,h)&&p(),Ri(c,s,i,n,l,d,u,h)&&p(),Di(c,s,i,n,a,u,l,h)&&p(),Di(c,s,i,n,a,u,d,h)&&p();for(let f=a;f<u;f++){let m=s.positionAt(f,l,i),g=s.positionAt(f,d,i);c.replace(c.mapping.slice(h).map(m+n),c.mapping.slice(h).map(g+n),new T(o.rows[f-a],0,0))}p(),c.setSelection(new L(c.doc.resolve(n+s.positionAt(a,l,i)),c.doc.resolve(n+s.positionAt(u-1,d-1,i)))),t(c)}const pp=nu({ArrowLeft:Dn("horiz",-1),ArrowRight:Dn("horiz",1),ArrowUp:Dn("vert",-1),ArrowDown:Dn("vert",1),"Shift-ArrowLeft":Pn("horiz",-1),"Shift-ArrowRight":Pn("horiz",1),"Shift-ArrowUp":Pn("vert",-1),"Shift-ArrowDown":Pn("vert",1),Backspace:On,"Mod-Backspace":On,Delete:On,"Mod-Delete":On});function Vn(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Dn(e,t){return(n,r,o)=>{let i=n.selection;if(i instanceof L)return Vn(n,r,we.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;let s=Pa(o,e,t);if(s==null)return!1;if(e=="horiz")return Vn(n,r,we.near(n.doc.resolve(i.head+t),t));{let a=n.doc.resolve(s),l=Ra(a,e,t),d;return l?d=we.near(l,1):t<0?d=we.near(n.doc.resolve(a.before(-1)),-1):d=we.near(n.doc.resolve(a.after(-1)),1),Vn(n,r,d)}}}function Pn(e,t){return(n,r,o)=>{let i=n.selection;if(!(i instanceof L)){let a=Pa(o,e,t);if(a==null)return!1;i=new L(n.doc.resolve(a))}let s=Ra(i.$headCell,e,t);return s?Vn(n,r,new L(i.$anchorCell,s)):!1}}function On(e,t){let n=e.selection;if(!(n instanceof L))return!1;if(t){let r=e.tr,o=ce(e.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new T(o,0,0))}),r.docChanged&&t(r)}return!0}function fp(e,t){let n=e.state.doc,r=Xt(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new L(r))),!0):!1}function mp(e,t,n){if(!Ie(e.state))return!1;let r=dp(n),o=e.state.selection;if(o instanceof L){r||(r={width:1,height:1,rows:[$.from(so(ce(e.state.schema).cell,n))]});let i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=K.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=cp(r,a.right-a.left,a.bottom-a.top),Pi(e.state,e.dispatch,s,a,r),!0}else if(r){let i=pr(e.state),s=i.start(-1);return Pi(e.state,e.dispatch,s,K.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function gp(e,t){if(t.ctrlKey||t.metaKey)return;let n=Oi(e,t.target),r;if(t.shiftKey&&e.state.selection instanceof L)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&n&&(r=Xt(e.state.selection.$anchor))!=null&&Lr(e,t).pos!=r.pos)o(r,t),t.preventDefault();else if(!n)return;function o(a,l){let d=Lr(e,l),u=Xe.getState(e.state)==null;if(!d||!Uo(a,d))if(u)d=a;else return;let c=new L(a,d);if(u||!e.state.selection.eq(c)){let h=e.state.tr.setSelection(c);u&&h.setMeta(Xe,a.pos),e.dispatch(h)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),Xe.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Xe,-1))}function s(a){let l=Xe.getState(e.state),d;if(l!=null)d=e.state.doc.resolve(l);else if(Oi(e,a.target)!=n&&(d=Lr(e,t),!d))return i();d&&o(d,a)}e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function Pa(e,t,n){if(!(e.state.selection instanceof B))return null;let{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){let i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){let a=r.before(o),l=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function Oi(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t}function Lr(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Xt(e.state.doc.resolve(n.pos)):null}const yp=new ye("fix-tables");function Oa(e,t,n,r){let o=e.childCount,i=t.childCount;e:for(let s=0,a=0;s<i;s++){let l=t.child(s);for(let d=a,u=Math.min(o,s+3);d<u;d++)if(e.child(d)==l){a=d+1,n+=l.nodeSize;continue e}r(l,n),a<o&&e.child(a).sameMarkup(l)?Oa(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Fa(e,t){let n,r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=vp(e,o,i,n))};return t?t.doc!=e.doc&&Oa(t.doc,e.doc,0,r):e.doc.descendants(r),n}function vp(e,t,n,r){let o=K.get(t);if(!o.problems)return r;r||(r=e.tr);let i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){let d=o.problems[l];if(d.type=="collision"){let u=t.nodeAt(d.pos);for(let c=0;c<u.attrs.rowspan;c++)i[d.row+c]+=d.n;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,Ct(u.attrs,u.attrs.colspan-d.n,d.n))}else if(d.type=="missing")i[d.row]+=d.n;else if(d.type=="overlong_rowspan"){let u=t.nodeAt(d.pos);r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,ae(u.attrs,"rowspan",u.attrs.rowspan-d.n))}else if(d.type=="colwidth mismatch"){let u=t.nodeAt(d.pos);r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,ae(u.attrs,"colwidth",d.colwidth))}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,d=n+1;l<o.height;l++){let u=t.child(l),c=d+u.nodeSize,h=i[l];if(h>0){let p="cell";u.firstChild&&(p=u.firstChild.type.spec.tableRole);let f=[];for(let g=0;g<h;g++)f.push(ce(e.schema)[p].createAndFill());let m=(l==0||s==l-1)&&a==l?d+1:c-1;r.insert(r.mapping.map(m),f)}d=c}return r.setMeta(yp,{fixTables:!0})}function He(e){let t=e.selection,n=pr(e),r=n.node(-1),o=n.start(-1),i=K.get(r),s;return t instanceof L?s=i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):s=i.findCell(n.pos-o),s.tableStart=o,s.map=i,s.table=r,s}function Ua(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;op(t,r,o+i)&&(i=o==0||o==t.width?null:0);for(let s=0;s<t.height;s++){let a=s*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){let l=t.map[a],d=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,Da(d.attrs,o-t.colCount(l))),s+=d.attrs.rowspan-1}else{let l=i==null?ce(r.type.schema).cell:r.nodeAt(t.map[a+i]).type,d=t.positionAt(s,o,r);e.insert(e.mapping.map(n+d),l.createAndFill())}}return e}function bp(e,t){if(!Ie(e))return!1;if(t){let n=He(e);t(Ua(e.tr,n,n.left))}return!0}function _p(e,t){if(!Ie(e))return!1;if(t){let n=He(e);t(Ua(e.tr,n,n.right))}return!0}function wp(e,{map:t,table:n,tableStart:r},o){let i=e.mapping.maps.length;for(let s=0;s<t.height;){let a=s*t.width+o,l=t.map[a],d=n.nodeAt(l);if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,Ct(d.attrs,o-t.colCount(l)));else{let u=e.mapping.slice(i).map(r+l);e.delete(u,u+d.nodeSize)}s+=d.attrs.rowspan}}function Cp(e,t){if(!Ie(e))return!1;if(t){let n=He(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;wp(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=K.get(n.table);t(r)}return!0}function Sp(e,t,n){let r=ce(t.type.schema).header_cell;for(let o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0}function Ha(e,{map:t,tableStart:n,table:r},o){let i=n;for(let l=0;l<o;l++)i+=r.child(l).nodeSize;let s=[],a=o>0?-1:0;Sp(t,r,o+a)&&(a=o==0||o==t.height?null:0);for(let l=0,d=t.width*o;l<t.width;l++,d++)if(o>0&&o<t.height&&t.map[d]==t.map[d-t.width]){let u=t.map[d],c=r.nodeAt(u).attrs;e.setNodeMarkup(n+u,null,ae(c,"rowspan",c.rowspan+1)),l+=c.colspan-1}else{let u=a==null?ce(r.type.schema).cell:r.nodeAt(t.map[d+a*t.width]).type;s.push(u.createAndFill())}return e.insert(i,ce(r.type.schema).row.create(null,s)),e}function kp(e,t){if(!Ie(e))return!1;if(t){let n=He(e);t(Ha(e.tr,n,n.top))}return!0}function xp(e,t){if(!Ie(e))return!1;if(t){let n=He(e);t(Ha(e.tr,n,n.bottom))}return!0}function Tp(e,{map:t,table:n,tableStart:r},o){let i=0;for(let l=0;l<o;l++)i+=n.child(l).nodeSize;let s=i+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(i+r,s+r);for(let l=0,d=o*t.width;l<t.width;l++,d++){let u=t.map[d];if(o>0&&u==t.map[d-t.width]){let c=n.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(a).map(u+r),null,ae(c,"rowspan",c.rowspan-1)),l+=c.colspan-1}else if(o<t.width&&u==t.map[d+t.width]){let c=n.nodeAt(u),h=c.type.create(ae(c.attrs,"rowspan",c.attrs.rowspan-1),c.content),p=t.positionAt(o+1,l,n);e.insert(e.mapping.slice(a).map(r+p),h),l+=c.attrs.colspan-1}}}function Ap(e,t){if(!Ie(e))return!1;if(t){let n=He(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Tp(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=K.get(n.table);t(r)}return!0}function Fi(e){let t=e.content;return t.childCount==1&&t.firstChild.isTextblock&&t.firstChild.childCount==0}function Ep({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[a]==n[a+1])return!0;i+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}function Ui(e,t){let n=e.selection;if(!(n instanceof L)||n.$anchorCell.pos==n.$headCell.pos)return!1;let r=He(e),{map:o}=r;if(Ep(o,r))return!1;if(t){let i=e.tr,s={},a=$.empty,l,d;for(let u=r.top;u<r.bottom;u++)for(let c=r.left;c<r.right;c++){let h=o.map[u*o.width+c],p=r.table.nodeAt(h);if(!s[h])if(s[h]=!0,l==null)l=h,d=p;else{Fi(p)||(a=a.append(p.content));let f=i.mapping.map(h+r.tableStart);i.delete(f,f+p.nodeSize)}}if(i.setNodeMarkup(l+r.tableStart,null,ae(Da(d.attrs,d.attrs.colspan,r.right-r.left-d.attrs.colspan),"rowspan",r.bottom-r.top)),a.size){let u=l+1+d.content.size,c=Fi(d)?l+1:u;i.replaceWith(c+r.tableStart,u+r.tableStart,a)}i.setSelection(new L(i.doc.resolve(l+r.tableStart))),t(i)}return!0}function Hi(e,t){const n=ce(e.schema);return $p(({node:r})=>n[r.type.spec.tableRole])(e,t)}function $p(e){return(t,n)=>{let r=t.selection,o,i;if(r instanceof L){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{if(o=tp(r.$from),!o)return!1;i=Xt(r.$from).pos}if(o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let s=o.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=ae(s,"rowspan",1)),s.colspan>1&&(s=ae(s,"colspan",1));let d=He(t),u=t.tr;for(let h=0;h<d.right-d.left;h++)a.push(l?ae(s,"colwidth",l&&l[h]?[l[h]]:null):s);let c;for(let h=d.top;h<d.bottom;h++){let p=d.map.positionAt(h,d.left,d.table);h==d.top&&(p+=o.nodeSize);for(let f=d.left,m=0;f<d.right;f++,m++)f==d.left&&h==d.top||u.insert(c=u.mapping.map(p+d.tableStart,1),e({node:o,row:h,col:f}).createAndFill(a[m]))}u.setNodeMarkup(i,e({node:o,row:d.top,col:d.left}),a[0]),r instanceof L&&u.setSelection(new L(u.doc.resolve(r.$anchorCell.pos),c&&u.doc.resolve(c))),n(u)}return!0}}function Ip(e,t){return function(n,r){if(!Ie(n))return!1;let o=pr(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){let i=n.tr;n.selection instanceof L?n.selection.forEachCell((s,a)=>{s.attrs[e]!==t&&i.setNodeMarkup(a,null,ae(s.attrs,e,t))}):i.setNodeMarkup(o.pos,null,ae(o.nodeAfter.attrs,e,t)),r(i)}return!0}}function Mp(e){return function(t,n){if(!Ie(t))return!1;if(n){let r=ce(t.schema),o=He(t),i=t.tr,s=o.map.cellsInRect(e=="column"?new jt(o.left,0,o.right,o.map.height):e=="row"?new jt(0,o.top,o.map.width,o.bottom):o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function zi(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<r.length;o++){const i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Cn(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?Mp(e):function(n,r){if(!Ie(n))return!1;if(r){let o=ce(n.schema),i=He(n),s=n.tr,a=zi("row",i,o),l=zi("column",i,o),u=(e==="column"?a:e==="row"?l:!1)?1:0,c=e=="column"?new jt(0,u,1,i.map.height):e=="row"?new jt(u,0,i.map.width,1):i,h=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(c).forEach(p=>{const f=p+i.tableStart,m=s.doc.nodeAt(f);m&&s.setNodeMarkup(f,h,m.attrs)}),r(s)}return!0}}Cn("row",{useDeprecatedLogic:!0});Cn("column",{useDeprecatedLogic:!0});let Np=Cn("cell",{useDeprecatedLogic:!0});function Lp(e,t){if(t<0){let n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,o=e.before();r>=0;r--){let i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let n=e.node(-1);for(let r=e.indexAfter(-1),o=e.after();r<n.childCount;r++){let i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}}function Bi(e){return function(t,n){if(!Ie(t))return!1;let r=Lp(pr(t),e);if(r!=null){if(n){let o=t.doc.resolve(r);n(t.tr.setSelection(B.between(o,rp(o))).scrollIntoView())}return!0}}}function Rp(e,t){let n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}let Dp=class{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ao(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,ao(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function ao(e,t,n,r,o,i){let s=0,a=!0,l=t.firstChild,d=e.firstChild;for(let u=0,c=0;u<d.childCount;u++){let{colspan:h,colwidth:p}=d.child(u).attrs;for(let f=0;f<h;f++,c++){let m=o==c?i:p&&p[f],g=m?m+"px":"";s+=m||r,m||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}}for(;l;){let u=l.nextSibling;l.parentNode.removeChild(l),l=u}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}const Ee=new ye("tableColumnResizing");function Pp({handleWidth:e=5,cellMinWidth:t=25,View:n=Dp,lastColumnResizable:r=!0}={}){return new Se({key:Ee,state:{init(i,s){return this.spec.props.nodeViews[ce(s.schema).table.name]=(a,l)=>new n(a,t,l),new hn(-1,!1)},apply(i,s){return s.apply(i)}},props:{attributes(i){return Ee.getState(i).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove(i,s){Op(i,s,e,t,r)},mouseleave(i){Fp(i)},mousedown(i,s){Up(i,s,t)}},decorations(i){let s=Ee.getState(i);if(s.activeHandle>-1)return jp(i,s.activeHandle)},nodeViews:{}}})}class hn{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){let n=this,r=t.getMeta(Ee);if(r&&r.setHandle!=null)return new hn(r.setHandle,null);if(r&&r.setDragging!==void 0)return new hn(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let o=t.mapping.map(n.activeHandle,-1);io(t.doc.resolve(o))||(o=null),n=new hn(o,n.dragging)}return n}}function Op(e,t,n,r,o){let i=Ee.getState(e.state);if(!i.dragging){let s=zp(t.target),a=-1;if(s){let{left:l,right:d}=s.getBoundingClientRect();t.clientX-l<=n?a=Vi(e,t,"left"):d-t.clientX<=n&&(a=Vi(e,t,"right"))}if(a!=i.activeHandle){if(!o&&a!==-1){let l=e.state.doc.resolve(a),d=l.node(-1),u=K.get(d),c=l.start(-1);if(u.colCount(l.pos-c)+l.nodeAfter.attrs.colspan-1==u.width-1)return}za(e,a)}}}function Fp(e){let t=Ee.getState(e.state);t.activeHandle>-1&&!t.dragging&&za(e,-1)}function Up(e,t,n){let r=Ee.getState(e.state);if(r.activeHandle==-1||r.dragging)return!1;let o=e.state.doc.nodeAt(r.activeHandle),i=Hp(e,r.activeHandle,o.attrs);e.dispatch(e.state.tr.setMeta(Ee,{setDragging:{startX:t.clientX,startWidth:i}}));function s(l){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);let d=Ee.getState(e.state);d.dragging&&(Bp(e,d.activeHandle,qi(d.dragging,l,n)),e.dispatch(e.state.tr.setMeta(Ee,{setDragging:null})))}function a(l){if(!l.which)return s(l);let d=Ee.getState(e.state),u=qi(d.dragging,l,n);Vp(e,d.activeHandle,u,n)}return window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function Hp(e,t,{colspan:n,colwidth:r}){let o=r&&r[r.length-1];if(o)return o;let i=e.domAtPos(t),a=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let d=0;d<n;d++)r[d]&&(a-=r[d],l--);return a/l}function zp(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Vi(e,t,n){let r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;let{pos:o}=r,i=Xt(e.state.doc.resolve(o));if(!i)return-1;if(n=="right")return i.pos;let s=K.get(i.node(-1)),a=i.start(-1),l=s.map.indexOf(i.pos-a);return l%s.width==0?-1:a+s.map[l-1]}function qi(e,t,n){let r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function za(e,t){e.dispatch(e.state.tr.setMeta(Ee,{setHandle:t}))}function Bp(e,t,n){let r=e.state.doc.resolve(t),o=r.node(-1),i=K.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let d=0;d<i.height;d++){let u=d*i.width+a;if(d&&i.map[u]==i.map[u-i.width])continue;let c=i.map[u],{attrs:h}=o.nodeAt(c),p=h.colspan==1?0:a-i.colCount(c);if(h.colwidth&&h.colwidth[p]==n)continue;let f=h.colwidth?h.colwidth.slice():qp(h.colspan);f[p]=n,l.setNodeMarkup(s+c,null,ae(h,"colwidth",f))}l.docChanged&&e.dispatch(l)}function Vp(e,t,n,r){let o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=K.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=e.domAtPos(o.start(-1)).node;for(;l.nodeName!="TABLE";)l=l.parentNode;ao(i,l.firstChild,l,r,a,n)}function qp(e){let t=[];for(let n=0;n<e;n++)t.push(0);return t}function jp(e,t){let n=[],r=e.doc.resolve(t),o=r.node(-1),i=K.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let l=0;l<i.height;l++){let d=a+l*i.width-1;if((a==i.width||i.map[d]!=i.map[d+1])&&(l==0||i.map[d-1]!=i.map[d-1-i.width])){let u=i.map[d],c=s+u+o.nodeAt(u).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(Re.widget(c,h))}}return ue.create(e.doc,n)}function Wp({allowTableNodeSelection:e=!1}={}){return new Se({key:Xe,state:{init(){return null},apply(t,n){let r=t.getMeta(Xe);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;let{deleted:o,pos:i}=t.mapping.mapResult(n);return o?null:i}},props:{decorations:ip,handleDOMEvents:{mousedown:gp},createSelectionBetween(t){if(Xe.getState(t.state)!=null)return t.state.selection},handleTripleClick:fp,handleKeyDown:pp,handlePaste:mp},appendTransaction(t,n,r){return lp(r,Fa(r,n),e)}})}function ji(e,t,n,r,o,i){let s=0,a=!0,l=t.firstChild;const d=e.firstChild;for(let u=0,c=0;u<d.childCount;u+=1){const{colspan:h,colwidth:p}=d.child(u).attrs;for(let f=0;f<h;f+=1,c+=1){const m=o===c?i:p&&p[f],g=m?`${m}px`:"";s+=m||r,m||(a=!1),l?(l.style.width!==g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}}for(;l;){const u=l.nextSibling;l.parentNode.removeChild(l),l=u}a?(n.style.width=`${s}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${s}px`)}class Gp{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ji(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,ji(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type==="attributes"&&(t.target===this.table||this.colgroup.contains(t.target))}}function Wi(e,t){return t?e.createChecked(null,t):e.createAndFill()}function Jp(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function Kp(e,t,n,r,o){const i=Jp(e),s=[],a=[];for(let d=0;d<n;d+=1){const u=Wi(i.cell,o);if(u&&a.push(u),r){const c=Wi(i.header_cell,o);c&&s.push(c)}}const l=[];for(let d=0;d<t;d+=1)l.push(i.row.createChecked(null,r&&d===0?s:a));return i.table.createChecked(null,l)}function Zp(e){return e instanceof L}const Fn=({editor:e})=>{const{selection:t}=e.state;if(!Zp(t))return!1;let n=0;const r=su(t.ranges[0].$from,i=>i.type.name==="table");return r?.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},Xp=Fe.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Gp,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:e}){return["table",Je(this.options.HTMLAttributes,e),["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:i})=>{const s=Kp(i.schema,e,t,n);if(o){const a=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(B.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>bp(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>_p(e,t),deleteColumn:()=>({state:e,dispatch:t})=>Cp(e,t),addRowBefore:()=>({state:e,dispatch:t})=>kp(e,t),addRowAfter:()=>({state:e,dispatch:t})=>xp(e,t),deleteRow:()=>({state:e,dispatch:t})=>Ap(e,t),deleteTable:()=>({state:e,dispatch:t})=>Rp(e,t),mergeCells:()=>({state:e,dispatch:t})=>Ui(e,t),splitCell:()=>({state:e,dispatch:t})=>Hi(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>Cn("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>Cn("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>Np(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>Ui(e,t)?!0:Hi(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>Ip(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>Bi(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>Bi(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Fa(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const r=L.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Fn,"Mod-Backspace":Fn,Delete:Fn,"Mod-Delete":Fn}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Pp({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Wp({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:ou(iu(e,"tableRole",t))}}});function ot(e){return Ie(e)?He(e):void 0}const Yp=e=>{const t=ot(e);if(!t)return{firstCellPos:0,LastCellPos:0};const n=t.tableStart+1,r=t.map.map[t.map.map.length-1],o=n+r-1;return{firstCellPos:n,LastCellPos:o}},Gi=e=>{const t=ot(e),n={col:{start:0,end:0},row:{start:0,end:0}};if(!t)return n;const r=t.left+t.top*t.map.width,o=t.right-1+(t.bottom-1)*t.map.width,i=r%t.map.width,s=o%t.map.width,a=i,l=t.map.map.length-t.map.width+s;n.col.start=t.tableStart+t.map.map[a],n.col.end=t.tableStart+t.map.map[l];const d=Math.floor(r/t.map.width)*t.map.width,u=Math.floor((o+t.map.width)/t.map.width)*t.map.width-1;return n.row.start=t.tableStart+t.map.map[d],n.row.end=t.tableStart+t.map.map[u],n},Qp=e=>{const{selection:t}=e,n=t.$anchor,r=n.node(n.depth),o=$e(e.doc,r),i=r.nodeSize,s=o+i;return{start:o,end:s}},ef=e=>!(!e||e.bottom-e.top!==1||e.right-e.left!==1),tf=e=>{const t=ot(e);return!(!t||t.bottom!==t.map.height||t.right!==t.map.width)},nf=e=>{const t=ot(e);return!(!t||t.bottom!==t.map.height)},rf=()=>{const e=N(null),t=N(700),n=N(0),r=N(0),o=N(0),i=N(0),s=N(0),a=N(0),l=N(0);let d=()=>{};const u=h=>{e.value=h,requestAnimationFrame(()=>{d=c()})},c=()=>{const{stop:h}=_d(e.value,p=>{const m=p[0].contentRect;t.value=m.width??0,n.value=m.height??0,r.value=m.top??0,o.value=m.bottom??0,i.value=m.left??0,s.value=m.right??0,a.value=m.x??0,l.value=m.y??0});return h};return ar(()=>{d()}),{containerRef:e,setEl:u,width:t,height:n,top:r,bottom:o,left:i,right:s,x:a,y:l}},Ba=Symbol(),of=()=>{const e=bs(Ba);if(!e)throw new Error("useRichtext() is called without provider.");return e},by=()=>{const e=rf();Kt(Ba,e)},Ji=N(null),sf=()=>{const{isScrolling:e}=wd(Ji);return{el:Ji,isScrolling:e}},Va=A({name:"TableComponent",props:Y,setup(e,{slots:t}){const{el:n}=sf(),r=of(),o=e.extension.options,i=(()=>{if(o.editable){const{width:y}=r;return y}return N(700)})(),s=S(()=>{let y="";return e.node.attrs.marginLeft&&(y=y.concat(`margin-left: ${e.node.attrs.marginLeft};`)),e.node.attrs.marginRight&&(y=y.concat(`margin-right: ${e.node.attrs.marginRight};`)),y}),a=N(),{width:l,height:d}=Cd(a),u=S(()=>l.value>i.value),c=S(()=>{if(!u.value){const y=Math.floor((i.value-l.value)/2);if(e.node.attrs.marginLeft==="auto"&&e.node.attrs.marginRight==="auto")return y;if(e.node.attrs.marginLeft==="auto"&&!e.node.attrs.marginRight)return y*2}return 0}),h=S(()=>({left:u.value?`${i.value}px`:`${l.value+c.value}px`,bottom:u.value?"46px":"32px"})),p=S(()=>({left:`${c.value}px`,top:`${d.value}px`,width:u.value?`${i.value}px`:`${l.value}px`})),f=y=>{const b=y+4;e.editor.commands.focus(),e.editor.commands.setTextSelection({from:b,to:b})},m=()=>{const y=$e(e.editor.state.doc,e.node);f(y);const b=ot(e.editor.state);if(!b)return 0;const x=b.map.map[b.map.map.length-1],_=y+x+3;e.editor.commands.setTextSelection({from:_,to:_})},g=y=>{m(),e.editor.commands.addRowAfter(),y.stopPropagation()},v=y=>{m(),e.editor.commands.addColumnAfter(),y.stopPropagation()};return()=>o.editable?w(H,{as:"div","data-uid":e.node.attrs.blockUid,"data-time":e.node.attrs.time,"data-type":"table"},()=>[w(H,{as:"div",ref:n,class:["table-wrap"]},()=>[w(H,{as:"table",ref:a,class:"table",style:s.value},()=>[w(qr,{as:"tbody"},t?.default?.())])]),w("div",{class:"button-wrap col",style:h.value},[w("button",{onClick:v},[w("i",{class:"material-icons"},"add")])]),w("div",{class:"button-wrap row",style:p.value},[w("button",{onClick:g},[w("i",{class:"material-icons"},"add")])])]):w(H,{as:"div","data-uid":e.node.attrs.blockUid,"data-type":"table"},()=>[w("table",{style:s.value},[w(qr,{as:"tbody"},t?.default?.())])])}});const af=ve(Va,[["__scopeId","data-v-5180eae0"]]);Va.__docgenInfo={displayName:"TableComponent",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/ExtendNodesTableComponent.vue"]};const lf=Xp.extend({selectable:!0,addAttributes(){return{blockUid:{default:""},time:{default:""},marginLeft:{default:"",parseHTML:e=>e.getAttribute("data-margin-left"),renderHTML:e=>({marginLeft:e.marginLeft})},marginRight:{default:"",parseHTML:e=>e.getAttribute("data-margin-right"),renderHTML:e=>({marginRight:e.marginRight})}}},parseHTML(){return[...this.parent?.()??[],{tag:"table",priority:50},{tag:'[data-type="table"]',priority:50}]},renderHTML({HTMLAttributes:e}){let t="";return e.marginLeft&&(t=t.concat(`margin-left: ${e.marginLeft};`)),e.marginRight&&(t=t.concat(`margin-right: ${e.marginRight};`)),["div",{"data-type":this.name,"data-uid":e.blockUid,"data-time":e.time,"data-margin-left":e.marginLeft,"data-margin-right":e.marginRight},["table",{style:t},["tbody",{},0]]]},addNodeView(){return Q(af)},addCommands(){return{...this.parent?.(),setTableAttrs:e=>({chain:t})=>t().updateAttributes(this.name,{...e,time:Date.now()}).setMeta("addToHistory",!0).setMeta("preventUpdate",!1).run(),getTableAttrs:()=>({state:e})=>{const t=e.selection.$anchor,n=au(e.selection)?e.selection.node:t.node(t.depth),r=Rs(e.doc,n),{...o}=r.attrs;return o},selectCellText:()=>({state:e,chain:t})=>{const{tr:n,selection:r}=e,{start:o,end:i}=Qp(e);if(r.from-1===o&&r.to+1===i)return t().selectAllCell().setMeta("addToHistory",!1).setMeta("preventUpdate",!1).run();const s=new B(n.doc.resolve(o),n.doc.resolve(i));return t().setTextSelection(s).setMeta("addToHistory",!1).setMeta("preventUpdate",!1).run()},selectAllCell:()=>({state:e,chain:t})=>{const{firstCellPos:n,LastCellPos:r}=Yp(e);return t().setCellSelection({anchorCell:n,headCell:r}).focus().setMeta("addToHistory",!1).setMeta("preventUpdate",!1).run()},selectColCells:()=>({state:e,chain:t})=>{const{col:n}=Gi(e);return t().setCellSelection({anchorCell:n.start,headCell:n.end}).focus().setMeta("addToHistory",!1).setMeta("preventUpdate",!1).run()},selectRowCells:()=>({state:e,chain:t})=>{const{row:n}=Gi(e);return t().setCellSelection({anchorCell:n.start,headCell:n.end}).focus().setMeta("addToHistory",!1).setMeta("preventUpdate",!1).run()},goToBellowCell:()=>({state:e,chain:t})=>{if(nf(e))return;const o=ot(e)?.map.width;if(o){for(let i=0;i<o;i++)t().goToNextCell();return t().run()}},deleteTheTable:()=>({state:e,dispatch:t})=>{const{tr:n,selection:r}=e,o=r.$anchor;for(let i=o.depth;i>0;i--)if(o.node(i).type.spec.tableRole=="table"){if(t){const a=n.delete(o.before(i),o.after(i));t(a)}return!0}return!1},fixTableRule:()=>({state:e,chain:t,tr:n,dispatch:r})=>{if(!r)return;const o=ot(e);if(!o)return;const i=o.tableStart+1,s=[],a=(l,d,u,c,h)=>{const p=i+u+c,f=(()=>{if(h==="tableCell")return e.schema.nodes.tableCell;if(h==="tableHeader")return e.schema.nodes.tableHeader})();if(!f)return;const m=o.table.child(l).child(d),{...g}=m.attrs,v=n.setNodeMarkup(p,f,{...g}).setMeta("addToHistory",!1);r(v),s[l][d]=h};return o?.table.content.forEach((l,d,u)=>{l.content.forEach((c,h,p)=>{s[u]||(s[u]=[]);const f=c.type.name;if(s[u][p]=f,s[0][0]==="tableCell"){f==="tableHeader"&&a(u,p,d,h,"tableCell");return}if(u>0&&p>0){f==="tableHeader"&&a(u,p,d,h,"tableCell");return}if(u===0){if(p===1){f==="tableCell"&&a(u,p,d,h,"tableHeader");return}s[0][1]==="tableHeader"&&f==="tableCell"&&a(u,p,d,h,"tableHeader");return}if(u!==1&&u>1){s[1][0]!==s[u][0]&&a(u,p,d,h,s[1][0]);return}})}),t().run()}}},addKeyboardShortcuts(){return{...this.parent?.(),Escape:()=>this.editor.commands.selectCellText()}},addProseMirrorPlugins(){const e=this.parent?.()??[],t=this;return[...e,new Se({key:new ye("table_command_a"),props:{transformPastedHTML(n){try{const r=/^<meta charset='utf-8'><table.*<\/table>$/.test(n),o=/^<meta charset='utf-8'><div data-type="table" .*<\/div>$/.test(n);return r||o?(setTimeout(()=>{t?.editor?.commands?.fixTableRule()},200),n.replace(/colspan=\"[0-9]+\"/g,()=>'colspan="1"').replace(/rowspan=\"[0-9]+\"/g,()=>'rowspan="1"')):t.editor.isActive("table")?new DOMParser().parseFromString(n,"text/html").documentElement.textContent??"":n}catch(r){return console.error(r),""}},handleDOMEvents:{keydown({state:n},r){if(!t.editor.isActive("table")||r.isComposing)return!1;if(r.code==="Enter"&&r.shiftKey!==!0&&(r.preventDefault(),r.stopPropagation(),t?.editor?.commands.goToBellowCell()),r.code==="Tab"&&r.shiftKey!==!0&&tf(n)&&(r.preventDefault(),r.stopPropagation()),r.code==="KeyA"&&r.metaKey){r.preventDefault(),r.stopPropagation();const o=ot(n);ef(o)?t?.editor?.commands?.selectCellText():t?.editor?.commands?.selectAllCell()}}}}})]}}),df=Fe.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",Je(this.options.HTMLAttributes,e),0]}}),qa=A({name:"TableCellComponent",props:Y,setup(e,{slots:t}){return()=>w(H,{as:"td","data-uid":e.node.attrs.blockUid,scope:e.node.attrs.scope,rowspan:e.node.attrs.rowspan,colspan:e.node.attrs.colspan},t?.default?.())}});qa.__docgenInfo={displayName:"TableCellComponent",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/assets/tiptap/ExtendNodesTableCellComponent.vue"]};const uf=df.extend({content:"paragraph",addAttributes(){return{...this.parent?.(),scope:{default:null,parseHTML:e=>e.getAttribute("scope"),renderHTML:e=>({scope:e.scope})}}},renderHTML({HTMLAttributes:e}){return["td",Je(this.options.HTMLAttributes,e),0]},addNodeView(){return Q(qa)}}),cf=Fe.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",Je(this.options.HTMLAttributes,e),0]}}),hf=cf.extend({content:"paragraph",addAttributes(){return{...this.parent?.(),scope:{default:null,parseHTML:e=>e.getAttribute("scope"),renderHTML:e=>({scope:e.scope})}}},renderHTML({HTMLAttributes:e}){return["th",Je(this.options.HTMLAttributes,e),0]},addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"th","data-uid":this.node.attrs.blockUid,scope:this.node.attrs.scope,rowspan:this.node.attrs.rowspan,colspan:this.node.attrs.colspan},this.$slots.default?.())}}))}}),pf=Fe.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",Je(this.options.HTMLAttributes,e),0]}}),ff=pf.extend({content:"(tableCell | tableHeader)+",addNodeView(){return Q(A({props:Y,render(){return w(H,{as:"tr","data-uid":this.node.attrs.blockUid},this.$slots.default?.())}}))}});var ja=(e=>(e.None="None",e.BlockPanel="BlockPanel",e.CommentsPanel="CommentsPanel",e.LinkPanel="LinkPanel",e.ImagePanel="ImagePanel",e.EmbedPanel="EmbedPanel",e.InlinePanel="InlinePanel",e.TablePanel="TablePanel",e.StudioComponentPanel="StudioComponentPanel",e))(ja||{});const mf=lt.create({name:"studioStarterKit",addOptions(){return{studioCollaboration:!1,tableEditable:!1,onEditEnd:()=>{},onRemoteHasDelayValue:()=>{},onUpload:()=>Promise.resolve(""),onEditFigure:()=>{},setFocusPanel:()=>{}}},addExtensions(){const e=[];return e.push(lu.configure()),e.push(du.configure()),e.push(uu.configure()),e.push(ju.configure()),e.push(Bu.configure()),e.push(qu.configure()),e.push(Wu.configure()),e.push(Gu.configure()),e.push(Xu.configure()),e.push(Yu.configure()),e.push(tc.configure({uploadFunc:this.options.onUpload,onEditStart:()=>this.options.onEditFigure(!0),onEditEnd:()=>this.options.onEditFigure(!1)})),e.push(nc.configure()),e.push(oc.configure()),e.push(ic.configure()),e.push(sc.configure()),e.push(ac.configure()),e.push(lc.configure()),e.push(pc.configure()),e.push(gc.configure()),e.push(bc.configure()),e.push(_c.configure({autolink:!1,openOnClick:!1,onEditStart:()=>this.options.setFocusPanel(ja.LinkPanel)})),e.push(Sc.configure()),e.push(Tc.configure()),e.push(Ac.configure()),e.push(Ec.configure({itemTypeName:"list_item"})),e.push(Mc.configure()),e.push(Oc.configure()),e.push(Pc.configure()),e.push(Dc.configure()),e.push(Rc.configure()),e.push(Lc.configure()),e.push(Nc.configure()),e.push(Fc.configure()),e.push(Uc.configure()),e.push(Hc.configure()),e.push(zc.configure({itemTypeName:"list_item"})),e.push(Bc.configure()),e.push(lf.configure({editable:this.options.tableEditable,allowTableNodeSelection:!0})),e.push(uf.configure()),e.push(hf.configure()),e.push(ff.configure()),this.options.studioCollaboration?e.push(Hu.configure({onRemoteHasDelayValue:this.options.onRemoteHasDelayValue})):(e.push(Fu.configure()),e.push(Vu.configure({onCommandEnter:this.options.onEditEnd,onTab:this.options.onEditEnd}))),e}}),Wa=A({__name:"RichTextRendererEditing",props:{renderDom:{required:!0,type:Object},role:{required:!0,type:String},text:{required:!0,type:String},hasVariable:{required:!1,type:Boolean}},setup(e){const t=e,n=ge(),r=Sd(),{renderDom:o,role:i,text:s,hasVariable:a}=Oe(t),{disabledVersionPreview:l}=kd(),d=Vr(10,function(){h.value?.commands.blur(),n.dispatch("studioEditor/updateIsTextEditing",{isTextEditing:!1}),n.dispatch("studioEditor/updateTagConditions",[]),n.dispatch("studioEditor/updateSelectedRichTextNodes",{nodes:null,node:null})}),u=async _=>{const C=new DataTransfer;C.items.add(_);const k=C.files;return(await r.uploadAssets(k,"cms_asset"))[0]},c=_=>{n.commit("studioEditor/setFocusPanel",_)},h=cu({content:`${s.value}`,editorProps:{attributes:{class:"in-design-editor"}},extensions:[mf.configure({studioCollaboration:!1,onEditEnd:d,onUpload:u,setFocusPanel:_=>c(_)})],onCreate:({editor:_})=>{y(_),_.setEditable(l.value)},onUpdate:({editor:_})=>{g(_.getHTML())}}),p=S(()=>n.state.studioEditor.isTextEditing),f=S(()=>n.state.studioEditor.selectedRichTextNodes?.[0]),m=S(()=>n.state.studioEditor.textEditingRenderId===o.value.renderId),g=_=>{n.dispatch("studioDom/modifyRichTextData",{val:_,renderDom:o.value}),v()},v=So(300,function(){n.dispatch("studioAction/confirm")}),y=_=>{i.value!=="dragging"&&n.dispatch("studioEditor/updateTextEditor",{renderId:o.value.renderId,textEditor:_})},b=Vr(0,function(){if(!a.value&&h.value&&p.value&&m.value){let _=0,C=0;f.value&&!f.value.isInline?(_=Math.max($e(h.value.state.doc,f.value),0)+1,C=_+f.value.nodeSize-2):C=Math.max(h.value?.state?.doc?.content?.size||0,0),h.value.commands.focus(),h.value.commands.setTextSelection({from:_,to:C})}}),x=()=>{d()};return ie(s,_=>{if(!h.value)return;const C=h.value.getHTML();_!==C&&h.value.chain().setContent(s.value).setMeta("addToHistory",!1).run()}),ie(p,(_,C)=>{!_&&C&&d()}),ie(m,(_,C)=>{_&&!C&&b()}),ie(l,_=>{h.value&&h.value.setEditable(_)}),ar(()=>{!h.value||(h.value.destroy(),i.value==="dragging")||n.state.studioDom.studioDomMap[o.value.renderId]||n.dispatch("studioEditor/updateTextEditor",{renderId:o.value.renderId,textEditor:null})}),(_,C)=>bt(h)?(Z(),se("div",{key:0,class:"RichTextRendererEditing",onKeydown:_s(x,["esc"])},[gn(bt(hu),{class:"editor-content",editor:bt(h),onPaste:C[0]||(C[0]=ad(()=>{},["stop"]))},null,8,["editor"])],32)):lr("",!0)}});const gf=ve(Wa,[["__scopeId","data-v-20bb8af1"]]);Wa.__docgenInfo={exportName:"default",displayName:"RichTextRendererEditing",description:"",tags:{},props:[{name:"renderDom",type:{name:"object"},required:!0},{name:"role",type:{name:"string"},required:!0},{name:"text",type:{name:"string"},required:!0},{name:"hasVariable",type:{name:"boolean"},required:!1}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/RichTextRendererEditing.vue"]};const Ga=A({__name:"RichTextStyleRenderer",props:{uuid:{},styleObject:{}},setup(e){const t=e,n=ge(),{uuid:r,styleObject:o}=Oe(t),i=S(()=>xd(o.value)),s=S(()=>n.getters["studioEditor/responsiveConditions"]),a=S(()=>n.getters["studioEditor/tagCondition"]),l=S(()=>n.getters["studioEditor/pseudoCondition"]),d=S(()=>n.getters["studioSelection/isSelected"](r.value)),u=S(()=>`.sd[data-s-${r.value}]`),c=S(()=>xs.filter(y=>i.value[y])),h=S(()=>c.value.map(y=>{const b=i.value[y],x=[...s.value];d&&l.value!=null&&a.value===y&&x.push(l.value);const _=x.reduceRight((C,k)=>({...C,...b[k]}),b);return m(g(_),y)}).join(`
`)),p=S(()=>f(g(i.value))+`
`+h.value+`
`),f=(y,b="")=>`${u.value}  ${b} { ${si(y)} }`,m=(y,b)=>`${u.value} .ProseMirror ${Td[b].selector||""} { ${si(y)} }`,g=y=>Object.keys(y).reduce((b,x)=>typeof y[x]=="object"?b:{...b,[x]:y[x]},{}),v=()=>w("style",p.value);return(y,b)=>(Z(),Gn(v))}});Ga.__docgenInfo={exportName:"default",displayName:"RichTextStyleRenderer",description:"",tags:{},props:[{name:"uuid",required:!0,type:{name:"string"}},{name:"styleObject",required:!0,type:{name:"any"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/RichTextStyleRenderer.vue"]};const Ja=A({name:"RichTextRenderer",components:{RichTextRendererEditing:gf,RichTextStyleRenderer:Ga},props:{...q},setup(e){return j(e)},computed:{studioDom(){return this.renderDom.studioDom},hoverClass(){return this.conditions.length?this.conditions.length<2?this.pseudoClass:this.conditions[1]+" "+this.pseudoClass:null},hasVariable(){return/{{(.*?)}}/.test(this.renderDom.content.data)},text(){const e=this.renderDom.content.data;return this.compileTemplate(e)},richTextTags(){return Object.keys(this.studioDom.style).flatMap(e=>xs.includes(e)?e:[])},conditionalTsFontFamily(){const e=this.$store.getters["studioEditor/responsiveConditions"],t=[null,...this.richTextTags].flatMap(o=>{const i=o==null?e:[o,...e];return this.renderDom.conditionalStyle(i).fontFamily||[]}),n=this.$store.getters["studioFonts/tsFonts"],r=t.filter(o=>n.includes(o.replace(/'/g,"")));return[...new Set(r)].join("")},tsRenderId(){return`${this.conditionalTsFontFamily}${this.text}`}},watch:{tsRenderId:{handler(){if(!this.text)return;const e=this.text.replace(/<[^>]*?>/g,""),t=`${this.renderDom.renderId}@${this.conditionalTsFontFamily}`;this.loadFont(t,e,this.$store)},immediate:!0}},methods:{loadFont:So(2e3,(e,t,n)=>{n.dispatch("typesquare/updateText",{id:e,text:t})})}});function yf(e,t,n,r,o,i){const s=yn("RichTextRendererEditing"),a=yn("RichTextStyleRenderer");return Z(),se("div",ld({class:"richText"},e.attrs,{class:e.hoverClass}),[gn(s,{role:e.role,"render-dom":e.renderDom,"has-variable":e.hasVariable,text:e.text},null,8,["role","render-dom","has-variable","text"]),gn(a,{uuid:e.studioDom.uuid,"style-object":e.style},null,8,["uuid","style-object"])],16)}const vf=ve(Ja,[["render",yf]]);Ja.__docgenInfo={displayName:"RichTextRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/RichTextRenderer.vue"]};const Ka=e=>{const t=S(()=>({...e.value,width:"100%",height:"auto",padding:0,flexDirection:"column",flexWrap:"nowrap",alignContent:"center",alignItems:"center"})),n=S(()=>{const{padding:r,width:o,height:i,flexDirection:s="column",flexWrap:a,alignContent:l,alignItems:d,justifyContent:u,gap:c}=e.value;return{padding:r,maxWidth:"100%",width:o,height:i,flexDirection:s,flexWrap:a,alignContent:l,alignItems:d,justifyContent:u,gap:c,display:"flex"}});return{outerStyle:t,innerStyle:n}},zo=A({name:"SectionRenderer",props:{...q},setup(e,t){const n=j(e),{outerStyle:r,innerStyle:o}=Ka(n.style);return()=>w(n.tagName.value,{...n.attrs.value,class:["box"],style:r.value},w(n.tagName.value,{class:["box"],style:o.value},t.slots.default()))}});zo.__docgenInfo={displayName:"SectionRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/SectionRenderer.vue"]};const Za=A({name:"TextRenderer",props:{...q},setup(e){const t=ge(),n=ks(),r=S(()=>/^{{.*}}$/.test(e.renderDom.content.data||"")),o=j(e),i=N(null),s=N(""),a=S(()=>{const y=e.renderDom.content.data;return y?o.compileTemplate(y):""}),l=S(()=>{const y=Ed(a.value);return Zn(y)}),d=S(()=>t.state.studioEditor.textEditingRenderId===e.renderDom.renderId),u=S(()=>({Tab:()=>{},Escape:h,Enter:()=>{document.execCommand("insertlinebreak")}})),c=S(()=>(e.renderDom.conditionalStyle(o.conditions.value).fontFamily||"").replace(/'/g,"")),h=()=>{t.dispatch("studioEditor/updateIsTextEditing",{isTextEditing:!1})},p=y=>{y.stopPropagation();const{key:b,metaKey:x,ctrlKey:_,isComposing:C}=y;if(!C)if(x||_){if(/^[biu]$/.test(b)){y.preventDefault();return}b==="Enter"&&(h(),y.preventDefault())}else{const k=u.value[b];k&&(y.preventDefault(),k())}g()},f=y=>{y.stopPropagation()},m=y=>{const b=y.clipboardData?.getData("text/plain")??"",x=Kn(b),_=Zn(x);document.execCommand("insertHTML",!1,_),g(),y.preventDefault(),y.stopPropagation()},g=()=>{const y=n.isUsingTableDataContent;requestAnimationFrame(y?()=>{const b=i.value?.innerHTML??"",x=(e.renderDom.content.data||"").replace(/^{{(.*?)}}$/g,(_,C)=>C);x&&n.updateTableDataText({key:x,val:b})}:()=>{t.dispatch("studioEditor/updateEditingText",{editingText:i.value?.innerHTML??""})})},v=()=>{const y=t.state.studioProductStyle.styleVars.fontFamily.find(({key:b})=>`var(--s-font-${b})`===c.value)?.value||c.value;if(Ad(y).some(b=>t.getters["studioFonts/tsFonts"].includes(b))){const b=a.value.replace(/<[^>]*?>/g,"");t.dispatch("typesquare/updateText",{id:`${e.renderDom.renderId}@${c.value}`,text:b})}};return ie(d,y=>{y&&e.role==="page"&&requestAnimationFrame(()=>{i.value?.focus(),document.execCommand("SelectAll")})}),ie([a,c],()=>{v()},{immediate:!0}),ie([d,a],y=>{d.value||(s.value=l.value)},{immediate:!0}),ie(d,(y,b)=>{b&&!y&&r.value&&t.dispatch("studioAction/confirm")}),{...o,el:i,isEditing:d,htmlText:s,keydown:p,copy:f,paste:m,updateTsText:v}},render(){return w(this.tagName,{...this.attrs,ref:e=>this.el=e,contenteditable:this.isEditing,class:["text",this.pseudoClass,{editing:this.isEditing}],innerHTML:this.htmlText,onKeydown:this.keydown,onPaste:this.paste,onCopy:this.copy,style:this.style})}});Za.__docgenInfo={displayName:"TextRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/TextRenderer.vue"]};const Ki={isEsModule:e=>e.kind==="esmodule",isNoModule:e=>e.kind==="nomodule"},bf=ws("webComponentsStore",{state:()=>({webComponentsScrips:[]}),actions:{load(e){e&&Array.isArray(e)&&e.forEach(t=>{t.src&&(_f(t,this.webComponentsScrips)||(this.webComponentsScrips.push(t),wf(t)))})}}}),_f=(e,t)=>!!t.find(n=>n.src===e.src),wf=e=>{const t=document.createElement("script");if(t.src=e.src,Ki.isEsModule(e))t.type=e.type;else if(Ki.isNoModule(e))t.noModule=e.nomodule;else return;document.body.appendChild(t)},Xa=A({name:"CustomElementRenderer",props:{...q},setup(e){const t=j(e);return bf().load(e.renderDom.studioDom.webComponents?.scripts),t},render(){const t=Object.entries(this.attrs??{}).join(":");return w(this.tagName,{...this.attrs,key:t,class:["customElement"],style:this.style},this.$slots.default?.())}});Xa.__docgenInfo={displayName:"CustomElementRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/customElement/CustomElementRenderer.vue"]};var qn=window,Bo=qn.ShadowRoot&&(qn.ShadyCSS===void 0||qn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Vo=Symbol(),Zi=new WeakMap,Ya=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==Vo)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(Bo&&e===void 0){let n=t!==void 0&&t.length===1;n&&(e=Zi.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Zi.set(t,e))}return e}toString(){return this.cssText}},Cf=e=>new Ya(typeof e=="string"?e:e+"",void 0,Vo),Sf=(e,...t)=>{let n=e.length===1?e[0]:t.reduce((r,o,i)=>r+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1],e[0]);return new Ya(n,e,Vo)},kf=(e,t)=>{Bo?e.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):t.forEach(n=>{let r=document.createElement("style"),o=qn.litNonce;o!==void 0&&r.setAttribute("nonce",o),r.textContent=n.cssText,e.appendChild(r)})},Xi=Bo?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let n="";for(let r of t.cssRules)n+=r.cssText;return Cf(n)})(e):e,Rr,nr=window,Yi=nr.trustedTypes,xf=Yi?Yi.emptyScript:"",Qi=nr.reactiveElementPolyfillSupport,lo={toAttribute(e,t){switch(t){case Boolean:e=e?xf:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},Qa=(e,t)=>t!==e&&(t==t||e==e),Dr={attribute:!0,type:String,converter:lo,reflect:!1,hasChanged:Qa},uo="finalized",Lt=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();let e=[];return this.elementProperties.forEach((t,n)=>{let r=this._$Ep(n,t);r!==void 0&&(this._$Ev.set(r,n),e.push(r))}),e}static createProperty(e,t=Dr){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){let n=typeof e=="symbol"?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);r!==void 0&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){let o=this[e];this[t]=r,this.requestUpdate(e,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Dr}static finalize(){if(this.hasOwnProperty(uo))return!1;this[uo]=!0;let e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){let t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let r of n)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let n=new Set(e.flat(1/0).reverse());for(let r of n)t.unshift(Xi(r))}else e!==void 0&&t.push(Xi(e));return t}static _$Ep(e,t){let n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,n;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;let t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return kf(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=Dr){var r;let o=this.constructor._$Ep(e,n);if(o!==void 0&&n.reflect===!0){let i=(((r=n.converter)===null||r===void 0?void 0:r.toAttribute)!==void 0?n.converter:lo).toAttribute(t,n.type);this._$El=e,i==null?this.removeAttribute(o):this.setAttribute(o,i),this._$El=null}}_$AK(e,t){var n;let r=this.constructor,o=r._$Ev.get(e);if(o!==void 0&&this._$El!==o){let i=r.getPropertyOptions(o),s=typeof i.converter=="function"?{fromAttribute:i.converter}:((n=i.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?i.converter:lo;this._$El=o,this[o]=s.fromAttribute(t,i.type),this._$El=null}}requestUpdate(e,t,n){let r=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Qa)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((r,o)=>this[o]=r),this._$Ei=void 0);let t=!1,n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var o;return(o=r.hostUpdate)===null||o===void 0?void 0:o.call(r)}),this.update(n)):this._$Ek()}catch(r){throw t=!1,this._$Ek(),r}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var r;return(r=n.hostUpdated)===null||r===void 0?void 0:r.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$EO(n,this[n],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Lt[uo]=!0,Lt.elementProperties=new Map,Lt.elementStyles=[],Lt.shadowRootOptions={mode:"open"},Qi?.({ReactiveElement:Lt}),((Rr=nr.reactiveElementVersions)!==null&&Rr!==void 0?Rr:nr.reactiveElementVersions=[]).push("1.6.3");var Pr,rr=window,Wt=rr.trustedTypes,es=Wt?Wt.createPolicy("lit-html",{createHTML:e=>e}):void 0,co="$lit$",Ye=`lit$${(Math.random()+"").slice(9)}$`,el="?"+Ye,Tf=`<${el}>`,St=document,Sn=()=>St.createComment(""),kn=e=>e===null||typeof e!="object"&&typeof e!="function",tl=Array.isArray,Af=e=>tl(e)||typeof e?.[Symbol.iterator]=="function",Or=`[ 	
\f\r]`,nn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ts=/-->/g,ns=/>/g,pt=RegExp(`>|${Or}(?:([^\\s"'>=/]+)(${Or}*=${Or}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),rs=/'/g,os=/"/g,nl=/^(?:script|style|textarea|title)$/i,Ef=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),D=Ef(1),Gt=Symbol.for("lit-noChange"),oe=Symbol.for("lit-nothing"),is=new WeakMap,yt=St.createTreeWalker(St,129,null,!1);function rl(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return es!==void 0?es.createHTML(t):t}var $f=(e,t)=>{let n=e.length-1,r=[],o,i=t===2?"<svg>":"",s=nn;for(let a=0;a<n;a++){let l=e[a],d,u,c=-1,h=0;for(;h<l.length&&(s.lastIndex=h,u=s.exec(l),u!==null);)h=s.lastIndex,s===nn?u[1]==="!--"?s=ts:u[1]!==void 0?s=ns:u[2]!==void 0?(nl.test(u[2])&&(o=RegExp("</"+u[2],"g")),s=pt):u[3]!==void 0&&(s=pt):s===pt?u[0]===">"?(s=o??nn,c=-1):u[1]===void 0?c=-2:(c=s.lastIndex-u[2].length,d=u[1],s=u[3]===void 0?pt:u[3]==='"'?os:rs):s===os||s===rs?s=pt:s===ts||s===ns?s=nn:(s=pt,o=void 0);let p=s===pt&&e[a+1].startsWith("/>")?" ":"";i+=s===nn?l+Tf:c>=0?(r.push(d),l.slice(0,c)+co+l.slice(c)+Ye+p):l+Ye+(c===-2?(r.push(void 0),a):p)}return[rl(e,i+(e[n]||"<?>")+(t===2?"</svg>":"")),r]},ho=class ol{constructor({strings:t,_$litType$:n},r){let o;this.parts=[];let i=0,s=0,a=t.length-1,l=this.parts,[d,u]=$f(t,n);if(this.el=ol.createElement(d,r),yt.currentNode=this.el.content,n===2){let c=this.el.content,h=c.firstChild;h.remove(),c.append(...h.childNodes)}for(;(o=yt.nextNode())!==null&&l.length<a;){if(o.nodeType===1){if(o.hasAttributes()){let c=[];for(let h of o.getAttributeNames())if(h.endsWith(co)||h.startsWith(Ye)){let p=u[s++];if(c.push(h),p!==void 0){let f=o.getAttribute(p.toLowerCase()+co).split(Ye),m=/([.?@])?(.*)/.exec(p);l.push({type:1,index:i,name:m[2],strings:f,ctor:m[1]==="."?Mf:m[1]==="?"?Lf:m[1]==="@"?Rf:fr})}else l.push({type:6,index:i})}for(let h of c)o.removeAttribute(h)}if(nl.test(o.tagName)){let c=o.textContent.split(Ye),h=c.length-1;if(h>0){o.textContent=Wt?Wt.emptyScript:"";for(let p=0;p<h;p++)o.append(c[p],Sn()),yt.nextNode(),l.push({type:2,index:++i});o.append(c[h],Sn())}}}else if(o.nodeType===8)if(o.data===el)l.push({type:2,index:i});else{let c=-1;for(;(c=o.data.indexOf(Ye,c+1))!==-1;)l.push({type:7,index:i}),c+=Ye.length-1}i++}}static createElement(t,n){let r=St.createElement("template");return r.innerHTML=t,r}};function Jt(e,t,n=e,r){var o,i,s,a;if(t===Gt)return t;let l=r!==void 0?(o=n._$Co)===null||o===void 0?void 0:o[r]:n._$Cl,d=kn(t)?void 0:t._$litDirective$;return l?.constructor!==d&&((i=l?._$AO)===null||i===void 0||i.call(l,!1),d===void 0?l=void 0:(l=new d(e),l._$AT(e,n,r)),r!==void 0?((s=(a=n)._$Co)!==null&&s!==void 0?s:a._$Co=[])[r]=l:n._$Cl=l),l!==void 0&&(t=Jt(e,l._$AS(e,t.values),l,r)),t}var If=class{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var n;let{el:{content:r},parts:o}=this._$AD,i=((n=t?.creationScope)!==null&&n!==void 0?n:St).importNode(r,!0);yt.currentNode=i;let s=yt.nextNode(),a=0,l=0,d=o[0];for(;d!==void 0;){if(a===d.index){let u;d.type===2?u=new qo(s,s.nextSibling,this,t):d.type===1?u=new d.ctor(s,d.name,d.strings,this,t):d.type===6&&(u=new Df(s,this,t)),this._$AV.push(u),d=o[++l]}a!==d?.index&&(s=yt.nextNode(),a++)}return yt.currentNode=St,i}v(t){let n=0;for(let r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}},qo=class il{constructor(t,n,r,o){var i;this.type=2,this._$AH=oe,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=o,this._$Cp=(i=o?.isConnected)===null||i===void 0||i}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let t=this._$AA.parentNode,n=this._$AM;return n!==void 0&&t?.nodeType===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=Jt(this,t,n),kn(t)?t===oe||t==null||t===""?(this._$AH!==oe&&this._$AR(),this._$AH=oe):t!==this._$AH&&t!==Gt&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):Af(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==oe&&kn(this._$AH)?this._$AA.nextSibling.data=t:this.$(St.createTextNode(t)),this._$AH=t}g(t){var n;let{values:r,_$litType$:o}=t,i=typeof o=="number"?this._$AC(t):(o.el===void 0&&(o.el=ho.createElement(rl(o.h,o.h[0]),this.options)),o);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===i)this._$AH.v(r);else{let s=new If(i,this),a=s.u(this.options);s.v(r),this.$(a),this._$AH=s}}_$AC(t){let n=is.get(t.strings);return n===void 0&&is.set(t.strings,n=new ho(t)),n}T(t){tl(this._$AH)||(this._$AH=[],this._$AR());let n=this._$AH,r,o=0;for(let i of t)o===n.length?n.push(r=new il(this.k(Sn()),this.k(Sn()),this,this.options)):r=n[o],r._$AI(i),o++;o<n.length&&(this._$AR(r&&r._$AB.nextSibling,o),n.length=o)}_$AR(t=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);t&&t!==this._$AB;){let o=t.nextSibling;t.remove(),t=o}}setConnected(t){var n;this._$AM===void 0&&(this._$Cp=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}},fr=class{constructor(e,t,n,r,o){this.type=1,this._$AH=oe,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=oe}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,r){let o=this.strings,i=!1;if(o===void 0)e=Jt(this,e,t,0),i=!kn(e)||e!==this._$AH&&e!==Gt,i&&(this._$AH=e);else{let s=e,a,l;for(e=o[0],a=0;a<o.length-1;a++)l=Jt(this,s[n+a],t,a),l===Gt&&(l=this._$AH[a]),i||(i=!kn(l)||l!==this._$AH[a]),l===oe?e=oe:e!==oe&&(e+=(l??"")+o[a+1]),this._$AH[a]=l}i&&!r&&this.j(e)}j(e){e===oe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Mf=class extends fr{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===oe?void 0:e}},Nf=Wt?Wt.emptyScript:"",Lf=class extends fr{constructor(){super(...arguments),this.type=4}j(t){t&&t!==oe?this.element.setAttribute(this.name,Nf):this.element.removeAttribute(this.name)}},Rf=class extends fr{constructor(t,n,r,o,i){super(t,n,r,o,i),this.type=5}_$AI(t,n=this){var r;if((t=(r=Jt(this,t,n,0))!==null&&r!==void 0?r:oe)===Gt)return;let o=this._$AH,i=t===oe&&o!==oe||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,s=t!==oe&&(o===oe||i);i&&this.element.removeEventListener(this.name,this,o),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,t):this._$AH.handleEvent(t)}},Df=class{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Jt(this,t)}},ss=rr.litHtmlPolyfillSupport;ss?.(ho,qo),((Pr=rr.litHtmlVersions)!==null&&Pr!==void 0?Pr:rr.litHtmlVersions=[]).push("2.8.0");var Pf=(e,t,n)=>{var r,o;let i=(r=n?.renderBefore)!==null&&r!==void 0?r:t,s=i._$litPart$;if(s===void 0){let a=(o=n?.renderBefore)!==null&&o!==void 0?o:null;i._$litPart$=s=new qo(t.insertBefore(Sn(),a),a,void 0,n??{})}return s._$AI(e),s},Fr,Ur,pn=class extends Lt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,n;let r=super.createRenderRoot();return(t=(n=this.renderOptions).renderBefore)!==null&&t!==void 0||(n.renderBefore=r.firstChild),r}update(t){let n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Pf(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return Gt}};pn.finalized=!0,pn._$litElement$=!0,(Fr=globalThis.litElementHydrateSupport)===null||Fr===void 0||Fr.call(globalThis,{LitElement:pn});var as=globalThis.litElementPolyfillSupport;as?.({LitElement:pn});((Ur=globalThis.litElementVersions)!==null&&Ur!==void 0?Ur:globalThis.litElementVersions=[]).push("3.3.3");var Of=Sf`
  @font-face {
    font-family: 'Karla';
    font-weight: regular;
    src: url('./fonts/Karla-regular.woff') format('woff');
  }

  * {
    box-sizing: border-box;
  }

  :host {
    --lottie-player-toolbar-height: 35px;
    --lottie-player-toolbar-background-color: transparent;
    --lottie-player-toolbar-hover-background-color: #f3f6f8;
    --lottie-player-toolbar-icon-color: #20272c;
    --lottie-player-toolbar-icon-hover-color: #f3f6f8;
    --lottie-player-toolbar-icon-active-color: #00ddb3;
    --lottie-player-seeker-track-color: #00ddb3;
    --lottie-player-seeker-accent-color: #00c1a2;
    --lottie-player-seeker-thumb-color: #00c1a2;
    --lottie-player-options-separator: #d9e0e6;

    display: block;
    width: 100%;
    height: 100%;

    font-family: 'Karla', sans-serif;
    font-style: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .active {
    color: var(--lottie-player-toolbar-icon-active-color) !important;
  }

  .main {
    position: relative;
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
  }

  .animation {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
  }
  .animation.controls {
    height: calc(100% - var(--lottie-player-toolbar-height));
  }

  .toolbar {
    display: flex;
    align-items: center;
    justify-items: center;
    background-color: var(--lottie-player-toolbar-background-color);
    margin: 0 8px;
    height: var(--lottie-player-toolbar-height);
  }

  .btn-spacing-left {
    margin-right: 4px;
    margin-left: 8px;
  }

  .btn-spacing-center {
    margin-right: 4px;
    margin-left: 4px;
  }

  .btn-spacing-right {
    margin-right: 8px;
    margin-left: 4px;
  }

  .toolbar button {
    color: #20272c;
    cursor: pointer;
    fill: var(--lottie-player-toolbar-icon-color);
    display: flex;
    background: none;
    border: 0px;
    border-radius: 4px;
    padding: 4px;
    outline: none;
    width: 24px;
    height: 24px;
    align-items: center;
  }

  .toolbar button:hover {
    background-color: var(--lottie-player-toolbar-icon-hover-color);
    border-style: solid;
    border-radius: 2px;
  }

  .toolbar button.active {
    fill: var(--lottie-player-toolbar-icon-active-color);
  }

  .toolbar button.active:hover {
    fill: var(--lottie-player-toolbar-icon-hover-color);
    border-radius: 4px;
  }

  .toolbar button:focus-visible {
    outline: 2px solid var(--lottie-player-toolbar-icon-active-color);
    border-radius: 4px;
    box-sizing: border-box;
  }

  .toolbar button svg {
    width: 16px;
    height: 16px;
  }

  .toolbar button.disabled svg {
    display: none;
  }

  .popover {
    position: absolute;
    bottom: 40px;
    left: calc(100% - 239px);
    width: 224px;
    min-height: 84px;
    max-height: 300px;
    background-color: #ffffff;
    box-shadow: 0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 8px 16px 0px rgba(61, 72, 83, 0.16),
      0px 0px 1px 0px rgba(61, 72, 83, 0.36);
    border-radius: 8px;
    padding: 8px;
    z-index: 100;
    overflow-y: scroll;
    scrollbar-width: none;
  }
  .popover:focus-visible {
    outline: 2px solid var(--lottie-player-toolbar-icon-active-color);
    border-radius: 4px;
    box-sizing: border-box;
  }

  .popover::-webkit-scrollbar {
    width: 0px;
  }

  .popover-button {
    background: none;
    border: none;
    font-family: inherit;
    width: 100%;
    flex-direction: row;
    cursor: pointer;
    height: 32px;
    color: #20272c;
    justify-content: space-between;
    display: flex;
    padding: 4px 8px;
    align-items: flex-start;
    gap: 8px;
    align-self: stretch;
    border-radius: 4px;
  }

  .popover-button:focus-visible {
    outline: 2px solid var(--lottie-player-toolbar-icon-active-color);
    border-radius: 4px;
    box-sizing: border-box;
  }

  .popover-button:hover {
    background-color: var(--lottie-player-toolbar-hover-background-color);
  }

  .popover-button-text {
    display: flex;
    color: #20272c;
    flex-direction: column;
    align-self: stretch;
    justify-content: center;
    font-family: inherit;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 150%;
    letter-spacing: -0.28px;
  }

  .reset-btn {
    font-size: 12px;
    cursor: pointer;
    font-family: inherit;
    background: none;
    border: none;
    font-weight: 400;
    line-height: 18px;
    letter-spacing: 0em;
    text-align: left;
    color: #63727e;
    padding: 0;
    width: 31px;
    height: 18px;
  }
  .reset-btn:focus-visible {
    outline: 2px solid var(--lottie-player-toolbar-icon-active-color);
    border-radius: 4px;
    box-sizing: border-box;
  }
  .reset-btn:hover {
    color: #20272c;
  }

  .option-title-button {
    display: flex;
    flex-direction: row;
    width: 100%;
    height: 32px;
    align-items: center;
    gap: 4px;
    align-self: stretch;
    cursor: pointer;
    color: var(--lottie-player-toolbar-icon-color);
    border: none;
    background: none;
    padding: 4px;
    font-family: inherit;
    font-size: 16px;
    font-weight: 700;
    line-height: 150%;
    letter-spacing: -0.32px;
  }
  .option-title-button.themes {
    width: auto;
    padding: 0;
  }
  .option-title-button:hover {
    background-color: var(--lottie-player-toolbar-icon-hover-color);
  }

  .option-title-themes-row {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1 0 0;
  }
  .option-title-themes-row:hover {
    background-color: var(--lottie-player-toolbar-icon-hover-color);
  }

  .option-title-button:focus-visible {
    outline: 2px solid var(--lottie-player-toolbar-icon-active-color);
    border-radius: 4px;
    box-sizing: border-box;
  }

  .option-title-text {
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: 150%;
    letter-spacing: -0.32px;
  }

  .option-title-separator {
    margin: 8px -8px;
    border-bottom: 1px solid var(--lottie-player-options-separator);
  }

  .option-title-chevron {
    display: flex;
    padding: 4px;
    border-radius: 8px;
    justify-content: center;
    align-items: center;
    gap: 8px;
  }

  .option-row {
    display: flex;
    flex-direction: column;
  }
  .option-row > ul {
    padding: 0;
    margin: 0;
  }

  .option-button {
    width: 100%;
    background: none;
    border: none;
    font-family: inherit;
    display: flex;
    padding: 4px 8px;
    color: #20272c;
    overflow: hidden;
    align-items: center;
    gap: 8px;
    align-self: stretch;
    cursor: pointer;
    height: 32px;
    font-family: inherit;
    font-size: 14px;
    border-radius: 4px;
  }
  .option-button:hover {
    background-color: var(--lottie-player-toolbar-hover-background-color);
  }
  .option-button:focus-visible {
    outline: 2px solid var(--lottie-player-toolbar-icon-active-color);
    border-radius: 4px;
    box-sizing: border-box;
  }

  .option-tick {
    display: flex;
    width: 24px;
    height: 24px;
    align-items: flex-start;
    gap: 8px;
  }

  .seeker {
    height: 4px;
    width: 95%;
    outline: none;
    -webkit-appearance: none;
    -moz-apperance: none;
    border-radius: 9999px;
    cursor: pointer;
    background-image: linear-gradient(
      to right,
      rgb(0, 221, 179) calc(var(--seeker) * 1%),
      rgb(217, 224, 230) calc(var(--seeker) * 1%)
    );
  }
  .seeker.to-left {
    background-image: linear-gradient(
      to right,
      rgb(217, 224, 230) calc(var(--seeker) * 1%),
      rgb(0, 221, 179) calc(var(--seeker) * 1%)
    );
  }
  .seeker::-webkit-slider-runnable-track:focus-visible {
    color: #f07167;
    accent-color: #00ddb3;
  }

  .seeker::-webkit-slider-runnable-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
  }
  .seeker::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
    margin-top: -5px;
  }
  .seeker:focus-visible::-webkit-slider-thumb {
    background: var(--lottie-player-seeker-thumb-color);
    outline: 2px solid var(--lottie-player-seeker-track-color);
    border: 1.5px solid #ffffff;
  }
  .seeker::-webkit-slider-thumb:hover {
    background: #019d91;
  }
  .seeker::-moz-range-thumb {
    appearance: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
    margin-top: -5px;
    border-color: transparent;
  }
  .seeker:focus-visible::-moz-range-thumb {
    background: var(--lottie-player-seeker-thumb-color);
    outline: 2px solid var(--lottie-player-seeker-track-color);
    border: 1.5px solid #ffffff;
  }

  .error {
    display: flex;
    justify-content: center;
    margin: auto;
    height: 100%;
    align-items: center;
  }
`;/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/var ls={},Ff=function(e,t,n,r,o){var i=new Worker(ls[t]||(ls[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(s){var a=s.data,l=a.$e$;if(l){var d=new Error(l[0]);d.code=l[1],d.stack=l[2],o(d,null)}else o(null,a)},i.postMessage(n,r),i},fe=Uint8Array,vt=Uint16Array,sl=Int32Array,jo=new fe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wo=new fe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),al=new fe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ll=function(e,t){for(var n=new vt(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new sl(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return{b:n,r:o}},dl=ll(jo,2),Go=dl.b,Uf=dl.r;Go[28]=258,Uf[258]=28;var Hf=ll(Wo,0),ul=Hf.b,or=new vt(32768);for(O=0;O<32768;++O)We=(O&43690)>>1|(O&21845)<<1,We=(We&52428)>>2|(We&13107)<<2,We=(We&61680)>>4|(We&3855)<<4,or[O]=((We&65280)>>8|(We&255)<<8)>>1;var We,O,Ot=function(e,t,n){for(var r=e.length,o=0,i=new vt(t);o<r;++o)e[o]&&++i[e[o]-1];var s=new vt(t);for(o=1;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;var a;if(n){a=new vt(1<<t);var l=15-t;for(o=0;o<r;++o)if(e[o])for(var d=o<<4|e[o],u=t-e[o],c=s[e[o]-1]++<<u,h=c|(1<<u)-1;c<=h;++c)a[or[c]>>l]=d}else for(a=new vt(r),o=0;o<r;++o)e[o]&&(a[o]=or[s[e[o]-1]++]>>15-e[o]);return a},En=new fe(288);for(O=0;O<144;++O)En[O]=8;var O;for(O=144;O<256;++O)En[O]=9;var O;for(O=256;O<280;++O)En[O]=7;var O;for(O=280;O<288;++O)En[O]=8;var O,cl=new fe(32);for(O=0;O<32;++O)cl[O]=5;var O,hl=Ot(En,9,1),pl=Ot(cl,5,1),jn=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},xe=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Wn=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},fl=function(e){return(e+7)/8|0},mr=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var r=new fe(n-t);return r.set(e.subarray(t,n)),r},ml=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pe=function(e,t,n){var r=new Error(t||ml[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,pe),!n)throw r;return r},gl=function(e,t,n,r){var o=e.length,i=r?r.length:0;if(!o||t.f&&!t.l)return n||new fe(0);var s=!n||t.i!=2,a=t.i;n||(n=new fe(o*3));var l=function(ni){var ri=n.length;if(ni>ri){var oi=new fe(Math.max(ri*2,ni));oi.set(n),n=oi}},d=t.f||0,u=t.p||0,c=t.b||0,h=t.l,p=t.d,f=t.m,m=t.n,g=o*8;do{if(!h){d=xe(e,u,1);var v=xe(e,u+1,3);if(u+=3,v)if(v==1)h=hl,p=pl,f=9,m=5;else if(v==2){var y=xe(e,u,31)+257,b=xe(e,u+10,15)+4,x=y+xe(e,u+5,31)+1;u+=14;for(var _=new fe(x),C=new fe(19),k=0;k<b;++k)C[al[k]]=xe(e,u+k*3,7);u+=b*3;for(var E=jn(C),R=(1<<E)-1,I=Ot(C,E,1),k=0;k<x;){var M=I[xe(e,u,R)];u+=M&15;var F=M>>4;if(F<16)_[k++]=F;else{var W=0,G=0;for(F==16?(G=3+xe(e,u,3),u+=2,W=_[k-1]):F==17?(G=3+xe(e,u,7),u+=3):F==18&&(G=11+xe(e,u,127),u+=7);G--;)_[k++]=W}}var ee=_.subarray(0,y),X=_.subarray(y);f=jn(ee),m=jn(X),h=Ot(ee,f,1),p=Ot(X,m,1)}else pe(1);else{var F=fl(u)+4,ht=e[F-4]|e[F-3]<<8,en=F+ht;if(en>o){a&&pe(0);break}s&&l(c+ht),n.set(e.subarray(F,en),c),t.b=c+=ht,t.p=u=en*8,t.f=d;continue}if(u>g){a&&pe(0);break}}s&&l(c+131072);for(var br=(1<<f)-1,td=(1<<m)-1,_r=u;;_r=u){var W=h[Wn(e,u)&br],Et=W>>4;if(u+=W&15,u>g){a&&pe(0);break}if(W||pe(2),Et<256)n[c++]=Et;else if(Et==256){_r=u,h=null;break}else{var ei=Et-254;if(Et>264){var k=Et-257,tn=jo[k];ei=xe(e,u,(1<<tn)-1)+Go[k],u+=tn}var wr=p[Wn(e,u)&td],Cr=wr>>4;wr||pe(3),u+=wr&15;var X=ul[Cr];if(Cr>3){var tn=Wo[Cr];X+=Wn(e,u)&(1<<tn)-1,u+=tn}if(u>g){a&&pe(0);break}s&&l(c+131072);var Sr=c+ei;if(c<X){var ti=i-X,nd=Math.min(X,Sr);for(ti+c<0&&pe(3);c<nd;++c)n[c]=r[ti+c]}for(;c<Sr;c+=4)n[c]=n[c-X],n[c+1]=n[c+1-X],n[c+2]=n[c+2-X],n[c+3]=n[c+3-X];c=Sr}}t.l=h,t.p=_r,t.b=c,t.f=d,h&&(d=1,t.m=f,t.d=p,t.n=m)}while(!d);return c==n.length?n:mr(n,0,c)},zf=new fe(0),Bf=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},ds=function(e,t,n){for(var r=e(),o=e.toString(),i=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<r.length;++s){var a=r[s],l=i[s];if(typeof a=="function"){t+=";"+l+"=";var d=a.toString();if(a.prototype)if(d.indexOf("[native code]")!=-1){var u=d.indexOf(" ",8)+1;t+=d.slice(u,d.indexOf("(",u))}else{t+=d;for(var c in a.prototype)t+=";"+l+".prototype."+c+"="+a.prototype[c].toString()}else t+=d}else n[l]=a}return t},Un=[],Vf=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},qf=function(e,t,n,r){if(!Un[n]){for(var o="",i={},s=e.length-1,a=0;a<s;++a)o=ds(e[a],o,i);Un[n]={c:ds(e[s],o,i),e:i}}var l=Bf({},Un[n].e);return Ff(Un[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,l,Vf(l),r)},jf=function(){return[fe,vt,sl,jo,Wo,al,Go,ul,hl,pl,or,ml,Ot,jn,xe,Wn,fl,mr,pe,gl,Jo,yl,vl]},yl=function(e){return postMessage(e,[e.buffer])},vl=function(e){return e&&{out:e.size&&new fe(e.size),dictionary:e.dictionary}},Wf=function(e,t,n,r,o,i){var s=qf(n,r,o,function(a,l){s.terminate(),i(a,l)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},ze=function(e,t){return e[t]|e[t+1]<<8},Le=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Hr=function(e,t){return Le(e,t)+Le(e,t+4)*4294967296};function Gf(e,t,n){return n||(n=t,t={}),typeof n!="function"&&pe(7),Wf(e,t,[jf],function(r){return yl(Jo(r.data[0],vl(r.data[1])))},1,n)}function Jo(e,t){return gl(e,{i:2},t&&t.out,t&&t.dictionary)}var po=typeof TextDecoder<"u"&&new TextDecoder,Jf=0;try{po.decode(zf,{stream:!0}),Jf=1}catch{}var Kf=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return{s:t,r:mr(e,n-1)};o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}};function Yt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(po)return po.decode(e);var o=Kf(e),i=o.s,n=o.r;return n.length&&pe(8),i}}var Zf=function(e,t){return t+30+ze(e,t+26)+ze(e,t+28)},Xf=function(e,t,n){var r=ze(e,t+28),o=Yt(e.subarray(t+46,t+46+r),!(ze(e,t+8)&2048)),i=t+46+r,s=Le(e,t+20),a=n&&s==4294967295?Yf(e,i):[s,Le(e,t+24),Le(e,t+42)],l=a[0],d=a[1],u=a[2];return[ze(e,t+10),l,d,o,i+ze(e,t+30)+ze(e,t+32),u]},Yf=function(e,t){for(;ze(e,t)!=1;t+=4+ze(e,t+2));return[Hr(e,t+12),Hr(e,t+4),Hr(e,t+20)]},us=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function Qf(e,t,n){n||(n=t,t={}),typeof n!="function"&&pe(7);var r=[],o=function(){for(var g=0;g<r.length;++g)r[g]()},i={},s=function(g,v){us(function(){n(g,v)})};us(function(){s=n});for(var a=e.length-22;Le(e,a)!=101010256;--a)if(!a||e.length-a>65558)return s(pe(13,0,1),null),o;var l=ze(e,a+8);if(l){var d=l,u=Le(e,a+16),c=u==4294967295||d==65535;if(c){var h=Le(e,a-12);c=Le(e,h)==101075792,c&&(d=l=Le(e,h+32),u=Le(e,h+48))}for(var p=t&&t.filter,f=function(g){var v=Xf(e,u,c),y=v[0],b=v[1],x=v[2],_=v[3],C=v[4],k=v[5],E=Zf(e,k);u=C;var R=function(M,F){M?(o(),s(M,null)):(F&&(i[_]=F),--l||s(null,i))};if(!p||p({name:_,size:b,originalSize:x,compression:y}))if(!y)R(null,mr(e,E,E+b));else if(y==8){var I=e.subarray(E,E+b);if(b<32e4)try{R(null,Jo(I,{out:new fe(x)}))}catch(M){R(M,null)}else r.push(Gf(I,{size:x},R))}else R(pe(14,"unknown compression type "+y,1),null);else R(null,null)},m=0;m<d;++m)f(m)}else s(null,{});return o}function em(e){return(Array.isArray(e)?e:e.issues).reduce((t,n)=>{if(n.path){let r=n.path.map(({key:o})=>o).join(".");t.nested[r]=[...t.nested[r]||[],n.message]}else t.root=[...t.root||[],n.message];return t},{nested:{}})}var tm=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function nm(e,t){return{reason:e?.reason,validation:t.validation,origin:e?.origin||"value",message:t.message,input:t.input,abortEarly:e?.abortEarly,abortPipeEarly:e?.abortPipeEarly}}function rm(e,t){return{reason:t,origin:e?.origin,abortEarly:e?.abortEarly,abortPipeEarly:e?.abortPipeEarly}}function ct(e,t,n,r){if(!t||!t.length)return{output:e};let o,i,s=e;for(let a of t){let l=a(s);if(l.issue){o=o||rm(n,r);let d=nm(o,l.issue);if(i?i.push(d):i=[d],o.abortEarly||o.abortPipeEarly)break}else s=l.output}return i?{issues:i}:{output:s}}function Pe(e,t){return!e||typeof e=="string"?[e,t]:[void 0,e]}function je(e,t,n,r,o,i){return{issues:[{reason:t,validation:n,origin:e?.origin||"value",message:r,input:o,issues:i,abortEarly:e?.abortEarly,abortPipeEarly:e?.abortPipeEarly}]}}function om(e=[]){return{schema:"any",async:!1,_parse(t,n){return ct(t,e,n,"any")}}}function fn(e,t,n){let[r,o]=Pe(t,n);return{schema:"array",array:{item:e},async:!1,_parse(i,s){if(!Array.isArray(i))return je(s,"type","array",r||"Invalid type",i);let a,l=[];for(let d=0;d<i.length;d++){let u=i[d],c=e._parse(u,s);if(c.issues){let h={schema:"array",input:i,key:d,value:u};for(let p of c.issues)p.path?p.path.unshift(h):p.path=[h],a?.push(p);if(a||(a=c.issues),s!=null&&s.abortEarly)break}else l.push(c.output)}return a?{issues:a}:ct(l,o,s,"array")}}}function zr(e,t){let[n,r]=Pe(e,t);return{schema:"boolean",async:!1,_parse(o,i){return typeof o!="boolean"?je(i,"type","boolean",n||"Invalid type",o):ct(o,r,i,"boolean")}}}function cs(e,t){return{schema:"literal",literal:e,async:!1,_parse(n,r){return n!==e?je(r,"type","literal",t||"Invalid type",n):{output:n}}}}function im(e,t){return{schema:"native_enum",nativeEnum:e,async:!1,_parse(n,r){return Object.values(e).includes(n)?{output:n}:je(r,"type","native_enum",t||"Invalid type",n)}}}function De(e,t){let[n,r]=Pe(e,t);return{schema:"number",async:!1,_parse(o,i){return typeof o!="number"?je(i,"type","number",n||"Invalid type",o):ct(o,r,i,"number")}}}function Me(e,t,n){let[r,o]=Pe(t,n),i;return{schema:"object",object:e,async:!1,_parse(s,a){if(!s||typeof s!="object")return je(a,"type","object",r||"Invalid type",s);i=i||Object.entries(e);let l,d={};for(let[u,c]of i){let h=s[u],p=c._parse(h,a);if(p.issues){let f={schema:"object",input:s,key:u,value:h};for(let m of p.issues)m.path?m.path.unshift(f):m.path=[f],l?.push(m);if(l||(l=p.issues),a!=null&&a.abortEarly)break}else d[u]=p.output}return l?{issues:l}:ct(d,o,a,"object")}}}function U(e){return{schema:"optional",wrapped:e,async:!1,_parse(t,n){return t===void 0?{output:t}:e._parse(t,n)}}}function de(e,t){let[n,r]=Pe(e,t);return{schema:"string",async:!1,_parse(o,i){return typeof o!="string"?je(i,"type","string",n||"Invalid type",o):ct(o,r,i,"string")}}}function sm(e,t,n,r){if(typeof t=="object"&&!Array.isArray(t)){let[s,a]=Pe(n,r);return[e,t,s,a]}let[o,i]=Pe(t,n);return[de(),e,o,i]}var am=["__proto__","prototype","constructor"];function lm(e,t,n,r){let[o,i,s,a]=sm(e,t,n,r);return{schema:"record",record:{key:o,value:i},async:!1,_parse(l,d){if(!l||typeof l!="object")return je(d,"type","record",s||"Invalid type",l);let u,c={};for(let[h,p]of Object.entries(l))if(!am.includes(h)){let f,m=o._parse(h,{origin:"key",abortEarly:d?.abortEarly,abortPipeEarly:d?.abortPipeEarly});if(m.issues){f={schema:"record",input:l,key:h,value:p};for(let v of m.issues)v.path=[f],u?.push(v);if(u||(u=m.issues),d!=null&&d.abortEarly)break}let g=i._parse(p,d);if(g.issues){f=f||{schema:"record",input:l,key:h,value:p};for(let v of g.issues)v.path?v.path.unshift(f):v.path=[f],u?.push(v);if(u||(u=g.issues),d!=null&&d.abortEarly)break}!m.issues&&!g.issues&&(c[m.output]=g.output)}return u?{issues:u}:ct(c,a,d,"record")}}}function dm(e,t,n){if(typeof e=="object"&&!Array.isArray(e)){let[i,s]=Pe(t,n);return[e,i,s]}let[r,o]=Pe(e,t);return[void 0,r,o]}function hs(e,t,n,r){let[o,i,s]=dm(t,n,r);return{schema:"tuple",tuple:{items:e,rest:o},async:!1,_parse(a,l){if(!Array.isArray(a)||!o&&e.length!==a.length||o&&e.length>a.length)return je(l,"type","tuple",i||"Invalid type",a);let d,u=[];for(let c=0;c<e.length;c++){let h=a[c],p=e[c]._parse(h,l);if(p.issues){let f={schema:"tuple",input:a,key:c,value:h};for(let m of p.issues)m.path?m.path.unshift(f):m.path=[f],d?.push(m);if(d||(d=p.issues),l!=null&&l.abortEarly)break}else u[c]=p.output}if(o)for(let c=e.length;c<a.length;c++){let h=a[c],p=o._parse(h,l);if(p.issues){let f={schema:"tuple",input:a,key:c,value:h};for(let m of p.issues)m.path?m.path.unshift(f):m.path=[f],d?.push(m);if(d||(d=p.issues),l!=null&&l.abortEarly)break}else u[c]=p.output}return d?{issues:d}:ct(u,s,l,"tuple")}}}function fo(e,t){return{schema:"union",union:e,async:!1,_parse(n,r){let o,i;for(let s of e){let a=s._parse(n,r);if(a.issues)if(o)for(let l of a.issues)o.push(l);else o=a.issues;else{i=[a.output];break}}return i?{output:i[0]}:je(r,"type","union",t||"Invalid type",n,o)}}}function $n(e,t,n){let[r,o]=Pe(t,n);return Me(e.reduce((i,s)=>({...i,...s.object}),{}),r,o)}function um(e,t,n,r){let[o,i]=Pe(n,r);return Me(Object.entries(e.object).reduce((s,[a,l])=>t.includes(a)?s:{...s,[a]:l},{}),o,i)}function cm(e,t,n){let r=e._parse(t,n);return r.issues?{success:!1,error:new tm(r.issues),issues:r.issues}:{success:!0,data:r.output,output:r.output}}function mo(e,t){return n=>n>e?{issue:{validation:"max_value",message:t||"Invalid value",input:n}}:{output:n}}function go(e,t){return n=>n<e?{issue:{validation:"min_value",message:t||"Invalid value",input:n}}:{output:n}}var hm=Object.create,Ko=Object.defineProperty,pm=Object.getOwnPropertyDescriptor,bl=Object.getOwnPropertyNames,fm=Object.getPrototypeOf,mm=Object.prototype.hasOwnProperty,gm=(e,t,n)=>t in e?Ko(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,In=(e,t)=>function(){return t||(0,e[bl(e)[0]])((t={exports:{}}).exports,t),t.exports},ym=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bl(t))!mm.call(e,o)&&o!==n&&Ko(e,o,{get:()=>t[o],enumerable:!(r=pm(t,o))||r.enumerable});return e},vm=(e,t,n)=>(n=e!=null?hm(fm(e)):{},ym(t||!e||!e.__esModule?Ko(n,"default",{value:e,enumerable:!0}):n,e)),bm=(e,t,n)=>(gm(e,typeof t!="symbol"?t+"":t,n),n),_m=In({"../../node_modules/.pnpm/@rgba-image+copy@0.1.3/node_modules/@rgba-image/copy/dist/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.copy=void 0;var t=(n,r,o=0,i=0,s=n.width-o,a=n.height-i,l=0,d=0)=>{if(o=o|0,i=i|0,s=s|0,a=a|0,l=l|0,d=d|0,s<=0||a<=0)return;let u=new Uint32Array(n.data.buffer),c=new Uint32Array(r.data.buffer);for(let h=0;h<a;h++){let p=i+h;if(p<0||p>=n.height)continue;let f=d+h;if(!(f<0||f>=r.height))for(let m=0;m<s;m++){let g=o+m;if(g<0||g>=n.width)continue;let v=l+m;if(v<0||v>=r.width)continue;let y=p*n.width+g,b=f*r.width+v;c[b]=u[y]}}};e.copy=t}}),wm=In({"../../node_modules/.pnpm/@rgba-image+create-image@0.1.1/node_modules/@rgba-image/create-image/dist/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateImageFactory=(t=[0,0,0,0],n=4)=>{if(n=Math.floor(n),isNaN(n)||n<1)throw TypeError("channels should be a positive non-zero number");if(!("length"in t)||t.length<n)throw TypeError(`fill should be iterable with at least ${n} members`);t=new Uint8ClampedArray(t).slice(0,n);let r=t.every(o=>o===0);return(o,i,s)=>{if(o===void 0||i===void 0)throw TypeError("Not enough arguments");if(o=Math.floor(o),i=Math.floor(i),isNaN(o)||o<1||isNaN(i)||i<1)throw TypeError("Index or size is negative or greater than the allowed amount");let a=o*i*n;if(s===void 0&&(s=new Uint8ClampedArray(a)),s instanceof Uint8ClampedArray){if(s.length!==a)throw TypeError("Index or size is negative or greater than the allowed amount");if(!r)for(let l=0;l<i;l++)for(let d=0;d<o;d++){let u=(l*o+d)*n;for(let c=0;c<n;c++)s[u+c]=t[c]}return{get width(){return o},get height(){return i},get data(){return s}}}throw TypeError("Expected data to be Uint8ClampedArray or undefined")}},e.createImage=e.CreateImageFactory()}}),Cm=In({"../../node_modules/.pnpm/@rgba-image+lanczos@0.1.1/node_modules/@rgba-image/lanczos/dist/filters.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var t=14,n=(i,s)=>{if(i<=-s||i>=s||i==0)return 0;let a=i*Math.PI;return Math.sin(a)/a*Math.sin(a/s)/(a/s)},r=i=>Math.round(i*((1<<t)-1)),o=(i,s,a,l,d)=>{let u=d?2:3,c=1/a,h=Math.min(1,a),p=u/h,f=Math.floor((p+1)*2),m=new Int16Array((f+2)*s),g=0;for(let v=0;v<s;v++){let y=(v+.5)*c+l,b=Math.max(0,Math.floor(y-p)),x=Math.min(i-1,Math.ceil(y+p)),_=x-b+1,C=new Float32Array(_),k=new Int16Array(_),E=0,R=0;for(let ee=b;ee<=x;ee++){let X=n((ee+.5-y)*h,u);E+=X,C[R]=X,R++}let I=0;for(let ee=0;ee<C.length;ee++){let X=C[ee]/E;I+=X,k[ee]=r(X)}k[s>>1]+=r(1-I);let M=0;for(;M<k.length&&k[M]===0;)M++;let F=k.length-1;for(;F>0&&k[F]===0;)F--;let W=b+M,G=F-M+1;m[g++]=W,m[g++]=G,m.set(k.subarray(M,F+1),g),g+=G}return m};e.filters=o}}),Sm=In({"../../node_modules/.pnpm/@rgba-image+lanczos@0.1.1/node_modules/@rgba-image/lanczos/dist/convolve.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convolve=void 0;var t=14,n=(r,o,i,s,a,l)=>{let d=0,u=0;for(let c=0;c<s;c++){let h=0;for(let p=0;p<a;p++){let f=l[h++],m=d+f*4|0,g=0,v=0,y=0,b=0;for(let x=l[h++];x>0;x--){let _=l[h++];g=g+_*r[m]|0,v=v+_*r[m+1]|0,y=y+_*r[m+2]|0,b=b+_*r[m+3]|0,m=m+4|0}o[u]=g+8192>>t,o[u+1]=v+8192>>t,o[u+2]=y+8192>>t,o[u+3]=b+8192>>t,u=u+s*4|0}u=(c+1)*4|0,d=(c+1)*i*4|0}};e.convolve=n}}),km=In({"../../node_modules/.pnpm/@rgba-image+lanczos@0.1.1/node_modules/@rgba-image/lanczos/dist/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.lanczos2=e.lanczos=void 0;var t=_m(),n=wm(),r=Cm(),o=Sm(),i=(l,d,u=!1)=>{let c=d.width/l.width,h=d.height/l.height,p=r.filters(l.width,d.width,c,0,u),f=r.filters(l.height,d.height,h,0,u),m=new Uint8ClampedArray(d.width*l.height*4);o.convolve(l.data,m,l.width,l.height,d.width,p),o.convolve(m,d.data,l.height,d.width,d.height,f)},s=(l,d,u=0,c=0,h=l.width-u,p=l.height-c,f=0,m=0,g=d.width-f,v=d.height-m)=>{if(u=u|0,c=c|0,h=h|0,p=p|0,f=f|0,m=m|0,g=g|0,v=v|0,h<=0||p<=0||g<=0||v<=0)return;if(u===0&&c===0&&h===l.width&&p===l.height&&f===0&&m===0&&g===d.width&&v===d.height){i(l,d);return}let y=n.createImage(h,p),b=n.createImage(g,v);t.copy(l,y,u,c),i(y,b),t.copy(b,d,0,0,b.width,b.height,f,m)};e.lanczos=s;var a=(l,d,u=0,c=0,h=l.width-u,p=l.height-c,f=0,m=0,g=d.width-f,v=d.height-m)=>{if(u=u|0,c=c|0,h=h|0,p=p|0,f=f|0,m=m|0,g=g|0,v=v|0,h<=0||p<=0||g<=0||v<=0)return;if(u===0&&c===0&&h===l.width&&p===l.height&&f===0&&m===0&&g===d.width&&v===d.height){i(l,d,!0);return}let y=n.createImage(h,p),b=n.createImage(g,v);t.copy(l,y,u,c),i(y,b,!0),t.copy(b,d,0,0,b.width,b.height,f,m)};e.lanczos2=a}}),_l=(e=>(e.Bounce="bounce",e.Normal="normal",e))(_l||{}),xm=im(_l),wl=Me({autoplay:U(zr()),defaultTheme:U(de()),direction:U(fo([cs(1),cs(-1)])),hover:U(zr()),id:de(),intermission:U(De()),loop:U(fo([zr(),De()])),playMode:U(xm),speed:U(De()),themeColor:U(de())}),Tm=Me({animations:fn(de()),id:de()}),Am=Me({activeAnimationId:U(de()),animations:fn(wl),author:U(de()),custom:U(lm(de(),om())),description:U(de()),generator:U(de()),keywords:U(de()),revision:U(De()),themes:U(fn(Tm)),states:U(fn(de())),version:U(de())}),Cl=um(wl,["id"]),Tt=Me({state:de()}),Em=Tt,$m=$n([Tt,Me({ms:De()})]),Im=$n([Tt,Me({count:De()})]),Mm=Tt,Nm=Tt,Lm=Tt,Rm=$n([Tt,Me({threshold:U(fn(De([go(0),mo(1)])))})]),Dm=Me({onAfter:U($m),onClick:U(Em),onComplete:U(Lm),onEnter:U(Im),onMouseEnter:U(Mm),onMouseLeave:U(Nm),onShow:U(Rm)}),Pm=$n([Cl,Me({playOnScroll:U(hs([De([go(0),mo(1)]),De([go(0),mo(1)])])),segments:U(fo([hs([De(),De()]),de()]))})]);$n([Dm,Me({animationId:U(de()),playbackSettings:Pm})]);var Om={jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",svg:"image/svg+xml",webp:"image/webp",mpeg:"audio/mpeg",mp3:"audio/mp3"},ps={jpeg:[255,216,255],png:[137,80,78,71,13,10,26,10],gif:[71,73,70],bmp:[66,77],webp:[82,73,70,70,87,69,66,80],svg:[60,63,120],mp3:[73,68,51,3,0,0,0,0],mpeg:[73,68,51,3,0,0,0,0]},Fm=e=>{let t=null,n=[];if(!e)return null;let r=e.substring(e.indexOf(",")+1);typeof window>"u"?t=Buffer.from(r,"base64").toString("binary"):t=atob(r);let o=new Uint8Array(t.length);for(let i=0;i<t.length;i+=1)o[i]=t.charCodeAt(i);n=Array.from(o.subarray(0,8));for(let i in ps){let s=ps[i];if(s&&n.every((a,l)=>a===s[l]))return Om[i]}return null},Zo=class extends Error{constructor(e,t){super(e),bm(this,"code"),this.name="[dotlottie-js]",this.code=t}};function Sl(e){let t;if(typeof window>"u")t=Buffer.from(e).toString("base64");else{let n=Array.prototype.map.call(e,r=>String.fromCharCode(r)).join("");t=window.btoa(n)}return`data:${Fm(t)};base64,${t}`}function fs(e){return"w"in e&&"h"in e&&!("xt"in e)&&"p"in e}function yo(e){return!("h"in e)&&!("w"in e)&&"p"in e&&"e"in e&&"u"in e&&"id"in e}async function Mn(e,t=()=>!0){if(!(e instanceof Uint8Array))throw new Zo("DotLottie not found","INVALID_DOTLOTTIE");return await new Promise((n,r)=>{Qf(e,{filter:t},(o,i)=>{o&&r(o),n(i)})})}async function Xo(e,t,n){if(!(e instanceof Uint8Array))throw new Zo("DotLottie not found","INVALID_DOTLOTTIE");return(await Mn(e,r=>r.name===t&&(!n||n(r))))[t]}async function vo(e){let t="manifest.json",n=(await Mn(e,r=>r.name===t))[t];if(!(typeof n>"u"))return JSON.parse(Yt(n,!1))}async function Um(e){if(!(e instanceof Uint8Array))return{success:!1,error:"DotLottie not found"};let t=await vo(e);if(typeof t>"u")return{success:!1,error:"Invalid .lottie file, manifest.json is missing"};let n=cm(Am,t);return n.success?{success:!0}:{success:!1,error:`Invalid .lottie file, manifest.json structure is invalid, ${JSON.stringify(em(n.error).nested,null,2)}`}}async function ms(e){let t=new Uint8Array(e),n=await Um(t);if(n.error)throw new Zo(n.error,"INVALID_DOTLOTTIE");return t}async function Hm(e,t){let n=await Mn(e,o=>{let i=o.name.replace("audio/","");return o.name.startsWith("audio/")&&(!t||t({...o,name:i}))}),r={};for(let o in n){let i=n[o];if(i instanceof Uint8Array){let s=o.replace("audio/","");r[s]=Sl(i)}}return r}async function zm(e,t){var n;let r=new Map;for(let[i,s]of Object.entries(t))for(let a of s.assets||[])if(yo(a)){let l=a.p;r.has(l)||r.set(l,new Set),(n=r.get(l))==null||n.add(i)}let o=await Hm(e,i=>r.has(i.name));for(let[i,s]of r){let a=o[i];if(a)for(let l of s){let d=t[l];for(let u of d?.assets||[])yo(u)&&u.p===i&&(u.p=a,u.u="",u.e=1)}}}async function Bm(e,t){let n=await Mn(e,o=>{let i=o.name.replace("images/","");return o.name.startsWith("images/")&&(!t||t({...o,name:i}))}),r={};for(let o in n){let i=n[o];if(i instanceof Uint8Array){let s=o.replace("images/","");r[s]=Sl(i)}}return r}async function Vm(e,t){var n;let r=new Map;for(let[i,s]of Object.entries(t))for(let a of s.assets||[])if(fs(a)){let l=a.p;r.has(l)||r.set(l,new Set),(n=r.get(l))==null||n.add(i)}let o=await Bm(e,i=>r.has(i.name));for(let[i,s]of r){let a=o[i];if(a)for(let l of s){let d=t[l];for(let u of d?.assets||[])fs(u)&&u.p===i&&(u.p=a,u.u="",u.e=1)}}}async function qm(e,t,{inlineAssets:n}={},r){let o=`animations/${t}.json`,i=await Xo(e,o,r);if(typeof i>"u")return;let s=JSON.parse(Yt(i,!1));if(!n)return s;let a={[t]:s};return await Vm(e,a),await zm(e,a),s}async function jm(e,t,n){let r=`themes/${t}.lss`,o=await Xo(e,r,n);if(!(typeof o>"u"))return Yt(o,!1)}async function Wm(e,t){let n={},r=await Mn(e,o=>{let i=o.name.replace("states/","").replace(".json","");return o.name.startsWith("states/")&&(!t||t({...o,name:i}))});for(let o in r){let i=r[o];if(i instanceof Uint8Array){let s=o.replace("states/","").replace(".json","");n[s]=Yt(i,!1)}}return n}async function Gm(e,t,n){let r=`states/${t}.json`,o=await Xo(e,r,n);return typeof o>"u"?void 0:JSON.parse(Yt(o,!1))}vm(km());function P(e,t="dotLottie-common"){return new Error(`[${t}]: ${e}`)}function It(e,t="dotLottie-common",...n){console.error(`[${t}]:`,e,...n)}function V(e,t="dotLottie-common",...n){console.warn(`[${t}]:`,e,...n)}function Jm(e=""){let t=e.trim(),n=t.lastIndexOf("/"),r=t.substring(n+1),o=r.indexOf(".");return o!==-1?r.substring(0,o):r}function ir(e){return["v","ip","op","layers","fr","w","h"].every(t=>Object.prototype.hasOwnProperty.call(e,t))}function Km(e){let t=e.assets;return t?t.some(n=>yo(n)):!1}function Zm(e){try{let t=JSON.parse(e);return ir(t)}catch{return!1}}function xy(e,t){let n=Object.keys(e).find(r=>e[r]===t);if(n===void 0)throw new Error("Value not found in the object.");return n}var Xm=class{_dotLottie;_animationsMap=new Map;_themeMap=new Map;_stateMachinesMap=new Map;_manifest;get dotLottie(){return this._dotLottie}get animationsMap(){return this._animationsMap}get themeMap(){return this._themeMap}get stateMachinesMap(){return this._stateMachinesMap}get manifest(){return this._manifest}async loadFromUrl(e){let t=await fetch(e,{method:"GET",mode:"cors"});if(!t.ok)throw new Error(`Failed to load dotLottie from ${e} with status ${t.status}`);let n=t.headers.get("content-type");if(n!=null&&n.includes("application/json")){let r=await t.json();if(!ir(r))throw new Error(`Invalid lottie JSON at ${e}`);let o=Jm(e);this._animationsMap.set(o,r);let i={activeAnimationId:o,animations:[{id:o}]};this._manifest=i}else{this._dotLottie=await ms(await t.arrayBuffer());let r=await vo(this._dotLottie);if(!r)throw new Error("Manifest not found");this._manifest=r}}loadFromLottieJSON(e){if(!ir(e))throw new Error("Invalid lottie JSON");let t="my-animation";this._animationsMap.set(t,e);let n={activeAnimationId:t,animations:[{id:t}]};this._manifest=n}async loadFromArrayBuffer(e){this._dotLottie=await ms(e);let t=await vo(this._dotLottie);if(!t)throw new Error("Manifest not found");this._manifest=t}async getAnimation(e){if(this._animationsMap.get(e))return this._animationsMap.get(e);if(!this._dotLottie)return;let t=await qm(this._dotLottie,e,{inlineAssets:!0});return t&&this._animationsMap.set(e,t),t}async getTheme(e){if(this._themeMap.get(e))return this._themeMap.get(e);if(!this._dotLottie)return;let t=await jm(this._dotLottie,e);return t&&this._themeMap.set(e,t),t}async getStateMachines(){if(!this._dotLottie)return;let e=await Wm(this._dotLottie);for(let t in e)if(t){let n=e[t];if(n){let r=JSON.parse(n);if(r){let o=r.descriptor.id;this._stateMachinesMap.get(o)||this._stateMachinesMap.set(o,r)}}}return Array.from(this._stateMachinesMap.values())}async getStateMachine(e){if(this._stateMachinesMap.get(e))return this._stateMachinesMap.get(e);if(!this._dotLottie)return;let t=await Gm(this._dotLottie,e);return t&&this._stateMachinesMap.set(t.descriptor.id,t),t}};async function Ym(e,t){let[{relottie:n},{default:r}]=await Promise.all([Ne(()=>import("./dist-TF5BXIJN-GNSUL5QU-10020f29.js"),["./dist-TF5BXIJN-GNSUL5QU-10020f29.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url),Ne(()=>import("./dist-K62S3CAZ-EPQMQGUE-5537dc11.js"),["./dist-K62S3CAZ-EPQMQGUE-5537dc11.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url)]),o=await n().use(r,{lss:t}).process(JSON.stringify(e));return JSON.parse(o.value)}function gr(){throw new Error("Cycle detected")}function Yo(){if(Ft>1)Ft--;else{for(var e,t=!1;mn!==void 0;){var n=mn;for(mn=void 0,bo++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&xl(n))try{n.c()}catch(o){t||(e=o,t=!0)}n=r}}if(bo=0,Ft--,t)throw e}}var J=void 0,mn=void 0,Ft=0,bo=0,sr=0;function kl(e){if(J!==void 0){var t=e.n;if(t===void 0||t.t!==J)return t={i:0,S:e,p:J.s,n:void 0,t:J,e:void 0,x:void 0,r:t},J.s!==void 0&&(J.s.n=t),J.s=t,e.n=t,32&J.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=J.s,t.n=void 0,J.s.n=t,J.s=t),t}}function _e(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}_e.prototype.h=function(){return!0};_e.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};_e.prototype.U=function(e){if(this.t!==void 0){var t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}};_e.prototype.subscribe=function(e){var t=this;return tg(function(){var n=t.value,r=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=r}})};_e.prototype.valueOf=function(){return this.value};_e.prototype.toString=function(){return this.value+""};_e.prototype.toJSON=function(){return this.value};_e.prototype.peek=function(){return this.v};Object.defineProperty(_e.prototype,"value",{get:function(){var e=kl(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(J instanceof At&&function(){throw new Error("Computed cannot have side-effects")}(),e!==this.v){bo>100&&gr(),this.v=e,this.i++,sr++,Ft++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Yo()}}}});function Qm(e){return new _e(e)}function xl(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Tl(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Al(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function At(e){_e.call(this,void 0),this.x=e,this.s=void 0,this.g=sr-1,this.f=4}(At.prototype=new _e).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===sr))return!0;if(this.g=sr,this.f|=1,this.i>0&&!xl(this))return this.f&=-2,!0;var e=J;try{Tl(this),J=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return J=e,Al(this),this.f&=-2,!0};At.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}_e.prototype.S.call(this,e)};At.prototype.U=function(e){if(this.t!==void 0&&(_e.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};At.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};At.prototype.peek=function(){if(this.h()||gr(),16&this.f)throw this.v;return this.v};Object.defineProperty(At.prototype,"value",{get:function(){1&this.f&&gr();var e=kl(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function El(e){var t=e.u;if(e.u=void 0,typeof t=="function"){Ft++;var n=J;J=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,Qo(e),r}finally{J=n,Yo()}}}function Qo(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,El(e)}function eg(e){if(J!==this)throw new Error("Out-of-order effect");Al(this),J=e,this.f&=-2,8&this.f&&Qo(this),Yo()}function Nn(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Nn.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};Nn.prototype.S=function(){1&this.f&&gr(),this.f|=1,this.f&=-9,El(this),Tl(this),Ft++;var e=J;return J=this,eg.bind(this,e)};Nn.prototype.N=function(){2&this.f||(this.f|=2,this.o=mn,mn=this)};Nn.prototype.d=function(){this.f|=8,1&this.f||Qo(this)};function tg(e){var t=new Nn(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var ng=class{_state;_prevState;constructor(e){this._prevState=e,this._state=Qm(e)}setState(e){this._prevState=this._state.value,this._state.value=e}subscribe(e){return this._state.subscribe(t=>e(t,this._prevState))}};async function rg(e,t){let[{DotLottieStateMachineManager:n}]=await Promise.all([Ne(()=>import("./dotlottie-state-machine-manager-7AXSPEV3-C4JS27KT-5794f9c1.js"),["./dotlottie-state-machine-manager-7AXSPEV3-C4JS27KT-5794f9c1.js","./vue.esm-bundler-33967e91.js","./ModalPvLimitAlertView-cb9178ae.js","./vue-i18n.cjs-bd62fc86.js","./_commonjsHelpers-042e6b4d.js","./ModalUpgradeRequired-a455cfd7.js","./BasicModal-000dc82b.js","./_plugin-vue_export-helper-c27b6911.js","./BasicModal-276b42ea.css","./PfButton-db6d6722.js","./PfIconContext-bd54ca9b.js","./ModalUpgradeRequired-1a015d77.css","./lodash-bf1bac5c.js","./_commonjs-dynamic-modules-302442b1.js","./iframe-4066d2cc.js","./PfIcon-bb1c3c10.js","./mapValues-a1d744f5.js","./ModalPvLimitAlertView-c58a5858.css","./tiptap-extension-paragraph.esm-72054cce.js"],import.meta.url)]);if(!e.length)throw P("No state machines available inside this .lottie!");return new n(e,t)}var og={name:"@dotlottie/common",version:"0.7.3",type:"module",description:"",author:"Afsal <afsal@lottiefiles.com>, Sam Osborne <sam@lottiefiles.com>",license:"MIT",engines:{node:">18.0.0"},module:"dist/index.js",main:"dist/index.js",types:"dist/index.d.ts",files:["dist"],keywords:[],scripts:{build:"tsup",dev:"tsup --watch",lint:"eslint .","type-check":"tsc --noEmit"},dependencies:{"@dotlottie/dotlottie-js":"0.6.0","@lottiefiles/relottie":"1.0.0","@lottiefiles/relottie-style":"0.4.1","@preact/signals-core":"^1.2.3",howler:"^2.2.3","lottie-web":"^5.12.2",xstate:"^4.38.1"},devDependencies:{"@lottiefiles/lottie-types":"^1.2.0","@types/howler":"^2.2.8",tsup:"^7.2.0",typescript:"^4.7.4"},publishConfig:{access:"public"}},Ke=(e=>(e.Complete="complete",e.DataFail="data_fail",e.DataReady="data_ready",e.Error="error",e.Frame="frame",e.Freeze="freeze",e.LoopComplete="loopComplete",e.Pause="pause",e.Play="play",e.Ready="ready",e.Stop="stop",e.VisibilityChange="visibilityChange",e))(Ke||{}),Rt=(e=>(e.Completed="completed",e.Error="error",e.Fetching="fetching",e.Frozen="frozen",e.Initial="initial",e.Loading="loading",e.Paused="paused",e.Playing="playing",e.Ready="ready",e.Stopped="stopped",e))(Rt||{}),$l=(e=>(e.Bounce="bounce",e.Normal="normal",e))($l||{}),ke={autoplay:!1,direction:1,hover:!1,intermission:0,loop:!1,playMode:"normal",speed:1,defaultTheme:""},Il={activeStateId:"",autoplay:!1,currentState:"initial",frame:0,seeker:0,direction:1,hover:!1,loop:!1,playMode:"normal",speed:1,background:"transparent",intermission:0,currentAnimationId:void 0,visibilityPercentage:0},gs=class{_lottie;_src;_animationConfig;_prevUserPlaybackOptions={};_userPlaybackOptions;_hover=!1;_loop=!1;_counter=0;_intermission=0;_counterInterval=null;_container=null;_name;_mode="normal";_background="transparent";_animation;_defaultTheme;_activeAnimationId;_currentAnimationId;_testId;_listeners=new Map;_currentState="initial";_stateBeforeFreeze="initial";state=new ng(Il);_light=!1;_worker=!1;_dotLottieLoader=new Xm;_activeStateId;_inInteractiveMode=!1;_scrollTicking=!1;_scrollCallback=void 0;_onShowIntersectionObserver=void 0;_visibilityPercentage=0;_audios=[];_stateMachineManager;constructor(e,t,n){typeof e=="string"?this._src=e:this._src=Object.assign({},e),n!=null&&n.testId&&(this._testId=n.testId),this._defaultTheme=n?.defaultTheme||"",this._userPlaybackOptions=this._validatePlaybackOptions(n||{}),typeof n?.activeAnimationId=="string"&&(this._activeAnimationId=n.activeAnimationId),this._container=t||null,typeof n?.background=="string"&&this.setBackground(n.background),typeof n?.activeStateId<"u"&&(this._activeStateId=n.activeStateId);let{rendererSettings:r,...o}=n||{};this._animationConfig={loop:!1,autoplay:!1,renderer:"svg",rendererSettings:{clearCanvas:!0,progressiveLoad:!0,hideOnTransparent:!0,filterSize:{width:"200%",height:"200%",x:"-50%",y:"-50%"},...r},...o},n!=null&&n.light&&(this._light=n.light),n!=null&&n.worker&&(this._worker=n.worker),this._listenToHover(),this._listenToVisibilityChange()}_listenToHover(){var e,t,n,r;let o=()=>{this._hover&&this.currentState!=="playing"&&this.play()},i=()=>{this._hover&&this.currentState==="playing"&&this.stop()};(e=this._container)==null||e.removeEventListener("mouseenter",o),(t=this._container)==null||t.removeEventListener("mouseleave",i),(n=this._container)==null||n.addEventListener("mouseleave",i),(r=this._container)==null||r.addEventListener("mouseenter",o)}_onVisibilityChange(){!this._lottie||typeof document>"u"||(document.hidden&&this.currentState==="playing"?this.freeze():this.currentState==="frozen"&&this.unfreeze())}_listenToVisibilityChange(){typeof document<"u"&&typeof document.hidden<"u"&&document.addEventListener("visibilitychange",()=>this._onVisibilityChange())}_getOption(e){var t;if(typeof this._userPlaybackOptions[e]<"u")return this._userPlaybackOptions[e];let n=(t=this._dotLottieLoader.manifest)==null?void 0:t.animations.find(r=>r.id===this._currentAnimationId);return n&&typeof n[e]<"u"?n[e]:ke[e]}_getPlaybackOptions(){let e={};for(let t in ke)typeof ke[t]<"u"&&(e[t]=this._getOption(t));return e}_setPlayerState(e){var t,n,r;let o=e(this._getPlaybackOptions());try{Cl._parse(o)}catch{V(`Invalid PlaybackOptions, ${JSON.stringify(o,null,2)}`);return}typeof o.defaultTheme<"u"&&(this._defaultTheme=o.defaultTheme),typeof o.playMode<"u"&&(this._mode=o.playMode),typeof o.intermission<"u"&&(this._intermission=o.intermission),typeof o.hover<"u"&&(this._hover=o.hover),typeof o.loop<"u"&&(this.clearCountTimer(),this._loop=o.loop,this._counter=0,(t=this._lottie)==null||t.setLoop(typeof o.loop=="number"?!0:o.loop)),typeof o.speed<"u"&&((n=this._lottie)==null||n.setSpeed(o.speed)),typeof o.autoplay<"u"&&this._lottie&&(this._lottie.autoplay=o.autoplay),typeof o.direction<"u"&&((r=this._lottie)==null||r.setDirection(o.direction))}_getOptionsFromAnimation(e){let{id:t,...n}=e;return{...ke,...n}}_updateTestData(){!this._testId||!this._lottie||(window.dotLottiePlayer||(window.dotLottiePlayer={[this._testId]:{}}),window.dotLottiePlayer[this._testId]={direction:this._lottie.playDirection,currentState:this._currentState,loop:this.loop,mode:this._mode,speed:this._lottie.playSpeed})}setContainer(e){e!==this._container&&(this._container=e,this.setBackground(this._background),this._listenToHover())}get currentState(){return this._currentState}clearCountTimer(){this._counterInterval&&clearInterval(this._counterInterval)}setCurrentState(e){this._currentState=e,this._notify(),this._updateTestData()}static isPathJSON(e){var t;return((t=e.split(".").pop())==null?void 0:t.toLowerCase())==="json"}get src(){return this._src}updateSrc(e){this._src!==e&&(typeof e=="string"?this._src=e:this._src=Object.assign({},e),this._activeAnimationId=void 0,this._currentAnimationId=void 0,this.load())}get intermission(){return this._intermission}get hover(){return this._hover}setHover(e){typeof e=="boolean"&&(this._hover=e,this._userPlaybackOptions.hover=e,this._notify())}setIntermission(e){this._intermission=e,this._userPlaybackOptions.intermission=e,this._notify()}get mode(){return this._mode}get animations(){return this._dotLottieLoader.animationsMap}get themes(){return this._dotLottieLoader.themeMap}setMode(e){typeof e=="string"&&(this._mode=e,this._userPlaybackOptions.playMode=e,this._setPlayerState(()=>({playMode:e})),this._notify(),this._updateTestData())}get container(){if(this._container)return this._container}goToAndPlay(e,t,n){if(!this._lottie||["loading"].includes(this._currentState)){V("goToAndPlay() Can't use whilst loading.");return}this._lottie.goToAndPlay(e,t,n),this.setCurrentState("playing")}goToAndStop(e,t,n){if(!this._lottie||["loading"].includes(this._currentState)){V("goToAndStop() Can't use whilst loading.");return}this._lottie.goToAndStop(e,t,n),this.setCurrentState("stopped")}seek(e){if(!this._lottie||["loading"].includes(this._currentState)){V("seek() Can't use whilst loading.");return}let t=e;typeof t=="number"&&(t=Math.round(t));let n=/^(\d+)(%?)$/u.exec(t.toString());if(!n)return;let r=n[2]==="%"?this.totalFrames*Number(n[1])/100:n[1];r!==void 0&&(this._lottie.goToAndPlay(r,!0),this.currentState==="playing"?this.play():this.currentState==="frozen"?this.freeze():this.pause())}_areNumbersInRange(e,t){return e>=0&&e<=1&&t>=0&&t<=1}_updatePosition(e,t,n){let[r,o]=e??[0,this.totalFrames-1],[i,s]=t??[0,1];if(!this._areNumbersInRange(i,s)){It("threshold values must be between 0 and 1");return}if(this.container){let{height:a,top:l}=this.container.getBoundingClientRect(),d=window.innerHeight-l,u=window.innerHeight+a,c=d/u,h=r+Math.round((c-i)/(s-i)*(o-r));n&&n(c),this.goToAndStop(h,!0),(h>=o||c>=s)&&this._handleAnimationComplete()}this._scrollTicking=!1}_requestTick(e,t,n){this._scrollTicking||(requestAnimationFrame(()=>this._updatePosition(e,t,n)),this._scrollTicking=!0)}playOnScroll(e){this.stop(),this._scrollCallback&&this.stopPlayOnScroll(),this._scrollCallback=()=>this._requestTick(e?.segments,e?.threshold,e?.positionCallback),window.addEventListener("scroll",this._scrollCallback)}stopPlayOnScroll(){this._scrollCallback&&(window.removeEventListener("scroll",this._scrollCallback),this._scrollCallback=void 0)}stopPlayOnShow(){this._onShowIntersectionObserver&&(this._onShowIntersectionObserver.disconnect(),this._onShowIntersectionObserver=void 0)}addIntersectionObserver(e){if(!this.container)throw P("Can't play on show, player container element not available.");let t={root:null,rootMargin:"0px",threshold:e!=null&&e.threshold?e.threshold:[0,1]},n=r=>{r.forEach(o=>{var i,s;this._visibilityPercentage=o.intersectionRatio*100,o.isIntersecting?(e!=null&&e.callbackOnIntersect&&e.callbackOnIntersect(this._visibilityPercentage),(i=this._container)==null||i.dispatchEvent(new Event("visibilityChange"))):e!=null&&e.callbackOnIntersect&&(e.callbackOnIntersect(0),(s=this._container)==null||s.dispatchEvent(new Event("visibilityChange")))})};this._onShowIntersectionObserver=new IntersectionObserver(n,t),this._onShowIntersectionObserver.observe(this.container)}playOnShow(e){var t;if(this.stop(),!this.container)throw P("Can't play on show, player container element not available.");this._onShowIntersectionObserver&&this.stopPlayOnShow(),this.addIntersectionObserver({threshold:(t=e?.threshold)!=null?t:[],callbackOnIntersect:n=>{n===0?this.pause():this.play()}})}_validatePlaybackOptions(e){if(!e)return{};let t={};for(let[n,r]of Object.entries(e))switch(n){case"autoplay":typeof r=="boolean"&&(t.autoplay=r);break;case"direction":typeof r=="number"&&[1,-1].includes(r)&&(t.direction=r);break;case"loop":(typeof r=="boolean"||typeof r=="number")&&(t.loop=r);break;case"playMode":typeof r=="string"&&["normal","bounce"].includes(r)&&(t.playMode=r);break;case"speed":typeof r=="number"&&(t.speed=r);break;case"themeColor":typeof r=="string"&&(t.themeColor=r);break;case"hover":typeof r=="boolean"&&(t.hover=r);break;case"intermission":typeof r=="number"&&(t.intermission=r);break;case"defaultTheme":typeof r=="string"&&(t.defaultTheme=r);break}return this._requireValidPlaybackOptions(t),t}_requireAnimationsInTheManifest(){var e;if(!((e=this._dotLottieLoader.manifest)!=null&&e.animations.length))throw P("No animations found in manifest.")}_requireAnimationsToBeLoaded(){if(this._dotLottieLoader.animationsMap.size===0)throw P("No animations have been loaded.")}async play(e,t){var n,r;if(["initial","loading"].includes(this._currentState)){V("Player unable to play whilst loading.");return}if(this._requireAnimationsInTheManifest(),this._requireAnimationsToBeLoaded(),this._lottie&&!e){this._lottie.playDirection===-1&&this._lottie.currentFrame===0?this._lottie.goToAndPlay(this._lottie.totalFrames,!0):this._lottie.play(),this.setCurrentState("playing");return}if(typeof e=="number"){let o=(n=this._dotLottieLoader.manifest)==null?void 0:n.animations[e];if(!o)throw P("animation not found.");typeof t=="function"?await this.render({id:o.id,...t(this._getPlaybackOptions(),this._getOptionsFromAnimation(o))}):await this.render({id:o.id})}if(typeof e=="string"){let o=(r=this._dotLottieLoader.manifest)==null?void 0:r.animations.find(i=>i.id===e);if(!o)throw P("animation not found.");typeof t=="function"?await this.render({id:o.id,...t(this._getPlaybackOptions(),this._getOptionsFromAnimation(o))}):await this.render({id:o.id})}}playSegments(e,t){if(!this._lottie||["loading"].includes(this._currentState)){V("playSegments() Can't use whilst loading.");return}this._lottie.playSegments(e,t),this.setCurrentState("playing")}resetSegments(e){if(!this._lottie||["loading"].includes(this._currentState)){V("resetSegments() Can't use whilst loading.");return}this._lottie.resetSegments(e)}togglePlay(){this.currentState==="playing"?this.pause():this.play()}_getAnimationByIdOrIndex(e){var t,n;if(this._requireAnimationsInTheManifest(),this._requireAnimationsToBeLoaded(),typeof e=="number"){let r=(t=this._dotLottieLoader.manifest)==null?void 0:t.animations[e];if(!r)throw P("animation not found.");return r}if(typeof e=="string"){let r=(n=this._dotLottieLoader.manifest)==null?void 0:n.animations.find(o=>o.id===e);if(!r)throw P("animation not found.");return r}throw P("first param must be a number or string")}get activeAnimationId(){return this._getActiveAnimationId()}get currentAnimationId(){return this._currentAnimationId}get activeStateId(){return this._activeStateId}async _startInteractivity(e){if(!this._inInteractiveMode){It("Can't start interactivity. Not in interactive mode. Call enterInteractiveMode(stateId: string) to start.");return}if(this._dotLottieLoader.stateMachinesMap.size===0&&await this._dotLottieLoader.getStateMachines(),this._dotLottieLoader.stateMachinesMap.size===0)throw P("No interactivity states are available.");if(e==="undefined")throw P("stateId is not specified.");this._stateMachineManager||(this._stateMachineManager=await rg(Array.from(this._dotLottieLoader.stateMachinesMap.values()),this)),this._stateMachineManager.start(e)}enterInteractiveMode(e){var t;if(e)this._inInteractiveMode||(this._prevUserPlaybackOptions={...this._userPlaybackOptions}),this._inInteractiveMode&&((t=this._stateMachineManager)==null||t.stop()),this._activeStateId=e,this._inInteractiveMode=!0,this._startInteractivity(e);else throw P("stateId must be a non-empty string.")}exitInteractiveMode(){var e;this._inInteractiveMode&&(this._inInteractiveMode=!1,this._activeStateId="",(e=this._stateMachineManager)==null||e.stop(),this._userPlaybackOptions={},this._userPlaybackOptions={...this._prevUserPlaybackOptions},this._prevUserPlaybackOptions={},this.reset())}reset(){var e;let t=this._getActiveAnimationId(),n=(e=this._dotLottieLoader.manifest)==null?void 0:e.animations.find(r=>r.id===t);if(this._inInteractiveMode&&this.exitInteractiveMode(),!n)throw P("animation not found.");this.play(t)}previous(e){if(!this._dotLottieLoader.manifest||!this._dotLottieLoader.manifest.animations.length)throw P("manifest not found.");if(this._inInteractiveMode){V("previous() is not supported in interactive mode.");return}let t=this._dotLottieLoader.manifest.animations.findIndex(r=>r.id===this._currentAnimationId);if(t===-1)throw P("animation not found.");let n=this._dotLottieLoader.manifest.animations[(t-1+this._dotLottieLoader.manifest.animations.length)%this._dotLottieLoader.manifest.animations.length];if(!n||!n.id)throw P("animation not found.");typeof e=="function"?this.render({id:n.id,...e(this._getPlaybackOptions(),this._getOptionsFromAnimation(n))}):this.render({id:n.id})}next(e){if(!this._dotLottieLoader.manifest||!this._dotLottieLoader.manifest.animations.length)throw P("manifest not found.");if(this._inInteractiveMode){V("next() is not supported in interactive mode.");return}let t=this._dotLottieLoader.manifest.animations.findIndex(r=>r.id===this._currentAnimationId);if(t===-1)throw P("animation not found.");let n=this._dotLottieLoader.manifest.animations[(t+1)%this._dotLottieLoader.manifest.animations.length];if(!n||!n.id)throw P("animation not found.");typeof e=="function"?this.render({id:n.id,...e(this._getPlaybackOptions(),this._getOptionsFromAnimation(n))}):this.render({id:n.id})}getManifest(){return this._dotLottieLoader.manifest}resize(){if(!this._lottie||["loading"].includes(this._currentState)){V("resize() Can't use whilst loading.");return}this._lottie.resize()}stop(){if(!this._lottie||["loading"].includes(this._currentState)){V("stop() Can't use whilst loading.");return}this.clearCountTimer(),this._counter=0,this._setPlayerState(()=>({direction:this._getOption("direction")})),this._lottie.stop(),this.setCurrentState("stopped")}pause(){if(!this._lottie||["loading"].includes(this._currentState)){V("pause() Can't use whilst loading.");return}this.clearCountTimer(),this._lottie.pause(),this.setCurrentState("paused")}freeze(){if(!this._lottie||["loading"].includes(this._currentState)){V("freeze() Can't use whilst loading.");return}this.currentState!=="frozen"&&(this._stateBeforeFreeze=this.currentState),this._lottie.pause(),this.setCurrentState("frozen")}unfreeze(){if(!this._lottie||["loading"].includes(this._currentState)){V("unfreeze() Can't use whilst loading.");return}this._stateBeforeFreeze==="playing"?this.play():this.pause()}destroy(){var e,t;(e=this._container)!=null&&e.__lottie&&(this._container.__lottie.destroy(),this._container.__lottie=null),this._audios.length&&(this._audios.forEach(n=>{n.unload()}),this._audios=[]),this.clearCountTimer(),typeof document<"u"&&document.removeEventListener("visibilitychange",()=>this._onVisibilityChange()),this._counter=0,(t=this._lottie)==null||t.destroy(),this._lottie=void 0}getAnimationInstance(){return this._lottie}static getLottieWebVersion(){return`${og.dependencies["lottie-web"]}`}addEventListener(e,t){var n,r,o;this._listeners.has(e)||this._listeners.set(e,new Set),(n=this._listeners.get(e))==null||n.add(t);try{e==="complete"?(r=this._container)==null||r.addEventListener(e,t):(o=this._lottie)==null||o.addEventListener(e,t)}catch(i){It(`addEventListener ${i}`)}}getState(){var e,t,n,r,o,i,s;return{autoplay:(t=(e=this._lottie)==null?void 0:e.autoplay)!=null?t:!1,currentState:this._currentState,frame:this._frame,visibilityPercentage:this._visibilityPercentage,seeker:this._seeker,direction:(r=(n=this._lottie)==null?void 0:n.playDirection)!=null?r:1,hover:this._hover,loop:this._loop||!1,playMode:this._mode,speed:(i=(o=this._lottie)==null?void 0:o.playSpeed)!=null?i:1,background:this._background,intermission:this._intermission,defaultTheme:this._defaultTheme,currentAnimationId:this._currentAnimationId,activeStateId:(s=this._activeStateId)!=null?s:""}}_notify(){this.state.setState(this.getState())}get totalFrames(){var e;return((e=this._lottie)==null?void 0:e.totalFrames)||0}get direction(){return this._lottie?this._lottie.playDirection:1}setDirection(e){this._requireValidDirection(e),this._setPlayerState(()=>({direction:e})),this._userPlaybackOptions.direction=e}get speed(){var e;return((e=this._lottie)==null?void 0:e.playSpeed)||1}setSpeed(e){this._requireValidSpeed(e),this._setPlayerState(()=>({speed:e})),this._userPlaybackOptions.speed=e}get autoplay(){var e,t;return(t=(e=this._lottie)==null?void 0:e.autoplay)!=null?t:!1}setAutoplay(e){if(this._requireValidAutoplay(e),!this._lottie||["loading"].includes(this._currentState)){V("setAutoplay() Can't use whilst loading.");return}this._setPlayerState(()=>({autoplay:e})),this._userPlaybackOptions.autoplay=e}toggleAutoplay(){if(!this._lottie||["loading"].includes(this._currentState)){V("toggleAutoplay() Can't use whilst loading.");return}this.setAutoplay(!this._lottie.autoplay)}get defaultTheme(){return this._defaultTheme}setDefaultTheme(e){this._setPlayerState(()=>({defaultTheme:e})),this._userPlaybackOptions.defaultTheme=e,this._animation&&this.render()}get loop(){return this._loop}setLoop(e){this._requireValidLoop(e),this._setPlayerState(()=>({loop:e})),this._userPlaybackOptions.loop=e}toggleLoop(){if(!this._lottie||["loading"].includes(this._currentState)){V("toggleLoop() Can't use whilst loading.");return}this.setLoop(!this._loop)}get background(){return this._background}setBackground(e){this._requireValidBackground(e),this._background=e,this._container&&(this._container.style.backgroundColor=e)}get _frame(){return this._lottie?this.currentState==="completed"?this.direction===-1?0:this._lottie.totalFrames:this._lottie.currentFrame:0}get _seeker(){return this._lottie?this._frame/this._lottie.totalFrames*100:0}async revertToManifestValues(e){var t;let n;!Array.isArray(e)||e.length===0?n=["autoplay","defaultTheme","direction","hover","intermission","loop","playMode","speed","activeAnimationId"]:n=e;let r=!1;if(n.includes("activeAnimationId")){let o=(t=this._dotLottieLoader.manifest)==null?void 0:t.activeAnimationId,i=this._getAnimationByIdOrIndex(o||0);this._activeAnimationId=o,await this._setCurrentAnimation(i.id),r=!0}n.forEach(o=>{switch(o){case"autoplay":delete this._userPlaybackOptions.autoplay,this.setAutoplay(this._getOption("autoplay"));break;case"defaultTheme":delete this._userPlaybackOptions.defaultTheme,this.setDefaultTheme(this._getOption("defaultTheme"));break;case"direction":delete this._userPlaybackOptions.direction,this.setDirection(this._getOption("direction"));break;case"hover":delete this._userPlaybackOptions.hover,this.setHover(this._getOption("hover"));break;case"intermission":delete this._userPlaybackOptions.intermission,this.setIntermission(this._getOption("intermission"));break;case"loop":delete this._userPlaybackOptions.loop,this.setLoop(this._getOption("loop"));break;case"playMode":delete this._userPlaybackOptions.playMode,this.setMode(this._getOption("playMode")),this.setDirection(this._getOption("direction"));break;case"speed":delete this._userPlaybackOptions.speed,this.setSpeed(this._getOption("speed"));break}}),r&&this.render()}removeEventListener(e,t){var n,r,o;try{e==="complete"?(n=this._container)==null||n.removeEventListener(e,t):(r=this._lottie)==null||r.removeEventListener(e,t),(o=this._listeners.get(e))==null||o.delete(t)}catch(i){It("removeEventListener",i)}}_handleAnimationComplete(){var e;typeof this._loop=="number"&&this.stop();let t=this.direction===-1?0:this.totalFrames;this.goToAndStop(t,!0),this._counter=0,this.clearCountTimer(),this.setCurrentState("completed"),(e=this._container)==null||e.dispatchEvent(new Event("complete"))}addEventListeners(){var e;if(!this._lottie||["loading"].includes(this._currentState)){V("addEventListeners() Can't use whilst loading.");return}this._lottie.addEventListener("enterFrame",()=>{var t;if(!this._lottie){V("enterFrame event : Lottie is undefined.");return}Math.floor(this._lottie.currentFrame)===0&&this.direction===-1&&((t=this._container)==null||t.dispatchEvent(new Event("complete")),this.loop||this.setCurrentState("completed")),this._notify()}),this._lottie.addEventListener("loopComplete",()=>{var t;if(!this._lottie){V("loopComplete event : Lottie is undefined.");return}(t=this._container)==null||t.dispatchEvent(new Event("loopComplete")),this.intermission>0&&this.pause();let n=this._lottie.playDirection;if(typeof this._loop=="number"&&this._loop>0&&(this._counter+=this._mode==="bounce"?.5:1,this._counter>=this._loop)){this._handleAnimationComplete();return}this._mode==="bounce"&&typeof n=="number"&&(n=Number(n)*-1);let r=n===-1?this._lottie.totalFrames-1:0;this.intermission?(this.goToAndPlay(r,!0),this.pause(),this._counterInterval=window.setTimeout(()=>{this._lottie&&(this._setPlayerState(()=>({direction:n})),this.goToAndPlay(r,!0))},this._intermission)):(this._setPlayerState(()=>({direction:n})),this.goToAndPlay(n===-1?this.totalFrames-1:0,!0))}),this._lottie.addEventListener("complete",()=>{if(this._lottie&&this._loop===!1&&this._mode==="bounce"){if(this._counter+=.5,this._counter>=1){this._handleAnimationComplete();return}this._counterInterval=window.setTimeout(()=>{if(!this._lottie)return;let t=this._lottie.playDirection;this._mode==="bounce"&&typeof t=="number"&&(t=Number(t)*-1);let n=t===-1?this.totalFrames-1:0;this._setPlayerState(()=>({direction:t})),this.goToAndPlay(n,!0)},this._intermission)}else this._handleAnimationComplete()});for(let[t,n]of this._listeners)if(t==="complete")for(let r of n)(e=this._container)==null||e.addEventListener(t,r);else for(let r of n)this._lottie.addEventListener(t,r)}async _setCurrentAnimation(e){this._currentState="loading";let t=await this._dotLottieLoader.getAnimation(e);this._currentAnimationId=e,this._animation=t,this._currentState="ready"}async _getAudioFactory(){if(this._animation&&Km(this._animation)){let{DotLottieAudio:e}=await Ne(()=>import("./dotlottie-audio-75C54RUV-f49368a0.js"),["./dotlottie-audio-75C54RUV-f49368a0.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url);return t=>{let n=new e({src:[t]});return this._audios.push(n),n}}return null}async render(e){var t,n,r,o,i,s,a,l,d,u,c,h,p,f,m,g,v,y;if(e!=null&&e.id)await this._setCurrentAnimation(e.id);else if(!this._animation)throw P("no animation selected");let b=(t=ke.loop)!=null?t:!1,x=(n=ke.autoplay)!=null?n:!1,_=(r=ke.playMode)!=null?r:"normal",C=(o=ke.intermission)!=null?o:0,k=(i=ke.hover)!=null?i:!1,E=(s=ke.direction)!=null?s:1,R=(a=ke.speed)!=null?a:1,I=(l=ke.defaultTheme)!=null?l:"";b=(d=e?.loop)!=null?d:this._getOption("loop"),x=(u=e?.autoplay)!=null?u:this._getOption("autoplay"),_=(c=e?.playMode)!=null?c:this._getOption("playMode"),C=(h=e?.intermission)!=null?h:this._getOption("intermission"),k=(p=e?.hover)!=null?p:this._getOption("hover"),E=(f=e?.direction)!=null?f:this._getOption("direction"),R=(m=e?.speed)!=null?m:this._getOption("speed"),I=(g=e?.defaultTheme)!=null?g:this._getOption("defaultTheme");let M={...this._animationConfig,autoplay:k?!1:x,loop:typeof b=="number"?!0:b,renderer:this._worker?"svg":(v=this._animationConfig.renderer)!=null?v:"svg"},[F,W,G]=await Promise.all([this._dotLottieLoader.getTheme(I),this._getLottiePlayerInstance(),this._getAudioFactory()]);if(F&&this._animation?this._animation=await Ym(this._animation,F):this._animation=await this._dotLottieLoader.getAnimation((y=this._currentAnimationId)!=null?y:""),this._activeStateId&&!this._inInteractiveMode){this.enterInteractiveMode(this._activeStateId);return}this.destroy(),this._setPlayerState(()=>({defaultTheme:I,playMode:_,intermission:C,hover:k,loop:b})),G?this._lottie=W.loadAnimation({...M,container:this._container,animationData:this._animation,audioFactory:G}):this._lottie=W.loadAnimation({...M,container:this._container,animationData:this._animation}),typeof this._lottie.resetSegments>"u"&&(this._lottie.resetSegments=()=>{var ee;(ee=this._lottie)==null||ee.playSegments([0,this._lottie.totalFrames],!0)}),this.addEventListeners(),this._container&&(this._container.__lottie=this._lottie),this._setPlayerState(()=>({direction:E,speed:R})),x&&!k&&this.play(),this._updateTestData()}async _getLottiePlayerInstance(){var e;let t=(e=this._animationConfig.renderer)!=null?e:"svg",n;if(this._worker)return t!=="svg"&&V("Worker is only supported with svg renderer. Change or remove renderer prop to get rid of this warning."),n=await Ne(()=>import("./lottie_worker-Q23FJ6ZR-YP5OKMTN-dfcb7a32.js"),["./lottie_worker-Q23FJ6ZR-YP5OKMTN-dfcb7a32.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url),n.default;switch(t){case"svg":{this._light?n=await Ne(()=>import("./lottie_light-KMJEUZFY-TNG7ODX7-34628653.js"),["./lottie_light-KMJEUZFY-TNG7ODX7-34628653.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url):n=await Ne(()=>import("./lottie_svg-MJGYILXD-NRTSROOT-39215154.js"),["./lottie_svg-MJGYILXD-NRTSROOT-39215154.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url);break}case"canvas":{this._light?n=await Ne(()=>import("./lottie_light_canvas-B5UTTNXA-PRI6IBWW-27770225.js"),["./lottie_light_canvas-B5UTTNXA-PRI6IBWW-27770225.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url):n=await Ne(()=>import("./lottie_canvas-CDSUBMCL-MZNYH5VV-0271e567.js"),["./lottie_canvas-CDSUBMCL-MZNYH5VV-0271e567.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url);break}case"html":{this._light?n=await Ne(()=>import("./lottie_light_html-SLCECTRT-SYWXEBDN-a205a9ef.js"),["./lottie_light_html-SLCECTRT-SYWXEBDN-a205a9ef.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url):n=await Ne(()=>import("./lottie_html-X3TYKVQI-L6774NQS-f8fd708e.js"),["./lottie_html-X3TYKVQI-L6774NQS-f8fd708e.js","./chunk-HDDX7F4A-2d4e7f2d.js"],import.meta.url);break}default:throw new Error(`Invalid renderer: ${t}`)}return n.default}_getActiveAnimationId(){var e,t,n,r;let o=this._dotLottieLoader.manifest;return(r=(n=(e=this._activeAnimationId)!=null?e:o?.activeAnimationId)!=null?n:(t=o?.animations[0])==null?void 0:t.id)!=null?r:void 0}async load(e){if(this._currentState==="loading"){V("Loading in progress..");return}try{if(this.setCurrentState("loading"),typeof this._src=="string")if(Zm(this._src)){let n=JSON.parse(this._src);this._dotLottieLoader.loadFromLottieJSON(n)}else{let n=new URL(this._src,window.location.href);await this._dotLottieLoader.loadFromUrl(n.toString())}else if(typeof this._src=="object"&&ir(this._src))this._dotLottieLoader.loadFromLottieJSON(this._src);else throw P("Invalid src provided");if(!this._dotLottieLoader.manifest)throw P("No manifest found");let t=this._getActiveAnimationId();if(!t)throw P("No active animation found");await this._setCurrentAnimation(t),await this.render(e)}catch(t){this.setCurrentState("error"),t instanceof Error&&It(`Error loading animation: ${t.message}`)}}setErrorState(e){this.setCurrentState("error"),It(e)}_requireValidDirection(e){if(e!==-1&&e!==1)throw P("Direction can only be -1 (backwards) or 1 (forwards)")}_requireValidIntermission(e){if(e<0||!Number.isInteger(e))throw P("intermission must be a positive number")}_requireValidLoop(e){if(typeof e=="number"&&(!Number.isInteger(e)||e<0))throw P("loop must be a positive number or boolean")}_requireValidSpeed(e){if(typeof e!="number")throw P("speed must be a number")}_requireValidBackground(e){if(typeof e!="string")throw P("background must be a string")}_requireValidAutoplay(e){if(typeof e!="boolean")throw P("autoplay must be a boolean")}_requireValidPlaybackOptions(e){e.direction&&this._requireValidDirection(e.direction),e.intermission&&this._requireValidIntermission(e.intermission),e.loop&&this._requireValidLoop(e.loop),e.speed&&this._requireValidSpeed(e.speed)}},ig=Object.defineProperty,sg=Object.getOwnPropertyDescriptor,re=(e,t,n,r)=>{for(var o=r>1?void 0:r?sg(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=(r?s(t,n,o):s(o))||o);return r&&o&&ig(t,n,o),o},ag=(e,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},lg=(e,t,n)=>{t.constructor.createProperty(n,e)};function le(e){return(t,n)=>n!==void 0?lg(e,t,n):ag(e,t)}function dg(e){return le({...e,state:!0})}var ug=({finisher:e,descriptor:t})=>(n,r)=>{var o;if(r===void 0){let i=(o=n.originalKey)!==null&&o!==void 0?o:n.key,s=t!=null?{kind:"method",placement:"prototype",key:i,descriptor:t(n.key)}:{...n,key:i};return e!=null&&(s.finisher=function(a){e(a,i)}),s}{let i=n.constructor;t!==void 0&&Object.defineProperty(n,r,t(r)),e?.(i,r)}};function cg(e,t){return ug({descriptor:n=>{let r={get(){var o,i;return(i=(o=this.renderRoot)===null||o===void 0?void 0:o.querySelector(e))!==null&&i!==void 0?i:null},enumerable:!0,configurable:!0};if(t){let o=typeof n=="symbol"?Symbol():"__"+n;r.get=function(){var i,s;return this[o]===void 0&&(this[o]=(s=(i=this.renderRoot)===null||i===void 0?void 0:i.querySelector(e))!==null&&s!==void 0?s:null),this[o]}}return r}})}var Br;((Br=window.HTMLSlotElement)===null||Br===void 0?void 0:Br.prototype.assignedElements)!=null;var hg={name:"@dotlottie/player-component",version:"2.7.2",description:"dotLottie animation player web component.",repository:"https://github.com/dotlottie/player-component.git",homepage:"https://dotlottie.com/players",bugs:"https://github.com/dotlottie/player-component/issues",author:"Jawish Hameed <jawish@lottiefiles.com>",license:"MIT",main:"dist/dotlottie-player.js",module:"dist/dotlottie-player.mjs",types:"dist/dotlottie-player.d.ts",files:["dist"],keywords:["dotlottie","animation","web component","component","lit-element","player"],scripts:{build:"tsup","cypress:open":"cypress open --component",dev:"tsup --watch",lint:"eslint .","lint:fix":"eslint --fix",test:"cypress run --component","type-check":"tsc --noEmit"},dependencies:{"@dotlottie/common":"workspace:*",lit:"^2.7.5"},devDependencies:{"@vitejs/plugin-legacy":"^4.1.0","axe-core":"^4.7.2",cypress:"^12.11.0","cypress-axe":"^1.4.0","cypress-ct-lit":"^0.3.2","lottie-web":"^5.12.2",terser:"^5.19.0",tsup:"^7.2.0",typescript:"^4.7.4",vite:"^4.3.9"},publishConfig:{access:"public"},browserslist:["> 3%"]},ys="dotlottie-player",te=class extends pn{defaultTheme="";container;playMode=$l.Normal;autoplay=!1;background="transparent";controls=!1;direction=1;hover=!1;loop;renderer="svg";speed=1;src;intermission=0;activeAnimationId=null;light=!1;worker=!1;activeStateId;_seeker=0;_dotLottieCommonPlayer;_io;_loop;_renderer="svg";_unsubscribeListeners;_hasMultipleAnimations=!1;_hasMultipleThemes=!1;_hasMultipleStates=!1;_popoverIsOpen=!1;_animationsTabIsOpen=!1;_statesTabIsOpen=!1;_styleTabIsOpen=!1;_themesForCurrentAnimation=[];_statesForCurrentAnimation=[];_parseLoop(e){let t=parseInt(e,10);return Number.isInteger(t)&&t>0?(this._loop=t,t):typeof e=="string"&&["true","false"].includes(e)?(this._loop=e==="true",this._loop):(V("loop must be a positive integer or a boolean"),!1)}_handleSeekChange(e){let t=e.currentTarget;try{let n=parseInt(t.value,10);if(!this._dotLottieCommonPlayer)return;let r=n/100*this._dotLottieCommonPlayer.totalFrames;this.seek(r)}catch{throw P("Error while seeking animation")}}_initListeners(){let e=this._dotLottieCommonPlayer;if(e===void 0){V("player not initialized - cannot add event listeners","dotlottie-player-component");return}this._unsubscribeListeners=e.state.subscribe((t,n)=>{this._seeker=t.seeker,this.requestUpdate(),n.currentState!==t.currentState&&this.dispatchEvent(new CustomEvent(t.currentState)),this.dispatchEvent(new CustomEvent(Ke.Frame,{detail:{frame:t.frame,seeker:t.seeker}})),this.dispatchEvent(new CustomEvent(Ke.VisibilityChange,{detail:{visibilityPercentage:t.visibilityPercentage}}))}),e.addEventListener("complete",()=>{this.dispatchEvent(new CustomEvent(Ke.Complete))}),e.addEventListener("loopComplete",()=>{this.dispatchEvent(new CustomEvent(Ke.LoopComplete))}),e.addEventListener("DOMLoaded",()=>{let t=this.getManifest();t&&t.themes&&(this._themesForCurrentAnimation=t.themes.filter(n=>n.animations.includes(this.getCurrentAnimationId()||""))),t&&t.states&&(this._hasMultipleStates=t.states.length>0,this._statesForCurrentAnimation=[],t.states.forEach(n=>{this._statesForCurrentAnimation.push(n)})),this.dispatchEvent(new CustomEvent(Ke.Ready))}),e.addEventListener("data_ready",()=>{this.dispatchEvent(new CustomEvent(Ke.DataReady))}),e.addEventListener("data_failed",()=>{this.dispatchEvent(new CustomEvent(Ke.DataFail))}),window&&window.addEventListener("click",t=>this._clickOutListener(t))}async load(e,t,n){if(!this.shadowRoot)return;this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.destroy(),this._dotLottieCommonPlayer=new gs(e,this.container,{rendererSettings:t??{scaleMode:"noScale",clearCanvas:!0,progressiveLoad:!0,hideOnTransparent:!0},hover:this.hasAttribute("hover")?this.hover:void 0,renderer:this.hasAttribute("renderer")?this._renderer:void 0,loop:this.hasAttribute("loop")?this._loop:void 0,direction:this.hasAttribute("direction")?this.direction===1?1:-1:void 0,speed:this.hasAttribute("speed")?this.speed:void 0,intermission:this.hasAttribute("intermission")?Number(this.intermission):void 0,playMode:this.hasAttribute("playMode")?this.playMode:void 0,autoplay:this.hasAttribute("autoplay")?this.autoplay:void 0,activeAnimationId:this.hasAttribute("activeAnimationId")?this.activeAnimationId:void 0,defaultTheme:this.hasAttribute("defaultTheme")?this.defaultTheme:void 0,light:this.light,worker:this.worker,activeStateId:this.hasAttribute("activeStateId")?this.activeStateId:void 0}),await this._dotLottieCommonPlayer.load(n);let r=this.getManifest();this._hasMultipleAnimations=this.animationCount()>1,r&&(r.themes&&(this._themesForCurrentAnimation=r.themes.filter(o=>o.animations.includes(this.getCurrentAnimationId()||"")),this._hasMultipleThemes=r.themes.length>0),r.states&&(this._hasMultipleStates=r.states.length>0,this._statesForCurrentAnimation=[],r.states.forEach(o=>{this._statesForCurrentAnimation.push(o)}))),this._initListeners()}getCurrentAnimationId(){var e;return(e=this._dotLottieCommonPlayer)==null?void 0:e.currentAnimationId}animationCount(){var e;return this._dotLottieCommonPlayer&&((e=this._dotLottieCommonPlayer.getManifest())==null?void 0:e.animations.length)||0}animations(){if(!this._dotLottieCommonPlayer)return[];let e=this._dotLottieCommonPlayer.getManifest();return e?.animations.map(t=>t.id)||[]}currentAnimation(){return!this._dotLottieCommonPlayer||!this._dotLottieCommonPlayer.currentAnimationId?"":this._dotLottieCommonPlayer.currentAnimationId}getState(){return this._dotLottieCommonPlayer?this._dotLottieCommonPlayer.getState():Il}getManifest(){var e;return(e=this._dotLottieCommonPlayer)==null?void 0:e.getManifest()}getLottie(){var e;return(e=this._dotLottieCommonPlayer)==null?void 0:e.getAnimationInstance()}getVersions(){return{lottieWebVersion:gs.getLottieWebVersion(),dotLottiePlayerVersion:`${hg.version}`}}previous(e){var t;(t=this._dotLottieCommonPlayer)==null||t.previous(e)}next(e){var t;(t=this._dotLottieCommonPlayer)==null||t.next(e)}reset(){var e;(e=this._dotLottieCommonPlayer)==null||e.reset()}play(e,t){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.play(e,t)}pause(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.pause()}stop(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.stop()}playOnShow(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.playOnShow(e)}stopPlayOnShow(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.stopPlayOnShow()}playOnScroll(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.playOnScroll(e)}stopPlayOnScroll(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.stopPlayOnScroll()}seek(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.seek(e)}snapshot(e=!0){if(!this.shadowRoot)return"";let t=this.shadowRoot.querySelector(".animation svg"),n=new XMLSerializer().serializeToString(t);if(e){let r=document.createElement("a");r.href=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`,r.download=`download_${this._seeker}.svg`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}return n}setTheme(e){var t;(t=this._dotLottieCommonPlayer)==null||t.setDefaultTheme(e)}themes(){var e;if(!this._dotLottieCommonPlayer)return[];let t=this._dotLottieCommonPlayer.getManifest();return((e=t?.themes)==null?void 0:e.map(n=>n.id))||[]}getDefaultTheme(){return this._dotLottieCommonPlayer?this._dotLottieCommonPlayer.defaultTheme:""}getActiveStateMachine(){return this._dotLottieCommonPlayer?this._dotLottieCommonPlayer.activeStateId:""}_freeze(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.freeze()}setSpeed(e=1){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.setSpeed(e)}setDirection(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.setDirection(e)}setLooping(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.setLoop(e)}isLooping(){return this._dotLottieCommonPlayer?this._dotLottieCommonPlayer.loop:!1}togglePlay(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.togglePlay()}toggleLooping(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.toggleLoop()}setPlayMode(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.setMode(e)}enterInteractiveMode(e){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.enterInteractiveMode(e)}exitInteractiveMode(){this._dotLottieCommonPlayer&&this._dotLottieCommonPlayer.exitInteractiveMode()}revertToManifestValues(e){var t;(t=this._dotLottieCommonPlayer)==null||t.revertToManifestValues(e)}static get styles(){return Of}async firstUpdated(){var e;this.container=(e=this.shadowRoot)==null?void 0:e.querySelector("#animation"),"IntersectionObserver"in window&&(this._io=new IntersectionObserver(t=>{var n,r;t[0]!==void 0&&t[0].isIntersecting?((n=this._dotLottieCommonPlayer)==null?void 0:n.currentState)===Rt.Frozen&&this.play():((r=this._dotLottieCommonPlayer)==null?void 0:r.currentState)===Rt.Playing&&this._freeze()}),this._io.observe(this.container)),this.loop?this._parseLoop(this.loop):this.hasAttribute("loop")&&this._parseLoop("true"),this.renderer==="svg"?this._renderer="svg":this.renderer==="canvas"?this._renderer="canvas":this.renderer==="html"&&(this._renderer="html"),this.src&&await this.load(this.src)}disconnectedCallback(){var e,t;this._io&&(this._io.disconnect(),this._io=void 0),(e=this._dotLottieCommonPlayer)==null||e.destroy(),(t=this._unsubscribeListeners)==null||t.call(this),window&&window.removeEventListener("click",n=>this._clickOutListener(n))}_clickOutListener(e){!e.composedPath().some(t=>t instanceof HTMLElement?t.classList.contains("popover")||t.id==="lottie-animation-options":!1)&&this._popoverIsOpen&&(this._popoverIsOpen=!1,this.requestUpdate())}renderControls(){var e,t,n,r,o;let i=((e=this._dotLottieCommonPlayer)==null?void 0:e.currentState)===Rt.Playing,s=((t=this._dotLottieCommonPlayer)==null?void 0:t.currentState)===Rt.Paused;return D`
      <div id="lottie-controls" aria-label="lottie-animation-controls" class="toolbar">
        ${this._hasMultipleAnimations?D`
              <button @click=${()=>this.previous()} aria-label="Previous animation" class="btn-spacing-left">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M1.69214 13.5C1.69214 13.7761 1.916 14 2.19214 14C2.46828 14 2.69214 13.7761 2.69214 13.5L2.69214 2.5C2.69214 2.22386 2.46828 2 2.19214 2C1.916 2 1.69214 2.22386 1.69214 2.5V13.5ZM12.5192 13.7828C13.1859 14.174 14.0254 13.6933 14.0254 12.9204L14.0254 3.0799C14.0254 2.30692 13.1859 1.8262 12.5192 2.21747L4.13612 7.13769C3.47769 7.52414 3.47769 8.4761 4.13612 8.86255L12.5192 13.7828Z"
                    fill="#20272C"
                  />
                </svg>
              </button>
            `:D``}
        <button
          id="lottie-play-button"
          @click=${()=>{this.togglePlay()}}
          class=${i||s?`active ${this._hasMultipleAnimations?"btn-spacing-center":"btn-spacing-right"}`:`${this._hasMultipleAnimations?"btn-spacing-center":"btn-spacing-right"}`}
          aria-label="play / pause animation"
        >
          ${i?D`
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M3.99996 2C3.26358 2 2.66663 2.59695 2.66663 3.33333V12.6667C2.66663 13.403 3.26358 14 3.99996 14H5.33329C6.06967 14 6.66663 13.403 6.66663 12.6667V3.33333C6.66663 2.59695 6.06967 2 5.33329 2H3.99996Z"
                    fill="#20272C"
                  />
                  <path
                    d="M10.6666 2C9.93025 2 9.33329 2.59695 9.33329 3.33333V12.6667C9.33329 13.403 9.93025 14 10.6666 14H12C12.7363 14 13.3333 13.403 13.3333 12.6667V3.33333C13.3333 2.59695 12.7363 2 12 2H10.6666Z"
                    fill="#20272C"
                  />
                </svg>
              `:D`
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M3.33337 3.46787C3.33337 2.52312 4.35948 1.93558 5.17426 2.41379L12.8961 6.94592C13.7009 7.41824 13.7009 8.58176 12.8961 9.05408L5.17426 13.5862C4.35948 14.0644 3.33337 13.4769 3.33337 12.5321V3.46787Z"
                    fill="#20272C"
                  />
                </svg>
              `}
        </button>
        ${this._hasMultipleAnimations?D`
              <button @click=${()=>this.next()} aria-label="Next animation" class="btn-spacing-right">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M14.3336 2.5C14.3336 2.22386 14.1097 2 13.8336 2C13.5574 2 13.3336 2.22386 13.3336 2.5V13.5C13.3336 13.7761 13.5574 14 13.8336 14C14.1097 14 14.3336 13.7761 14.3336 13.5V2.5ZM3.50618 2.21722C2.83954 1.82595 2 2.30667 2 3.07965V12.9201C2 13.6931 2.83954 14.1738 3.50618 13.7825L11.8893 8.86231C12.5477 8.47586 12.5477 7.52389 11.8893 7.13745L3.50618 2.21722Z"
                    fill="#20272C"
                  />
                </svg>
              </button>
            `:D``}
        <input
          id="lottie-seeker-input"
          class="seeker ${((n=this._dotLottieCommonPlayer)==null?void 0:n.direction)===-1?"to-left":""}"
          type="range"
          min="0"
          step="1"
          max="100"
          .value=${this._seeker}
          @input=${a=>this._handleSeekChange(a)}
          @mousedown=${()=>{this._freeze()}}
          @mouseup=${()=>{var a;(a=this._dotLottieCommonPlayer)==null||a.unfreeze()}}
          aria-valuemin="1"
          aria-valuemax="100"
          role="slider"
          aria-valuenow=${this._seeker}
          aria-label="lottie-seek-input"
          style=${`--seeker: ${this._seeker}`}
        />
        <button
          id="lottie-loop-toggle"
          @click=${()=>this.toggleLooping()}
          class=${(r=this._dotLottieCommonPlayer)!=null&&r.loop?"active btn-spacing-left":"btn-spacing-left"}
          aria-label="loop-toggle"
        >
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M10.8654 2.31319C11.0607 2.11793 11.3772 2.11793 11.5725 2.31319L13.4581 4.19881C13.6534 4.39407 13.6534 4.71066 13.4581 4.90592L11.5725 6.79154C11.3772 6.9868 11.0607 6.9868 10.8654 6.79154C10.6701 6.59628 10.6701 6.27969 10.8654 6.08443L11.6162 5.33362H4V6.66695C4 7.03514 3.70152 7.33362 3.33333 7.33362C2.96514 7.33362 2.66666 7.03514 2.66666 6.66695L2.66666 4.66695C2.66666 4.29876 2.96514 4.00028 3.33333 4.00028H11.8454L10.8654 3.0203C10.6701 2.82504 10.6701 2.50846 10.8654 2.31319Z"
              fill="currentColor"
            />
            <path
              d="M12.4375 11.9999C12.8057 11.9999 13.1042 11.7014 13.1042 11.3332V9.33321C13.1042 8.96502 12.8057 8.66655 12.4375 8.66655C12.0693 8.66655 11.7708 8.96502 11.7708 9.33321V10.6665H4.15462L4.90543 9.91573C5.10069 9.72047 5.10069 9.40389 4.90543 9.20862C4.71017 9.01336 4.39359 9.01336 4.19832 9.20862L2.31271 11.0942C2.11744 11.2895 2.11744 11.6061 2.31271 11.8013L4.19832 13.687C4.39359 13.8822 4.71017 13.8822 4.90543 13.687C5.10069 13.4917 5.10069 13.1751 4.90543 12.9799L3.92545 11.9999H12.4375Z"
              fill="currentColor"
            />
          </svg>
        </button>
        ${this._hasMultipleAnimations||this._hasMultipleThemes||this._hasMultipleStates?D`
              <button
                id="lottie-animation-options"
                @click=${()=>{this._popoverIsOpen=!this._popoverIsOpen,this.requestUpdate()}}
                aria-label="options"
                class="btn-spacing-right"
                style=${`background-color: ${this._popoverIsOpen?"var(--lottie-player-toolbar-icon-hover-color)":""}`}
              >
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.33337 11.6666C7.78109 11.6666 7.33337 12.1143 7.33337 12.6666C7.33337 13.2189 7.78109 13.6666 8.33337 13.6666C8.88566 13.6666 9.33337 13.2189 9.33337 12.6666C9.33337 12.1143 8.88566 11.6666 8.33337 11.6666Z"
                    fill="#20272C"
                  />
                  <path
                    d="M7.33337 7.99992C7.33337 7.44763 7.78109 6.99992 8.33337 6.99992C8.88566 6.99992 9.33338 7.44763 9.33338 7.99992C9.33338 8.5522 8.88566 8.99992 8.33337 8.99992C7.78109 8.99992 7.33337 8.5522 7.33337 7.99992Z"
                    fill="#20272C"
                  />
                  <path
                    d="M7.33337 3.33325C7.33337 2.78097 7.78109 2.33325 8.33337 2.33325C8.88566 2.33325 9.33338 2.78097 9.33338 3.33325C9.33338 3.88554 8.88566 4.33325 8.33337 4.33325C7.78109 4.33325 7.33337 3.88554 7.33337 3.33325Z"
                    fill="#20272C"
                  />
                </svg>
              </button>
            `:D``}
      </div>
      ${this._popoverIsOpen?D`
            <div
              id="popover"
              class="popover"
              tabindex="0"
              aria-label="lottie animations themes popover"
              style="min-height: ${this.themes().length>0?"84px":"auto"}"
            >
              ${!this._animationsTabIsOpen&&!this._styleTabIsOpen&&!this._statesTabIsOpen?D`
                    <button
                      class="popover-button"
                      tabindex="0"
                      aria-label="animations"
                      @click=${()=>{this._animationsTabIsOpen=!this._animationsTabIsOpen,this.requestUpdate()}}
                      @keydown=${a=>{(a.code==="Space"||a.code==="Enter")&&(this._animationsTabIsOpen=!this._animationsTabIsOpen,this.requestUpdate())}}
                    >
                      <div class="popover-button-text">Animations</div>
                      <div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M10.4697 17.5303C10.1768 17.2374 10.1768 16.7626 10.4697 16.4697L14.9393 12L10.4697 7.53033C10.1768 7.23744 10.1768 6.76256 10.4697 6.46967C10.7626 6.17678 11.2374 6.17678 11.5303 6.46967L16.5303 11.4697C16.8232 11.7626 16.8232 12.2374 16.5303 12.5303L11.5303 17.5303C11.2374 17.8232 10.7626 17.8232 10.4697 17.5303Z"
                            fill="#4C5863"
                          />
                        </svg>
                      </div>
                    </button>
                  `:D``}
              ${this._hasMultipleThemes&&!this._styleTabIsOpen&&!this._animationsTabIsOpen&&!this._statesTabIsOpen?D` <button
                    class="popover-button"
                    aria-label="Themes"
                    @click=${()=>{this._styleTabIsOpen=!this._styleTabIsOpen,this.requestUpdate()}}
                    @keydown=${a=>{(a.code==="Space"||a.code==="Enter")&&(this._styleTabIsOpen=!this._styleTabIsOpen,this.requestUpdate())}}
                  >
                    <div class="popover-button-text">Themes</div>
                    <div>
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M10.4697 17.5303C10.1768 17.2374 10.1768 16.7626 10.4697 16.4697L14.9393 12L10.4697 7.53033C10.1768 7.23744 10.1768 6.76256 10.4697 6.46967C10.7626 6.17678 11.2374 6.17678 11.5303 6.46967L16.5303 11.4697C16.8232 11.7626 16.8232 12.2374 16.5303 12.5303L11.5303 17.5303C11.2374 17.8232 10.7626 17.8232 10.4697 17.5303Z"
                          fill="#4C5863"
                        />
                      </svg>
                    </div>
                  </button>`:""}
              ${this._hasMultipleStates&&!this._styleTabIsOpen&&!this._animationsTabIsOpen&&!this._statesTabIsOpen?D` <button
                    class="popover-button"
                    aria-label="States"
                    @click=${()=>{this._statesTabIsOpen=!this._statesTabIsOpen,this.requestUpdate()}}
                    @keydown=${a=>{(a.code==="Space"||a.code==="Enter")&&(this._statesTabIsOpen=!this._statesTabIsOpen,this.requestUpdate())}}
                  >
                    <div class="popover-button-text">States</div>
                    <div>
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M10.4697 17.5303C10.1768 17.2374 10.1768 16.7626 10.4697 16.4697L14.9393 12L10.4697 7.53033C10.1768 7.23744 10.1768 6.76256 10.4697 6.46967C10.7626 6.17678 11.2374 6.17678 11.5303 6.46967L16.5303 11.4697C16.8232 11.7626 16.8232 12.2374 16.5303 12.5303L11.5303 17.5303C11.2374 17.8232 10.7626 17.8232 10.4697 17.5303Z"
                          fill="#4C5863"
                        />
                      </svg>
                    </div>
                  </button>`:""}
              ${this._animationsTabIsOpen?D`<button
                      class="option-title-button"
                      aria-label="Back to main popover menu"
                      @click=${()=>{this._animationsTabIsOpen=!this._animationsTabIsOpen,this.requestUpdate()}}
                    >
                      <div class="option-title-chevron">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M13.5303 6.46967C13.8232 6.76256 13.8232 7.23744 13.5303 7.53033L9.06066 12L13.5303 16.4697C13.8232 16.7626 13.8232 17.2374 13.5303 17.5303C13.2374 17.8232 12.7626 17.8232 12.4697 17.5303L7.46967 12.5303C7.17678 12.2374 7.17678 11.7626 7.46967 11.4697L12.4697 6.46967C12.7626 6.17678 13.2374 6.17678 13.5303 6.46967Z"
                            fill="#20272C"
                          />
                        </svg>
                      </div>
                      <div>Animations</div>
                    </button>
                    <div class="option-title-separator"></div>
                    <div class="option-row">
                      <ul>
                        ${this.animations().map(a=>D`
                            <li>
                              <button
                                class="option-button"
                                aria-label=${`${a}`}
                                @click=${()=>{this._animationsTabIsOpen=!this._animationsTabIsOpen,this._popoverIsOpen=!this._popoverIsOpen,this.play(a),this.requestUpdate()}}
                                @keydown=${l=>{(l.code==="Space"||l.code==="Enter")&&(this._animationsTabIsOpen=!this._animationsTabIsOpen,this._popoverIsOpen=!this._popoverIsOpen,this.play(a),this.requestUpdate())}}
                              >
                                <div class="option-tick">
                                  ${this.currentAnimation()===a?D`
                                        <svg
                                          width="24"
                                          height="24"
                                          viewBox="0 0 24 24"
                                          fill="none"
                                          xmlns="http://www.w3.org/2000/svg"
                                        >
                                          <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M20.5281 5.9372C20.821 6.23009 20.821 6.70497 20.5281 6.99786L9.46297 18.063C9.32168 18.2043 9.12985 18.2833 8.93004 18.2826C8.73023 18.2819 8.53895 18.2015 8.39864 18.0593L3.46795 13.0596C3.1771 12.7647 3.1804 12.2898 3.47532 11.999C3.77024 11.7081 4.2451 11.7114 4.53595 12.0063L8.93634 16.4683L19.4675 5.9372C19.7604 5.64431 20.2352 5.64431 20.5281 5.9372Z"
                                            fill="#20272C"
                                          />
                                        </svg>
                                      `:D`<div style="width: 24px; height: 24px"></div>`}
                                </div>
                                <div>${a}</div>
                              </button>
                            </li>
                          `)}
                      </ul>
                    </div> `:D``}
              ${this._styleTabIsOpen?D`<div class="option-title-themes-row">
                      <button
                        class="option-title-button themes"
                        aria-label="Back to main popover menu"
                        @click=${()=>{this._styleTabIsOpen=!this._styleTabIsOpen,this.requestUpdate()}}
                      >
                        <div class="option-title-chevron">
                          <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              fill-rule="evenodd"
                              clip-rule="evenodd"
                              d="M13.5303 6.46967C13.8232 6.76256 13.8232 7.23744 13.5303 7.53033L9.06066 12L13.5303 16.4697C13.8232 16.7626 13.8232 17.2374 13.5303 17.5303C13.2374 17.8232 12.7626 17.8232 12.4697 17.5303L7.46967 12.5303C7.17678 12.2374 7.17678 11.7626 7.46967 11.4697L12.4697 6.46967C12.7626 6.17678 13.2374 6.17678 13.5303 6.46967Z"
                              fill="#20272C"
                            />
                          </svg>
                        </div>
                        <div class="option-title-text">Themes</div>
                        ${((o=this._dotLottieCommonPlayer)==null?void 0:o.defaultTheme)===""?D``:D`
                              <button
                                class="reset-btn"
                                @click=${()=>{this.setTheme(""),this.requestUpdate()}}
                              >
                                Reset
                              </button>
                            `}
                      </button>
                    </div>
                    <div class="option-title-separator"></div>
                    <div class="option-row">
                      <ul>
                        ${this._themesForCurrentAnimation.map(a=>D`
                            <li>
                              <button
                                class="option-button"
                                aria-label="${a.id}"
                                @click=${()=>{this.setTheme(a.id)}}
                                @keydown=${l=>{(l.code==="Space"||l.code==="Enter")&&this.setTheme(a.id)}}
                              >
                                <div class="option-tick">
                                  ${this.getDefaultTheme()===a.id?D`
                                        <svg
                                          width="24"
                                          height="24"
                                          viewBox="0 0 24 24"
                                          fill="none"
                                          xmlns="http://www.w3.org/2000/svg"
                                        >
                                          <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M20.5281 5.9372C20.821 6.23009 20.821 6.70497 20.5281 6.99786L9.46297 18.063C9.32168 18.2043 9.12985 18.2833 8.93004 18.2826C8.73023 18.2819 8.53895 18.2015 8.39864 18.0593L3.46795 13.0596C3.1771 12.7647 3.1804 12.2898 3.47532 11.999C3.77024 11.7081 4.2451 11.7114 4.53595 12.0063L8.93634 16.4683L19.4675 5.9372C19.7604 5.64431 20.2352 5.64431 20.5281 5.9372Z"
                                            fill="#20272C"
                                          />
                                        </svg>
                                      `:D`<div style="width: 24px; height: 24px"></div>`}
                                </div>
                                <div>${a.id}</div>
                              </button>
                            </li>
                          `)}
                      </ul>
                    </div>`:D``}
              ${this._statesTabIsOpen?D`<div class="option-title-themes-row">
                      <button
                        class="option-title-button themes"
                        aria-label="Back to main popover menu"
                        @click=${()=>{this._statesTabIsOpen=!this._statesTabIsOpen,this.requestUpdate()}}
                      >
                        <div class="option-title-chevron">
                          <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              fill-rule="evenodd"
                              clip-rule="evenodd"
                              d="M13.5303 6.46967C13.8232 6.76256 13.8232 7.23744 13.5303 7.53033L9.06066 12L13.5303 16.4697C13.8232 16.7626 13.8232 17.2374 13.5303 17.5303C13.2374 17.8232 12.7626 17.8232 12.4697 17.5303L7.46967 12.5303C7.17678 12.2374 7.17678 11.7626 7.46967 11.4697L12.4697 6.46967C12.7626 6.17678 13.2374 6.17678 13.5303 6.46967Z"
                              fill="#20272C"
                            />
                          </svg>
                        </div>
                        <div class="option-title-text">States</div>
                        <button
                          class="reset-btn"
                          @click=${()=>{this.exitInteractiveMode(),this.requestUpdate()}}
                        >
                          Reset
                        </button>
                      </button>
                    </div>
                    <div class="option-title-separator"></div>
                    <div class="option-row">
                      <ul>
                        ${this._statesForCurrentAnimation.map(a=>D`
                            <li>
                              <button
                                class="option-button"
                                aria-label="${a}"
                                @click=${()=>{this.enterInteractiveMode(a)}}
                                @keydown=${l=>{(l.code==="Space"||l.code==="Enter")&&this.enterInteractiveMode(a)}}
                              >
                                <div class="option-tick">
                                  ${this.getActiveStateMachine()===a?D`
                                        <svg
                                          width="24"
                                          height="24"
                                          viewBox="0 0 24 24"
                                          fill="none"
                                          xmlns="http://www.w3.org/2000/svg"
                                        >
                                          <path
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                            d="M20.5281 5.9372C20.821 6.23009 20.821 6.70497 20.5281 6.99786L9.46297 18.063C9.32168 18.2043 9.12985 18.2833 8.93004 18.2826C8.73023 18.2819 8.53895 18.2015 8.39864 18.0593L3.46795 13.0596C3.1771 12.7647 3.1804 12.2898 3.47532 11.999C3.77024 11.7081 4.2451 11.7114 4.53595 12.0063L8.93634 16.4683L19.4675 5.9372C19.7604 5.64431 20.2352 5.64431 20.5281 5.9372Z"
                                            fill="#20272C"
                                          />
                                        </svg>
                                      `:D`<div style="width: 24px; height: 24px"></div>`}
                                </div>
                                <div>${a}</div>
                              </button>
                            </li>
                          `)}
                      </ul>
                    </div>`:D``}
            </div>
          `:D``}
    `}render(){var e;let t=this.controls?"main controls":"main",n=this.controls?"animation controls":"animation";return D`
      <div id="animation-container" class=${t} lang="en" role="img" aria-label="lottie-animation-container">
        <div id="animation" class=${n} style="background:${this.background};">
          ${((e=this._dotLottieCommonPlayer)==null?void 0:e.currentState)===Rt.Error?D` <div class="error">⚠️</div> `:void 0}
        </div>
        ${this.controls?this.renderControls():void 0}
      </div>
    `}};re([le({type:String})],te.prototype,"defaultTheme",2),re([cg("#animation")],te.prototype,"container",2),re([le()],te.prototype,"playMode",2),re([le({type:Boolean})],te.prototype,"autoplay",2),re([le({type:String})],te.prototype,"background",2),re([le({type:Boolean})],te.prototype,"controls",2),re([le({type:Number})],te.prototype,"direction",2),re([le({type:Boolean})],te.prototype,"hover",2),re([le({type:String})],te.prototype,"loop",2),re([le({type:String})],te.prototype,"renderer",2),re([le({type:Number})],te.prototype,"speed",2),re([le({type:String})],te.prototype,"src",2),re([le()],te.prototype,"intermission",2),re([le({type:String})],te.prototype,"activeAnimationId",2),re([le({type:Boolean})],te.prototype,"light",2),re([le({type:Boolean})],te.prototype,"worker",2),re([le({type:String})],te.prototype,"activeStateId",2),re([dg()],te.prototype,"_seeker",2);customElements.get(ys)||customElements.define(ys,te);/*! Bundled license information:

@lit/reactive-element/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/const pg=e=>{const t=N();function n(){if(t.value&&document.body.contains(t.value))return t.value;const h=document.querySelector(e);if(h instanceof te)return t.value=h,h}function r(){requestAnimationFrame(()=>{const h=n();if(h){const p=h.getState(),f=p.seeker===100?0:p.seeker;a(f),h.play()}})}function o(){const h=n();h&&h.reset()}function i(){const h=n();h&&h.pause()}async function s(h){const p=n();p&&await p.load(h)}function a(h){const p=n();p?.getState()?.currentState==="playing"&&p?.pause(),p&&p.seek(`${h}%`)}function l(h){const p=n();p&&p.setSpeed(h)}function d(h){const p=n(),f=h??!1;p&&p.setLooping(f)}function u(h){const p=n();p&&(p.controls=h)}function c(h){const p=n();p&&p.setDirection(h)}return Ut(()=>{n()}),{player:t,getPlayer:n,play:r,reset:o,stop:i,setSrc:s,setProgress:a,setSpeed:l,setLooping:d,setControles:u,setDirection:c}},Ml=A({name:"LottieRenderer",props:{...q},setup(e){const t=j(e),n=S(()=>t.compileObject(e.renderDom.content.lottie)),r=pg(`[data-r="${e.renderDom.renderId}"] dotlottie-player`),{selectingRenderDom:o}=ko(),i=N(),s=S(()=>o.value?.renderId===e.renderDom.renderId);function a(){if(!i.value)return;i.value.innerHTML="";const l=document.createElement("dotlottie-player");n.value?.src&&l.setAttribute("src",n.value.src),n.value?.controls&&l.setAttribute("controls","true"),n.value?.speed&&l.setAttribute("speed",String(n.value?.speed)),l.setAttribute("loop","false"),i.value.appendChild(l)}return ie(s,(l,d)=>{l===!0&&d===!1&&r.play()}),ie([i,()=>n.value?.src,()=>n.value?.speed,()=>n.value?.controls],()=>{a()},{immediate:!0,deep:!0}),{...t,lottieRendererRef:i}},render(){return w("div",{...this.attrs,ref:e=>this.lottieRendererRef=e,style:this.style})}});Ml.__docgenInfo={displayName:"LottieRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/customElement/LottieRenderer.vue"]};const Nl=A({name:"ButtonRenderer",props:{...q},setup(e){return j(e)},render(){return w("button",{disabled:!0,"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",class:["button",this.pseudoClass],style:this.style},this.$slots.default())}});Nl.__docgenInfo={displayName:"ButtonRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/ButtonRenderer.vue"]};const Ll=A({name:"CheckboxRenderer",props:{...q},setup(e){return j(e)},render(){const e=this.renderDom.content?.data;return w("input",{...this.renderDom.studioDom.attrs,class:["checkbox",this.pseudoClass],"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",type:"checkbox",value:e,style:this.style},this.$slots.default())}});Ll.__docgenInfo={displayName:"CheckboxRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/CheckboxRenderer.vue"]};const Rl=A({name:"RadioRenderer",props:{...q},setup(e){return j(e)},render(){const e=this.renderDom.content?.data;return w("label",{class:["file",this.pseudoClass],"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",style:this.style},[w("input",{type:"file",...this.renderDom.studioDom.attrs}),e])}});Rl.__docgenInfo={displayName:"RadioRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/FileRenderer.vue"]};const Dl=A({name:"FormRenderer",props:{...q},setup(e){return j(e)},render(){return w("form",{...this.renderDom.studioDom.attrs,"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",class:["form",this.pseudoClass],style:this.style},this.$slots.default())}});Dl.__docgenInfo={displayName:"FormRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/FormRenderer.vue"]};const Pl=A({name:"InputRenderer",props:{...q},setup(e){return j(e)},computed:{text(){const e=this.renderDom.content.data,t=this.compileTemplate(e);return Zn(t)}},render(){return w("input",{...this.renderDom.studioDom.attrs,class:["input",this.pseudoClass],"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",value:this.text,style:this.style},this.$slots.default())}});Pl.__docgenInfo={displayName:"InputRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/InputRenderer.vue"]};const Ol=A({name:"RadioRenderer",props:{...q},setup(e){return j(e)},render(){const e=this.renderDom.studioDom.content?.data;return w("input",{...this.renderDom.studioDom.attrs,class:["radio",this.pseudoClass],"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",type:"radio",value:e,style:this.style},this.$slots.default())}});Ol.__docgenInfo={displayName:"RadioRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/RadioRenderer.vue"]};const Fl=A({name:"SelectRenderer",props:{...q},setup(e){return j(e)},render(){const e=this.renderDom.content?.options||[];return w("select",{...this.renderDom.studioDom.attrs,class:["select",this.pseudoClass],"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",style:this.style},e.map((t,n)=>w("option",{value:t.value,selected:n===0},t.label)))}});Fl.__docgenInfo={displayName:"SelectRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/SelectRenderer.vue"]};const Ul=A({name:"TextareaRenderer",props:{...q},setup(e){return j(e)},render(){return w("textarea",{...this.renderDom.studioDom.attrs,class:["textarea",this.pseudoClass],"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",style:this.style},this.$slots.default())}});Ul.__docgenInfo={displayName:"TextareaRenderer",exportName:"default",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/form/TextareaRenderer.vue"]};const Hl=A({name:"EmbedIframeRenderer",props:{...q},setup(e){return j(e)},data(){return{removeScript:()=>{}}},computed:{iframe(){const e=this.renderDom.content.data;return this.compileTemplate(e)}},watch:{iframe(){this.updateInnerHtml()}},mounted(){this.updateInnerHtml()},unmounted(){this.removeScript&&this.removeScript()},methods:{async updateInnerHtml(){this.$el.innerHTML=this.iframe,this.removeScript=await Ss(this.$el,String(this.iframe))}},render(){return w("div",{...this.renderDom.studioDom.attrs,style:this.style,class:["frame"],"data-r":this.renderDom.renderId})}});Hl.__docgenInfo={displayName:"EmbedIframeRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/other/EmbedIframeRenderer.vue"]};const zl=A({name:"EmbedSandboxRenderer",props:{...q},setup(e){const t=j(e),n=Ts(()=>{const a=e.renderDom.content.data;return a?t.compileTemplate(a):""}),{iframeRef:r,iframeStyle:o,setContent:i,sandboxUrl:s}=js(t.style,n);return ie(()=>t.style.value.height,(a,l)=>{a==="auto"&&l!=="auto"&&i()}),{...t,sandboxUrl:s,iframeStyle:o,iframeRef:r}},render(){return w("div",{...this.attrs,class:["frame"],style:this.style},[w("iframe",{ref:e=>this.iframeRef=e,src:this.sandboxUrl,sandbox:"allow-scripts allow-same-origin",scrolling:"no",style:this.iframeStyle})])}});zl.__docgenInfo={displayName:"EmbedSandboxRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/other/EmbedSandboxRenderer.vue"]};const fg=""+new URL("default-img-0432cf6b.png",import.meta.url).href,Bl=A({name:"ImageRenderer",props:{...q},setup(e){return j(e)},data(){return{hasError:!1}},computed:{src(){return this.renderDom.content.src?this.compileTemplate(this.renderDom.content.src,!1):""},imgAttrs(){return{"data-r":this.renderDom.renderId,[`data-s-${this.renderDom.studioDom.uuid}`]:"",...this.renderDom.studioDom.attrs}}},watch:{src(e){this.hasError=!1}},methods:{onError(e){this.hasError=!0},onLoad(){this.$store.dispatch("studioEditor/updateRendering")}},render(){return w("img",{...this.imgAttrs,src:this.hasError?fg:this.src,style:this.style,class:["img",this.pseudoClass],onError:this.onError,onLoad:this.onLoad})}});Bl.__docgenInfo={displayName:"ImageRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/other/ImgRenderer.vue"]};const Vl=A({name:"ImageSectionRenderer",props:{...q},setup(e,t){const{renderDom:n}=Oe(e),r=j(e),{outerStyle:o,innerStyle:i}=Ka(r.style),s=Ts(()=>{if(!n.value.content.src)return"";const a=r.compileTemplate(n.value.content.src,!0);return/{{/.test(a)?"":a});return()=>{const a=s.value&&`url('${s.value}')`,l=()=>w("div",{class:["image-background"],style:{...a&&{backgroundImage:a},...n.value.conditionalStyle(r.domConditions.value)[":before"]}});return w(r.tagName.value,{...r.attrs.value,class:["image"],style:o.value},[l(),w(r.tagName.value,{class:["box"],style:i.value},t.slots.default())])}}});Vl.__docgenInfo={displayName:"ImageSectionRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/basic/ImageSectionRenderer.vue"]};const ql=A({name:"ToggleRenderer",props:{...q},setup(e){const{tagName:t,attrs:n,style:r,rm:o,domConditions:i,isAnimating:s}=j(e),a=N(null),l=S(()=>{const u=o.value.isClose;return $d.isBoolean(u)&&u.value||i.value.includes("_isClose")});ie(l,async()=>{const u=a.value;if(!u)return;const c=window.getComputedStyle(u).height,h=u.style.height;await dd();const p=u.style.height,f=h==="auto"||p==="auto"||!h||!p;if(!s.value||!f)return;const m=window.getComputedStyle(u).height,g=u.style.transitionDuration,v=u.style.height;u.style.transitionDuration="0s",u.style.height=c,Id(()=>{u.style.transitionDuration=g,u.style.height=m,d(u,()=>{u.style.height=v})})});function d(u,c){const h=window.getComputedStyle(u),p=(parseFloat(h.transitionDuration)??0)*1e3,f=(parseFloat(h.transitionDelay)??0)*1e3,m=p+f+1,g=setTimeout(()=>{v()},m);function v(){clearTimeout(g),u.removeEventListener("transitionend",y),c()}function y(b){b.target===u&&v()}u.addEventListener("transitionend",y)}return()=>w(t.value,{...n.value,class:["box"],style:r.value},e.renderDom.children.map((u,c)=>{const h=u.slot==="after";return w(yr,{renderDom:u,role:e.role,index:c,key:u.renderId,ref:h?a:null})}))}});ql.__docgenInfo={displayName:"ToggleRenderer",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/StudioDomCore/renderer/other/ToggleRenderer.vue"]};const mg={image:Vs,img:Bl,text:Za,iframe:Hl,sandbox:zl,"icon-fa":zs,"icon-solid":jr,"icon-brands":jr,icon:Bs,section:zo,box:Eo,input:Pl,textarea:Ul,form:Dl,button:Nl,richText:vf,select:Fl,checkbox:Ll,radio:Ol,file:Rl,customElement:Xa,lottie:Ml},gg=e=>{if(e.isSection)return e.isImage?Vl:zo;if(e.isToggle)return ql;const t=String(e.studioDom.content?.type??"");return mg[t]||Eo},yg=({renderDom:e,role:t})=>(e.children||[]).filter(n=>n.isVisible).map((n,r)=>w(yr,{renderDom:n,role:t,index:r,key:n.renderId})),vs=e=>e.studioDom.style?.position;function yr(e){const{renderDom:t,role:n}=e;return w(gg(t),{...e,class:{sd:!0,absolute:vs(t)==="absolute",fixed:vs(t)==="fixed"},key:e.renderDom.renderId},()=>yg({renderDom:t,role:n}))}yr.props=["renderDom","role"];const jl=A({name:"EditorCanvasDefaultFont",components:{StyleTextRenderer:Md},setup(e){const t=ge(),n=S(()=>t.state.studioProduct.studioProduct.style?.fontFamily?.base?.value),r=S(()=>n.value?"":`.sd.richText, .sd.text { font-family: ${n.value}}`),o=S(()=>{const i=t.state.studioProductStyle.styleVars.fontFamily||[];return i.length===0?"":`:root { ${i.map(a=>`--s-font-${a.key}: ${a.value};`).join("")} }`});return{defaultFontFamily:n,styleText:r,fontFamilyVarStyle:o}}}),vg={class:"EditorCanvasDefaultFont"};function bg(e,t,n,r,o,i){const s=yn("StyleTextRenderer");return Z(),se("div",vg,[e.defaultFontFamily?(Z(),Gn(s,{key:0,"style-text":e.styleText},null,8,["style-text"])):lr("",!0),gn(s,{"style-text":e.fontFamilyVarStyle},null,8,["style-text"])])}const Ty=ve(jl,[["render",bg]]);jl.__docgenInfo={displayName:"EditorCanvasDefaultFont",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Editor/EditorCanvas/EditorCanvasDefaultFont.vue"]};const _g={class:"GoogleFontLoader"},Wl=A({__name:"GoogleFontLoader",props:{font:{}},setup(e){const t=e,n=N(As()),r=S(()=>t.font.variants.map(s=>{const a=parseInt(s)||400,l=/italic/.test(s);return a+(l?"i":"")}));(()=>{const s=document.getElementsByTagName("head").item(0),a=document.createElement("link"),l=r.value.join(",");a.rel="stylesheet",a.href=`https://fonts.googleapis.com/css?family=${t.font.family}:${l}`,a.id=n.value,s?.appendChild(a)})(),ar(()=>{setTimeout(()=>i(),500)});const i=()=>{const s=document.getElementsByTagName("head").item(0),a=document.getElementById(n.value);a&&s?.removeChild(a)};return(s,a)=>(Z(),se("div",_g))}});const wg=ve(Wl,[["__scopeId","data-v-576066c0"]]);Wl.__docgenInfo={exportName:"default",displayName:"GoogleFontLoader",description:"",tags:{},props:[{name:"font",required:!0,type:{name:"{ variants: string[]; family: string }"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Editor/EditorFontLoader/GoogleFontLoader.vue"]};const Cg="あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをんがぎぐげござじずぜぞだぢづでどばびぶべぼぱぴぷぺぽぁぃぅぇぉっゃゅょ",Sg="アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲンガギグゲゴザジズゼゾダヂズデドバビブベボパピプペポァィゥェォッャュョヴ",kg="0123456789０１２３４５６７８９",xg="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ",Tg="、。ー～「」【】『』゛゜♪♭■□◆◇△▲▽▼◎○●◯‥…・∴∵※×〒!”#$%&'()=~|`{+*}<>?_-^\\@[;:],./\\！”＃＄％＆’（）＝~｜｀｛＋＊｝＜＞？＿－＾\\＠［；：］，．／\\",Ag=Cg+Sg+kg+xg+Tg;const Gl={name:"TypeSquareFontLoader",props:{fonts:Array},data(){return{uuid:As(),initialCharacters:Ag}},created(){this.addLink()},beforeUnmount(){this.removeLink()},methods:{addLink(){const e=document.getElementsByTagName("head").item(0),t=document.createElement("script");t.src="//typesquare.com/3/tsst/script/ja/typesquare.js?5ad00062415c46a09fd67fd7ac1e024a",t.id=this.uuid,e.appendChild(t)},removeLink(){const e=document.getElementsByTagName("head").item(0),t=document.getElementById(this.uuid);e.removeChild(t)}}},Eg={class:"TypeSquareFontLoader"};function $g(e,t,n,r,o,i){return Z(),se("div",Eg,[(Z(!0),se(_o,null,wo(n.fonts,s=>(Z(),se("div",{key:s.family,class:"dummy",style:Co({"font-family":s.family})},Jn(s.family)+Jn(o.initialCharacters),5))),128))])}const Ig=ve(Gl,[["render",$g],["__scopeId","data-v-e70f6383"]]);Gl.__docgenInfo={displayName:"TypeSquareFontLoader",exportName:"default",description:"",tags:{},props:[{name:"fonts",type:{name:"array"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Editor/EditorFontLoader/TypeSquareFontLoader.vue"]};const Jl={name:"EditorFontLoader",components:{GoogleFontLoader:wg,TypeSquareFontLoader:Ig},computed:{project(){return this.$store.state.project.project},myFonts(){return this.$store.state.studioFonts.studioFonts},googleFonts(){return this.myFonts.filter(e=>e.vendor==="google")},typeSquareFonts(){return this.myFonts.filter(e=>e.vendor==="typesquare")},enableTypesquare(){return this.$store.state.project.projectIntegrations.some(t=>t.integration_name==="typesquare"&&t.code)}},mounted(){this.typeSquareFonts.length&&!this.enableTypesquare&&this.startTypesquare()},methods:{startTypesquare(){this.$store.dispatch("project/createProjectIntegrations",{projectId:this.project.id,integrationName:"typesquare"}).catch(e=>console.error(e.response)).finally(()=>{})}}},Mg={class:"EditorFontLoader"};function Ng(e,t,n,r,o,i){const s=yn("GoogleFontLoader"),a=yn("TypeSquareFontLoader");return Z(),se("div",Mg,[(Z(!0),se(_o,null,wo(i.googleFonts,l=>(Z(),Gn(s,{key:l.family,font:l},null,8,["font"]))),128)),i.enableTypesquare?(Z(),Gn(a,{key:0,fonts:i.typeSquareFonts},null,8,["fonts"])):lr("",!0)])}const Ay=ve(Jl,[["render",Ng],["__scopeId","data-v-9115877e"]]);Jl.__docgenInfo={displayName:"EditorFontLoader",exportName:"default",description:"",tags:{},sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Editor/EditorFontLoader/EditorFontLoader.vue"]};const Qt=Symbol("DefsStore"),Ey=()=>{const{renderPage:e}=Nd(),t=mu(e);return Kt(Qt,t),t},$y=()=>{const{scopeRootRenderDom:e}=ko(),t=xo(e);return Kt(Qt,t),t},Iy=()=>{const{selectingRenderDom:e}=ko(),t=xo(e);return Kt(Qt,t),t},My=e=>{const t=xo(e);return Kt(Qt,t),t},Ny=e=>{Kt(Qt,e)},vr=()=>bs(Qt),Kl=A({name:"GuiBooleanInput",props:{rmValue:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1},keyChain:{type:Array,required:!1,default:()=>[]}},setup(e){const t=ge(),{modifyState:n,confirm:r}=vr(),{rmValue:o,keyChain:i}=Oe(e);return{toggle:()=>{o.value.toggle();const a=i.value.join(".");n(a,o.value.value),r(),requestAnimationFrame(()=>{t.dispatch("studioEditor/updateRendering")})}}}});const Lg=e=>(ud("data-v-abbf17e1"),e=e(),cd(),e),Rg=["disabled"],Dg=Lg(()=>Ve("span",null,null,-1)),Pg=[Dg];function Og(e,t,n,r,o,i){return Z(),se("div",{class:vn(["GuiBooleanInput",{disabled:e.disabled}]),disabled:e.disabled,onClick:t[0]||(t[0]=(...s)=>e.toggle&&e.toggle(...s))},[Ve("div",{class:vn(["CheckBox",{on:e.rmValue.value,disabled:e.disabled}])},Pg,2)],10,Rg)}const Ly=ve(Kl,[["render",Og],["__scopeId","data-v-abbf17e1"]]);Kl.__docgenInfo={displayName:"GuiBooleanInput",exportName:"default",description:"",tags:{},props:[{name:"rmValue",type:{name:"RenderModelBoolean"},required:!0},{name:"disabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"keyChain",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/common/DefsEditor/Gui/GuiBooleanInput.vue"]};const Zl=A({name:"GuiNumberInput",props:{rmValue:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1},keyChain:{type:Array,required:!1,default:()=>[]}},setup(e){const t=ge(),{modifyState:n,confirm:r}=vr(),{rmValue:o,keyChain:i}=Oe(e);return{confirm:r,onFocus:u=>{u.target.select()},onEnter:u=>{u.isComposing||u.target.blur()},onBlur:u=>{const c=i.value.join(".");o.value.set(Number(u.target.value)),n(c,Number(u.target.value)),r()},onInput:u=>{t.dispatch("studioEditor/updateRendering"),o.value.set(Number(u.target.value))}}}});const Fg={class:"GuiNumberInput"},Ug=["value","disabled"];function Hg(e,t,n,r,o,i){return Z(),se("div",Fg,[Ve("input",{value:e.rmValue.value,disabled:!!e.disabled,type:"number",onKeydown:t[0]||(t[0]=_s((...s)=>e.onEnter&&e.onEnter(...s),["enter"])),onBlur:t[1]||(t[1]=(...s)=>e.onBlur&&e.onBlur(...s)),onFocus:t[2]||(t[2]=(...s)=>e.onFocus&&e.onFocus(...s)),onInput:t[3]||(t[3]=(...s)=>e.onInput&&e.onInput(...s))},null,40,Ug)])}const Ry=ve(Zl,[["render",Hg],["__scopeId","data-v-c23df6ba"]]);Zl.__docgenInfo={displayName:"GuiNumberInput",exportName:"default",description:"",tags:{},props:[{name:"rmValue",type:{name:"RenderModelNumber"},required:!0},{name:"disabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"keyChain",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/common/DefsEditor/Gui/GuiNumberInput.vue"]};const Xl=A({name:"SimpleTemplateInput",components:{},props:{value:{type:String,required:!0},rm:{type:Object,required:!0},placeholder:{type:String,required:!1,default:""},oneLine:{type:Boolean,required:!1,default:!1},allowBr:{type:Boolean,required:!1,default:!0},isCode:{type:Boolean,required:!1,default:!1}},data(){return{isFocused:!1,selectedNodeIndex:-1,selectedIndex:-1,cursorPosition:{top:0,left:0,right:0,bottom:0},lineHeight:24,isEmpty:!0}},computed:{innerHtml(){return this.value},cmds(){return{Tab:()=>{},Escape:this.endEdit,Enter:()=>{document.execCommand("insertlinebreak")}}}},watch:{value:{handler(){this.updateIsEmpty()},immediate:!0}},methods:{endEdit(){this.$refs.input.blur()},onKeydown(e){e.stopPropagation();const{key:t,metaKey:n,ctrlKey:r,shiftKey:o,isComposing:i}=e;if(!i&&!(o&&t==="Enter"))if(t==="Enter")this.endEdit(),e.preventDefault();else if(n||r){if(/^[biu]$/.test(t)){e.preventDefault();return}}else{const s=this.cmds[t];s&&(e.preventDefault(),s())}},onMousedown(e){const t=[...e.target.attributes].find(n=>n.name==="data-index")?.value;this.selectedNodeIndex=Number(t)===this.selectedNodeIndex||t===void 0?-1:Number(t)},select(e){const t=document.createRange();t.selectNodeContents(e);const n=window.getSelection();n.removeAllRanges(),n.addRange(t)},onFoucs(e){this.isFocused=!0,this.select(e.target)},onBlur(e,t){window.getSelection().removeAllRanges(),this.isFocused=!1,this.updateText()},onPaste(e){const t=e.clipboardData.getData("text/plain"),n=Kn(t),r=Zn(n);document.execCommand("insertHTML",!1,r),e.preventDefault(),e.stopPropagation()},updateText(){const e=document.createElement("div"),t=this.$refs.input;e.innerHTML=t.innerHTML;const r=[...Array.prototype.slice.call(e.childNodes)].map(i=>i.tagName==="SPAN"?`{{${[...i.attributes].find(a=>a.name==="data-key").value}}}`:i.nodeName==="#comment"?`<!-- ${i.data} -->`:i.tagName==null?i.data:/^(BR|DIV)$/.test(i.tagName)?(this.isCode?`
`:"<br>")+i.innerText:i.innerText).join("");if(r===this.value)return;let o=r;r.endsWith("<br>")&&(o=r.slice(0,-4)),this.$emit("update:value",o)},closeNodeMenu(){this.selectedNodeIndex=-1},updateIsEmpty(){requestAnimationFrame(()=>{const e=this.$refs.input;e&&(this.isEmpty=e.innerHTML.length===0)})}}});const zg={class:"SimpleTemplateInput"},Bg=["innerHTML"],Vg={key:0,class:"placeholder"};function qg(e,t,n,r,o,i){return Z(),se("div",zg,[Ve("p",{ref:"input",class:vn(["input",{isEmpty:e.value==="",oneLine:e.oneLine,isCode:e.isCode}]),contenteditable:"true",tabindex:"20",onFocus:t[0]||(t[0]=(...s)=>e.onFoucs&&e.onFoucs(...s)),onBlur:t[1]||(t[1]=s=>e.onBlur(s)),onKeydown:t[2]||(t[2]=(...s)=>e.onKeydown&&e.onKeydown(...s)),onPaste:t[3]||(t[3]=(...s)=>e.onPaste&&e.onPaste(...s)),onMousedown:t[4]||(t[4]=(...s)=>e.onMousedown&&e.onMousedown(...s)),innerHTML:e.value},null,42,Bg),e.placeholder&&e.isEmpty?(Z(),se("p",Vg,Jn(e.placeholder),1)):lr("",!0)])}const jg=ve(Xl,[["render",qg],["__scopeId","data-v-034a14b2"]]);Xl.__docgenInfo={displayName:"SimpleTemplateInput",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},required:!0},{name:"rm",type:{name:"RenderModel"},required:!0},{name:"placeholder",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"oneLine",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"allowBr",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"isCode",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}}],events:[{name:"update:value",type:{names:["undefined"]}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/Editor/common/SimpleTemplateInput.vue"]};const Wg={class:"GuiTextInput"},Yl=A({__name:"GuiTextInput",props:{rmValue:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1},keyChain:{type:Array,required:!1,default:()=>[]}},setup(e){const t=e,{modifyState:n,confirm:r}=vr(),{rmValue:o,keyChain:i}=Oe(t),s=a=>{const l=i.value.join(".");o.value.set&&o.value.set(a),n(l,a),r()};return(a,l)=>(Z(),se("div",Wg,[gn(jg,{class:vn(["simple-input",{disabled:e.disabled}]),value:bt(o).value,rm:bt(o),"meta-fields":[],placeholder:"https://studio.design","onUpdate:value":s},null,8,["class","value","rm","placeholder"])]))}});const Dy=ve(Yl,[["__scopeId","data-v-06175ab1"]]);Yl.__docgenInfo={exportName:"default",displayName:"GuiTextInput",description:"",tags:{},props:[{name:"rmValue",type:{name:"RenderModelString"},required:!0},{name:"disabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"keyChain",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/common/DefsEditor/Gui/GuiTextInput.vue"]};const Ql=A({name:"GuiColorInput",props:{rmValue:{type:Object,required:!0},disabled:{type:Boolean,default:!1,required:!1},keyChain:{type:Array,required:!1,default:()=>[]}},setup(e){const{modifyState:t,confirm:n}=vr(),{rmValue:r,keyChain:o}=Oe(e),i=S(()=>({backgroundColor:r.value.value}));return{confirm:n,onChange:l=>{const d=o.value.join(".");r.value.set(l.target.value),t(d,l.target.value),n()},onInput:l=>{r.value.set(l.target.value)},colorStyle:i}}});const Gg=["disabled"],Jg={class:"icon"},Kg=["value"];function Zg(e,t,n,r,o,i){return Z(),se("div",{class:"GuiColorInput",disabled:e.disabled},[Ve("div",Jg,[Ve("i",{class:"preview-icon",style:Co(e.colorStyle)},null,4)]),Ve("input",{class:"color-input",type:"color",value:e.rmValue.value,onChange:t[0]||(t[0]=(...s)=>e.onChange&&e.onChange(...s)),onInput:t[1]||(t[1]=(...s)=>e.onInput&&e.onInput(...s))},null,40,Kg)],8,Gg)}const Py=ve(Ql,[["render",Zg],["__scopeId","data-v-73f61425"]]);Ql.__docgenInfo={displayName:"GuiColorInput",exportName:"default",description:"",tags:{},props:[{name:"rmValue",type:{name:"RenderModelColor"},required:!0},{name:"disabled",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"keyChain",type:{name:"string[]"},required:!1,defaultValue:{func:!0,value:"() => []"}}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/components/common/DefsEditor/Gui/GuiColorInput.vue"]};const Xg={class:"p-select-switch"},Yg={class:"p-select-switch-inner"},Qg=["onMousedown"],ed=A({__name:"SelectSwitch",props:{value:{type:String,required:!1,default:"value1"},options:{type:Array,required:!1,default:()=>[{label:"Label 1",value:"value1"}]}},emits:["update:value"],setup(e,{emit:t}){const n=e,r=t,{value:o,options:i}=Oe(n),s=S(()=>{const l=i.value.findIndex(u=>u.value===o.value),d=100/i.value.length;return{width:`${d}%`,marginLeft:`${l*d}%`}}),a=l=>{requestAnimationFrame(()=>{r("update:value",l)})};return(l,d)=>(Z(),se("nav",Xg,[Ve("div",Yg,[Ve("div",{class:"p-select-switch-bar",style:Co(s.value)},null,4),(Z(!0),se(_o,null,wo(bt(i),u=>(Z(),se("div",{key:u.value,class:vn(["p-select-switch-item",{selected:u.value===bt(o)}]),onMousedown:c=>a(u.value)},[Ve("p",null,Jn(u.label),1)],42,Qg))),128))])]))}});const Oy=ve(ed,[["__scopeId","data-v-f550405e"]]);ed.__docgenInfo={exportName:"default",displayName:"SelectSwitch",description:"",tags:{},props:[{name:"value",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'value1'"}},{name:"options",type:{name:"{ label: string; value: string }[]"},required:!1,defaultValue:{func:!0,value:"() => [{ label: 'Label 1', value: 'value1' }]"}}],events:[{name:"update:value"}],sourceFiles:["/Users/h.kamiyama/GitHub/studio-front/src/piano/v2/SelectSwitch.vue"]};export{ke as $,wg as A,Ru as B,pg as C,Ay as D,Ty as E,ui as F,Ns as G,ot as H,Rs as I,dy as J,ef as K,sf as L,Ou as M,Ny as N,of as O,ja as P,mf as Q,Uu as R,yr as S,P as T,xy as U,It as V,uy as _,xo as a,mu as b,cy as c,_u as d,ci as e,Ds as f,fy as g,Lu as h,st as i,Du as j,by as k,Mu as l,py as m,Fs as n,vr as o,Ry as p,Dy as q,Ly as r,hy as s,Py as t,fu as u,Iy as v,$y as w,Ey as x,Oy as y,My as z};
